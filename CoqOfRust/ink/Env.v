(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import std.prelude.rust_2021.

Module api.
  Definition caller
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.AccountId :=
    OnInstance.on_instance (fun instance => TypedEnvBackend.caller instance).
  
  Definition transferred_value
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.Balance :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.transferred_value instance).
  
  Definition weight_to_fee
      {E : Set}
      `{Environment.Trait E}
      (gas : crate.types.Gas)
      : M ImplE.Balance :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.weight_to_fee instance gas).
  
  Definition gas_left
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M crate.types.Gas :=
    OnInstance.on_instance (fun instance => TypedEnvBackend.gas_left instance).
  
  Definition block_timestamp
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.Timestamp :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.block_timestamp instance).
  
  Definition account_id
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.AccountId :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.account_id instance).
  
  Definition balance
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.Balance :=
    OnInstance.on_instance (fun instance => TypedEnvBackend.balance instance).
  
  Definition block_number
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.BlockNumber :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.block_number instance).
  
  Definition minimum_balance
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M ImplE.Balance :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.minimum_balance instance).
  
  Definition emit_event
      {E Event : Set}
      `{Environment.Trait E}
      `{Topics.Trait Event}
      `{scale.Encode.Trait Event}
      (event : Event)
      : M unit :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.emit_event instance event).
  
  Definition set_contract_storage
      {K V : Set}
      `{scale.Encode.Trait K}
      `{Storable.Trait V}
      (key : ref K)
      (value : ref V)
      : M (Option u32) :=
    OnInstance.on_instance
      (fun instance => EnvBackend.set_contract_storage instance key value).
  
  Definition get_contract_storage
      {K R : Set}
      `{scale.Encode.Trait K}
      `{Storable.Trait R}
      (key : ref K)
      : M (crate.Result (Option R)) :=
    OnInstance.on_instance
      (fun instance => EnvBackend.get_contract_storage instance key).
  
  Definition take_contract_storage
      {K R : Set}
      `{scale.Encode.Trait K}
      `{Storable.Trait R}
      (key : ref K)
      : M (crate.Result (Option R)) :=
    OnInstance.on_instance
      (fun instance => EnvBackend.take_contract_storage instance key).
  
  Definition contains_contract_storage
      {K : Set}
      `{scale.Encode.Trait K}
      (key : ref K)
      : M (Option u32) :=
    OnInstance.on_instance
      (fun instance => EnvBackend.contains_contract_storage instance key).
  
  Definition clear_contract_storage
      {K : Set}
      `{scale.Encode.Trait K}
      (key : ref K)
      : M (Option u32) :=
    OnInstance.on_instance
      (fun instance => EnvBackend.clear_contract_storage instance key).
  
  Definition invoke_contract
      {E Args R : Set}
      `{Environment.Trait E}
      `{scale.Encode.Trait Args}
      `{scale.Decode.Trait R}
      (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
      : M (crate.Result (ink_primitives.MessageResult R)) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.invoke_contract instance params).
  
  Definition invoke_contract_delegate
      {E Args R : Set}
      `{Environment.Trait E}
      `{scale.Encode.Trait Args}
      `{scale.Decode.Trait R}
      (params
        :
        ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
      : M (crate.Result R) :=
    OnInstance.on_instance
      (fun instance =>
        TypedEnvBackend.invoke_contract_delegate instance params).
  
  Definition instantiate_contract
      {E ContractRef Args Salt R : Set}
      `{Environment.Trait E}
      `{FromAccountId.Trait E ContractRef}
      `{scale.Encode.Trait Args}
      `{AsRef.Trait Slice Salt}
      `{ConstructorReturnType.Trait ContractRef R}
      (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.instantiate_contract instance params).
  
  Definition terminate_contract
      {E : Set}
      `{Environment.Trait E}
      (beneficiary : ImplE.AccountId)
      : M Empty_set :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.terminate_contract instance beneficiary).
  
  Definition transfer
      {E : Set}
      `{Environment.Trait E}
      (destination : ImplE.AccountId)
      (value : ImplE.Balance)
      : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.transfer instance destination value).
  
  Definition decode_input
      {T : Set}
      `{scale.Decode.Trait T}
      (_ : unit)
      : M (crate.Result T) :=
    OnInstance.on_instance (fun instance => EnvBackend.decode_input instance).
  
  Definition return_value
      {R : Set}
      `{scale.Encode.Trait R}
      (return_flags : crate.backend.ReturnFlags)
      (return_value : ref R)
      : M Empty_set :=
    OnInstance.on_instance
      (fun instance =>
        EnvBackend.return_value instance return_flags return_value).
  
  Definition debug_message (message : ref str) : M unit :=
    OnInstance.on_instance
      (fun instance => EnvBackend.debug_message instance message).
  
  Definition hash_bytes
      {H : Set}
      `{CryptoHash.Trait H}
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    OnInstance.on_instance
      (fun instance => instance.["hash_bytes"] input output).
  
  Definition hash_encoded
      {H T : Set}
      `{CryptoHash.Trait H}
      `{scale.Encode.Trait T}
      (input : ref T)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    OnInstance.on_instance
      (fun instance => instance.["hash_encoded"] input output).
  
  Definition ecdsa_recover
      (signature : ref list u8)
      (message_hash : ref list u8)
      (output : mut_ref list u8)
      : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance =>
        instance.["ecdsa_recover"] signature message_hash output).
  
  Definition ecdsa_to_eth_address
      (pubkey : ref list u8)
      (output : mut_ref list u8)
      : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance => instance.["ecdsa_to_eth_address"] pubkey output).
  
  Definition is_contract
      {E : Set}
      `{Environment.Trait E}
      (account : ref ImplE.AccountId)
      : M bool :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.is_contract instance account).
  
  Definition code_hash
      {E : Set}
      `{Environment.Trait E}
      (account : ref ImplE.AccountId)
      : M (crate.Result ImplE.Hash) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.code_hash instance account).
  
  Definition own_code_hash
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M (crate.Result ImplE.Hash) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.own_code_hash instance).
  
  Definition caller_is_origin
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      : M bool :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.caller_is_origin instance).
  
  Definition set_code_hash (code_hash : ref list u8) : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance => instance.["set_code_hash"] code_hash).
  
  Definition set_code_hash2
      {E : Set}
      `{Environment.Trait E}
      (code_hash : ref ImplE.Hash)
      : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := code_hash.["as_ref"] in
        instance.["set_code_hash"] α0).
  
  Definition call_runtime
      {E Call : Set}
      `{Environment.Trait E}
      `{scale.Encode.Trait crate.call.Call}
      (call : ref crate.call.Call)
      : M (crate.Result unit) :=
    OnInstance.on_instance
      (fun instance => TypedEnvBackend.call_runtime instance call).
End api.

Definition caller
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.AccountId :=
  OnInstance.on_instance (fun instance => TypedEnvBackend.caller instance).

Definition transferred_value
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.Balance :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.transferred_value instance).

Definition weight_to_fee
    {E : Set}
    `{Environment.Trait E}
    (gas : crate.types.Gas)
    : M ImplE.Balance :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.weight_to_fee instance gas).

Definition gas_left
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M crate.types.Gas :=
  OnInstance.on_instance (fun instance => TypedEnvBackend.gas_left instance).

Definition block_timestamp
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.Timestamp :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.block_timestamp instance).

Definition account_id
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.AccountId :=
  OnInstance.on_instance (fun instance => TypedEnvBackend.account_id instance).

Definition balance
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.Balance :=
  OnInstance.on_instance (fun instance => TypedEnvBackend.balance instance).

Definition block_number
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.BlockNumber :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.block_number instance).

Definition minimum_balance
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M ImplE.Balance :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.minimum_balance instance).

Definition emit_event
    {E Event : Set}
    `{Environment.Trait E}
    `{Topics.Trait Event}
    `{scale.Encode.Trait Event}
    (event : Event)
    : M unit :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.emit_event instance event).

Definition set_contract_storage
    {K V : Set}
    `{scale.Encode.Trait K}
    `{Storable.Trait V}
    (key : ref K)
    (value : ref V)
    : M (Option u32) :=
  OnInstance.on_instance
    (fun instance => EnvBackend.set_contract_storage instance key value).

Definition get_contract_storage
    {K R : Set}
    `{scale.Encode.Trait K}
    `{Storable.Trait R}
    (key : ref K)
    : M (crate.Result (Option R)) :=
  OnInstance.on_instance
    (fun instance => EnvBackend.get_contract_storage instance key).

Definition take_contract_storage
    {K R : Set}
    `{scale.Encode.Trait K}
    `{Storable.Trait R}
    (key : ref K)
    : M (crate.Result (Option R)) :=
  OnInstance.on_instance
    (fun instance => EnvBackend.take_contract_storage instance key).

Definition contains_contract_storage
    {K : Set}
    `{scale.Encode.Trait K}
    (key : ref K)
    : M (Option u32) :=
  OnInstance.on_instance
    (fun instance => EnvBackend.contains_contract_storage instance key).

Definition clear_contract_storage
    {K : Set}
    `{scale.Encode.Trait K}
    (key : ref K)
    : M (Option u32) :=
  OnInstance.on_instance
    (fun instance => EnvBackend.clear_contract_storage instance key).

Definition invoke_contract
    {E Args R : Set}
    `{Environment.Trait E}
    `{scale.Encode.Trait Args}
    `{scale.Decode.Trait R}
    (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
    : M (crate.Result (ink_primitives.MessageResult R)) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.invoke_contract instance params).

Definition invoke_contract_delegate
    {E Args R : Set}
    `{Environment.Trait E}
    `{scale.Encode.Trait Args}
    `{scale.Decode.Trait R}
    (params : ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
    : M (crate.Result R) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.invoke_contract_delegate instance params).

Definition instantiate_contract
    {E ContractRef Args Salt R : Set}
    `{Environment.Trait E}
    `{FromAccountId.Trait E ContractRef}
    `{scale.Encode.Trait Args}
    `{AsRef.Trait Slice Salt}
    `{ConstructorReturnType.Trait ContractRef R}
    (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
    :
      M
        (crate.Result
          (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.instantiate_contract instance params).

Definition terminate_contract
    {E : Set}
    `{Environment.Trait E}
    (beneficiary : ImplE.AccountId)
    : M Empty_set :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.terminate_contract instance beneficiary).

Definition transfer
    {E : Set}
    `{Environment.Trait E}
    (destination : ImplE.AccountId)
    (value : ImplE.Balance)
    : M (crate.Result unit) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.transfer instance destination value).

Definition decode_input
    {T : Set}
    `{scale.Decode.Trait T}
    (_ : unit)
    : M (crate.Result T) :=
  OnInstance.on_instance (fun instance => EnvBackend.decode_input instance).

Definition return_value
    {R : Set}
    `{scale.Encode.Trait R}
    (return_flags : crate.backend.ReturnFlags)
    (return_value : ref R)
    : M Empty_set :=
  OnInstance.on_instance
    (fun instance =>
      EnvBackend.return_value instance return_flags return_value).

Definition debug_message (message : ref str) : M unit :=
  OnInstance.on_instance
    (fun instance => EnvBackend.debug_message instance message).

Definition hash_bytes
    {H : Set}
    `{CryptoHash.Trait H}
    (input : ref Slice)
    (output : mut_ref HashOutput.Type)
    : M unit :=
  OnInstance.on_instance (fun instance => instance.["hash_bytes"] input output).

Definition hash_encoded
    {H T : Set}
    `{CryptoHash.Trait H}
    `{scale.Encode.Trait T}
    (input : ref T)
    (output : mut_ref HashOutput.Type)
    : M unit :=
  OnInstance.on_instance
    (fun instance => instance.["hash_encoded"] input output).

Definition ecdsa_recover
    (signature : ref list u8)
    (message_hash : ref list u8)
    (output : mut_ref list u8)
    : M (crate.Result unit) :=
  OnInstance.on_instance
    (fun instance => instance.["ecdsa_recover"] signature message_hash output).

Definition ecdsa_to_eth_address
    (pubkey : ref list u8)
    (output : mut_ref list u8)
    : M (crate.Result unit) :=
  OnInstance.on_instance
    (fun instance => instance.["ecdsa_to_eth_address"] pubkey output).

Definition is_contract
    {E : Set}
    `{Environment.Trait E}
    (account : ref ImplE.AccountId)
    : M bool :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.is_contract instance account).

Definition code_hash
    {E : Set}
    `{Environment.Trait E}
    (account : ref ImplE.AccountId)
    : M (crate.Result ImplE.Hash) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.code_hash instance account).

Definition own_code_hash
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M (crate.Result ImplE.Hash) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.own_code_hash instance).

Definition caller_is_origin
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    : M bool :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.caller_is_origin instance).

Definition set_code_hash (code_hash : ref list u8) : M (crate.Result unit) :=
  OnInstance.on_instance (fun instance => instance.["set_code_hash"] code_hash).

Definition set_code_hash2
    {E : Set}
    `{Environment.Trait E}
    (code_hash : ref ImplE.Hash)
    : M (crate.Result unit) :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := code_hash.["as_ref"] in
      instance.["set_code_hash"] α0).

Definition call_runtime
    {E Call : Set}
    `{Environment.Trait E}
    `{scale.Encode.Trait crate.call.Call}
    (call : ref crate.call.Call)
    : M (crate.Result unit) :=
  OnInstance.on_instance
    (fun instance => TypedEnvBackend.call_runtime instance call).

Module arithmetic.
  Module checked_pow := num_traits.checked_pow.
  
  Module BaseArithmetic.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End BaseArithmetic.
  
  Module Impl_BaseArithmetic_for_T.
    Definition Self := T.
    
    Global Instance I T : BaseArithmetic.Trait Self :=
      BaseArithmetic.Build_Class _.
  End Impl_BaseArithmetic_for_T.
  
  Module AtLeast32Bit.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End AtLeast32Bit.
  
  Module Impl_AtLeast32Bit_for_T.
    Definition Self := T.
    
    Global Instance I T : AtLeast32Bit.Trait Self := AtLeast32Bit.Build_Class _.
  End Impl_AtLeast32Bit_for_T.
  
  Module AtLeast32BitUnsigned.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End AtLeast32BitUnsigned.
  
  Module Impl_AtLeast32BitUnsigned_for_T.
    Definition Self := T.
    
    Global Instance I T : AtLeast32BitUnsigned.Trait Self :=
      AtLeast32BitUnsigned.Build_Class _.
  End Impl_AtLeast32BitUnsigned_for_T.
  
  Module Saturating.
    Class Trait (Self : Set) : Set := {
      saturating_add : Self -> Self -> (M Self);
      saturating_sub : Self -> Self -> (M Self);
      saturating_mul : Self -> Self -> (M Self);
      saturating_pow : Self -> usize -> (M Self);
    }.
    
    Global Instance Method_saturating_add `(Trait)
      : Notation.Dot "saturating_add" := {
      Notation.dot := saturating_add;
    }.
    Global Instance Method_saturating_sub `(Trait)
      : Notation.Dot "saturating_sub" := {
      Notation.dot := saturating_sub;
    }.
    Global Instance Method_saturating_mul `(Trait)
      : Notation.Dot "saturating_mul" := {
      Notation.dot := saturating_mul;
    }.
    Global Instance Method_saturating_pow `(Trait)
      : Notation.Dot "saturating_pow" := {
      Notation.dot := saturating_pow;
    }.
  End Saturating.
  
  Module Impl_Saturating_for_T.
    Definition Self := T.
    
    Definition saturating_add (self : Self) (o : Self) : M Self :=
      num_traits.Saturating.saturating_add self o.
    
    Global Instance Method_saturating_add : Notation.Dot "saturating_add" := {
      Notation.dot := saturating_add;
    }.
    
    Definition saturating_sub (self : Self) (o : Self) : M Self :=
      num_traits.Saturating.saturating_sub self o.
    
    Global Instance Method_saturating_sub : Notation.Dot "saturating_sub" := {
      Notation.dot := saturating_sub;
    }.
    
    Definition saturating_mul (self : Self) (o : Self) : M Self :=
      let* α0 := self.["checked_mul"] (addr_of o) in
      α0.["unwrap_or_else"]
        (fun  =>
          let* α0 := T::["zero"] tt in
          let* α1 := self.["lt"] α0 in
          let* α2 := T::["zero"] tt in
          let* α3 := o.["lt"] α2 in
          let* α4 := α1.["ne"] α3 in
          if (α4 : bool) then
            Bounded.min_value tt
          else
            Bounded.max_value tt).
    
    Global Instance Method_saturating_mul : Notation.Dot "saturating_mul" := {
      Notation.dot := saturating_mul;
    }.
    
    Definition saturating_pow (self : Self) (exp : usize) : M Self :=
      let* neg :=
        let* α0 := T::["zero"] tt in
        let* α1 := self.["lt"] α0 in
        let* α2 := exp.["rem"] 2 in
        let* α3 := α2.["ne"] 0 in
        α1.["andb"] α3 in
      let* α0 := checked_pow self exp in
      α0.["unwrap_or_else"]
        (fun  =>
          if (neg : bool) then
            Bounded.min_value tt
          else
            Bounded.max_value tt).
    
    Global Instance Method_saturating_pow : Notation.Dot "saturating_pow" := {
      Notation.dot := saturating_pow;
    }.
    
    Global Instance I T : Saturating.Trait Self := {
      Saturating.saturating_add := saturating_add;
      Saturating.saturating_sub := saturating_sub;
      Saturating.saturating_mul := saturating_mul;
      Saturating.saturating_pow := saturating_pow;
    }.
  End Impl_Saturating_for_T.
End arithmetic.

Module checked_pow := num_traits.checked_pow.

Module BaseArithmetic.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End BaseArithmetic.

Module Impl_BaseArithmetic_for_T.
  Definition Self := T.
  
  Global Instance I T : BaseArithmetic.Trait Self :=
    BaseArithmetic.Build_Class _.
End Impl_BaseArithmetic_for_T.

Module AtLeast32Bit.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End AtLeast32Bit.

Module Impl_AtLeast32Bit_for_T.
  Definition Self := T.
  
  Global Instance I T : AtLeast32Bit.Trait Self := AtLeast32Bit.Build_Class _.
End Impl_AtLeast32Bit_for_T.

Module AtLeast32BitUnsigned.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End AtLeast32BitUnsigned.

Module Impl_AtLeast32BitUnsigned_for_T.
  Definition Self := T.
  
  Global Instance I T : AtLeast32BitUnsigned.Trait Self :=
    AtLeast32BitUnsigned.Build_Class _.
End Impl_AtLeast32BitUnsigned_for_T.

Module Saturating.
  Class Trait (Self : Set) : Set := {
    saturating_add : Self -> Self -> (M Self);
    saturating_sub : Self -> Self -> (M Self);
    saturating_mul : Self -> Self -> (M Self);
    saturating_pow : Self -> usize -> (M Self);
  }.
  
  Global Instance Method_saturating_add `(Trait)
    : Notation.Dot "saturating_add" := {
    Notation.dot := saturating_add;
  }.
  Global Instance Method_saturating_sub `(Trait)
    : Notation.Dot "saturating_sub" := {
    Notation.dot := saturating_sub;
  }.
  Global Instance Method_saturating_mul `(Trait)
    : Notation.Dot "saturating_mul" := {
    Notation.dot := saturating_mul;
  }.
  Global Instance Method_saturating_pow `(Trait)
    : Notation.Dot "saturating_pow" := {
    Notation.dot := saturating_pow;
  }.
End Saturating.

Module Impl_Saturating_for_T.
  Definition Self := T.
  
  Definition saturating_add (self : Self) (o : Self) : M Self :=
    num_traits.Saturating.saturating_add self o.
  
  Global Instance Method_saturating_add : Notation.Dot "saturating_add" := {
    Notation.dot := saturating_add;
  }.
  
  Definition saturating_sub (self : Self) (o : Self) : M Self :=
    num_traits.Saturating.saturating_sub self o.
  
  Global Instance Method_saturating_sub : Notation.Dot "saturating_sub" := {
    Notation.dot := saturating_sub;
  }.
  
  Definition saturating_mul (self : Self) (o : Self) : M Self :=
    let* α0 := self.["checked_mul"] (addr_of o) in
    α0.["unwrap_or_else"]
      (fun  =>
        let* α0 := T::["zero"] tt in
        let* α1 := self.["lt"] α0 in
        let* α2 := T::["zero"] tt in
        let* α3 := o.["lt"] α2 in
        let* α4 := α1.["ne"] α3 in
        if (α4 : bool) then
          Bounded.min_value tt
        else
          Bounded.max_value tt).
  
  Global Instance Method_saturating_mul : Notation.Dot "saturating_mul" := {
    Notation.dot := saturating_mul;
  }.
  
  Definition saturating_pow (self : Self) (exp : usize) : M Self :=
    let* neg :=
      let* α0 := T::["zero"] tt in
      let* α1 := self.["lt"] α0 in
      let* α2 := exp.["rem"] 2 in
      let* α3 := α2.["ne"] 0 in
      α1.["andb"] α3 in
    let* α0 := checked_pow self exp in
    α0.["unwrap_or_else"]
      (fun  =>
        if (neg : bool) then
          Bounded.min_value tt
        else
          Bounded.max_value tt).
  
  Global Instance Method_saturating_pow : Notation.Dot "saturating_pow" := {
    Notation.dot := saturating_pow;
  }.
  
  Global Instance I T : Saturating.Trait Self := {
    Saturating.saturating_add := saturating_add;
    Saturating.saturating_sub := saturating_sub;
    Saturating.saturating_mul := saturating_mul;
    Saturating.saturating_pow := saturating_pow;
  }.
End Impl_Saturating_for_T.

Module backend.
  Module ReturnFlags.
    Record t : Set := {
      value : u32;
    }.
    
    Global Instance Get_value : Notation.Dot "value" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End ReturnFlags.
  Definition ReturnFlags : Set := ReturnFlags.t.
  
  Module Impl__crate_default_Default_for_crate_backend_ReturnFlags.
    Definition Self := crate.backend.ReturnFlags.
    
    Definition default (_ : unit) : M crate.backend.ReturnFlags :=
      let* α0 := _crate.default.Default.default tt in
      Pure {| crate.backend.ReturnFlags.value := α0; |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_crate_backend_ReturnFlags.
  
  Module Implcrate.backend.ReturnFlags.
    Definition Self := crate.backend.ReturnFlags.
    
    Definition new_with_reverted (has_reverted : bool) : M Self :=
      let* α0 := Self::["default"] tt in
      α0.["set_reverted"] has_reverted.
    
    Global Instance AssociatedFunction_new_with_reverted :
      Notation.DoubleColon Self "new_with_reverted" := {
      Notation.double_colon := new_with_reverted;
    }.
    
    Definition set_reverted (self : Self) (has_reverted : bool) : M Self :=
      let* _ :=
        match has_reverted with
        | true => self.["value"].["bitor_assign"] (cast has_reverted u32)
        | false =>
          let* α0 := has_reverted.["not"] in
          self.["value"].["bitand_assign"] (cast α0 u32)
        end in
      Pure self.
    
    Global Instance Method_set_reverted : Notation.Dot "set_reverted" := {
      Notation.dot := set_reverted;
    }.
  End Implcrate.backend.ReturnFlags.
  
  Module CallFlags.
    Record t : Set := {
      forward_input : bool;
      clone_input : bool;
      tail_call : bool;
      allow_reentry : bool;
    }.
    
    Global Instance Get_forward_input : Notation.Dot "forward_input" := {
      Notation.dot '(Build_t x0 _ _ _) := x0;
    }.
    Global Instance Get_clone_input : Notation.Dot "clone_input" := {
      Notation.dot '(Build_t _ x1 _ _) := x1;
    }.
    Global Instance Get_tail_call : Notation.Dot "tail_call" := {
      Notation.dot '(Build_t _ _ x2 _) := x2;
    }.
    Global Instance Get_allow_reentry : Notation.Dot "allow_reentry" := {
      Notation.dot '(Build_t _ _ _ x3) := x3;
    }.
  End CallFlags.
  Definition CallFlags : Set := CallFlags.t.
  
  Module Impl__crate_marker_Copy_for_CallFlags.
    Definition Self := CallFlags.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_CallFlags.
  
  Module Impl__crate_clone_Clone_for_CallFlags.
    Definition Self := CallFlags.
    
    Definition clone (self : ref Self) : M CallFlags :=
      let _ := tt in
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_CallFlags.
  
  Module Impl__crate_fmt_Debug_for_CallFlags.
    Definition Self := CallFlags.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field4_finish"]
        f
        "CallFlags"
        "forward_input"
        (addr_of self.["forward_input"])
        "clone_input"
        (addr_of self.["clone_input"])
        "tail_call"
        (addr_of self.["tail_call"])
        "allow_reentry"
        (addr_of (addr_of self.["allow_reentry"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_CallFlags.
  
  Module Impl__crate_default_Default_for_CallFlags.
    Definition Self := CallFlags.
    
    Definition default (_ : unit) : M CallFlags :=
      let* α0 := _crate.default.Default.default tt in
      let* α1 := _crate.default.Default.default tt in
      let* α2 := _crate.default.Default.default tt in
      let* α3 := _crate.default.Default.default tt in
      Pure
        {|
          CallFlags.forward_input := α0;
          CallFlags.clone_input := α1;
          CallFlags.tail_call := α2;
          CallFlags.allow_reentry := α3;
        |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_CallFlags.
  
  Module ImplCallFlags.
    Definition Self := CallFlags.
    
    Definition set_forward_input
        (self : Self)
        (forward_input : bool)
        : M Self :=
      let* _ := assign self.["forward_input"] forward_input in
      Pure self.
    
    Global Instance Method_set_forward_input :
      Notation.Dot "set_forward_input" := {
      Notation.dot := set_forward_input;
    }.
    
    Definition set_clone_input (self : Self) (clone_input : bool) : M Self :=
      let* _ := assign self.["clone_input"] clone_input in
      Pure self.
    
    Global Instance Method_set_clone_input : Notation.Dot "set_clone_input" := {
      Notation.dot := set_clone_input;
    }.
    
    Definition set_tail_call (self : Self) (tail_call : bool) : M Self :=
      let* _ := assign self.["tail_call"] tail_call in
      Pure self.
    
    Global Instance Method_set_tail_call : Notation.Dot "set_tail_call" := {
      Notation.dot := set_tail_call;
    }.
    
    Definition set_allow_reentry
        (self : Self)
        (allow_reentry : bool)
        : M Self :=
      let* _ := assign self.["allow_reentry"] allow_reentry in
      Pure self.
    
    Global Instance Method_set_allow_reentry :
      Notation.Dot "set_allow_reentry" := {
      Notation.dot := set_allow_reentry;
    }.
    
    Definition into_u32 (self : Self) : M u32 :=
      let* α0 := (cast self.["clone_input"] u32).["shl"] 1 in
      let* α1 := (cast self.["forward_input"] u32).["bitor"] α0 in
      let* α2 := (cast self.["tail_call"] u32).["shl"] 2 in
      let* α3 := α1.["bitor"] α2 in
      let* α4 := (cast self.["allow_reentry"] u32).["shl"] 3 in
      α3.["bitor"] α4.
    
    Global Instance Method_into_u32 : Notation.Dot "into_u32" := {
      Notation.dot := into_u32;
    }.
    
    Definition forward_input (self : ref Self) : M bool :=
      Pure self.["forward_input"].
    
    Global Instance Method_forward_input : Notation.Dot "forward_input" := {
      Notation.dot := forward_input;
    }.
    
    Definition clone_input (self : ref Self) : M bool :=
      Pure self.["clone_input"].
    
    Global Instance Method_clone_input : Notation.Dot "clone_input" := {
      Notation.dot := clone_input;
    }.
    
    Definition tail_call (self : ref Self) : M bool := Pure self.["tail_call"].
    
    Global Instance Method_tail_call : Notation.Dot "tail_call" := {
      Notation.dot := tail_call;
    }.
    
    Definition allow_reentry (self : ref Self) : M bool :=
      Pure self.["allow_reentry"].
    
    Global Instance Method_allow_reentry : Notation.Dot "allow_reentry" := {
      Notation.dot := allow_reentry;
    }.
  End ImplCallFlags.
  
  Module EnvBackend.
    Class Trait (Self : Set) : Set := {
      set_contract_storage
        :
        (mut_ref Self) -> (ref K) -> (ref V) -> (M (Option u32));
      get_contract_storage
        :
        (mut_ref Self) -> (ref K) -> (M (crate.Result (Option R)));
      take_contract_storage
        :
        (mut_ref Self) -> (ref K) -> (M (crate.Result (Option R)));
      contains_contract_storage : (mut_ref Self) -> (ref K) -> (M (Option u32));
      clear_contract_storage : (mut_ref Self) -> (ref K) -> (M (Option u32));
      decode_input : (mut_ref Self) -> (M (crate.Result T));
      return_value
        :
        (mut_ref Self) -> crate.backend.ReturnFlags -> (ref R) -> (M Empty_set);
      debug_message : (mut_ref Self) -> (ref str) -> (M unit);
      hash_bytes
        :
        (mut_ref Self) -> (ref Slice) -> (mut_ref HashOutput.Type) -> (M unit);
      hash_encoded
        :
        (mut_ref Self) -> (ref T) -> (mut_ref HashOutput.Type) -> (M unit);
      ecdsa_recover
        :
        (mut_ref Self) ->
        (ref list u8) ->
        (ref list u8) ->
        (mut_ref list u8) ->
        (M (crate.Result unit));
      ecdsa_to_eth_address
        :
        (mut_ref Self) ->
        (ref list u8) ->
        (mut_ref list u8) ->
        (M (crate.Result unit));
      call_chain_extension
        :
        (mut_ref Self) ->
        u32 ->
        (ref I) ->
        F ->
        D ->
        (M (Root.core.result.Result T E));
      set_code_hash : (mut_ref Self) -> (ref Slice) -> (M (crate.Result unit));
    }.
    
    Global Instance Method_set_contract_storage `(Trait)
      : Notation.Dot "set_contract_storage" := {
      Notation.dot := set_contract_storage;
    }.
    Global Instance Method_get_contract_storage `(Trait)
      : Notation.Dot "get_contract_storage" := {
      Notation.dot := get_contract_storage;
    }.
    Global Instance Method_take_contract_storage `(Trait)
      : Notation.Dot "take_contract_storage" := {
      Notation.dot := take_contract_storage;
    }.
    Global Instance Method_contains_contract_storage `(Trait)
      : Notation.Dot "contains_contract_storage" := {
      Notation.dot := contains_contract_storage;
    }.
    Global Instance Method_clear_contract_storage `(Trait)
      : Notation.Dot "clear_contract_storage" := {
      Notation.dot := clear_contract_storage;
    }.
    Global Instance Method_decode_input `(Trait)
      : Notation.Dot "decode_input" := {
      Notation.dot := decode_input;
    }.
    Global Instance Method_return_value `(Trait)
      : Notation.Dot "return_value" := {
      Notation.dot := return_value;
    }.
    Global Instance Method_debug_message `(Trait)
      : Notation.Dot "debug_message" := {
      Notation.dot := debug_message;
    }.
    Global Instance Method_hash_bytes `(Trait) : Notation.Dot "hash_bytes" := {
      Notation.dot := hash_bytes;
    }.
    Global Instance Method_hash_encoded `(Trait)
      : Notation.Dot "hash_encoded" := {
      Notation.dot := hash_encoded;
    }.
    Global Instance Method_ecdsa_recover `(Trait)
      : Notation.Dot "ecdsa_recover" := {
      Notation.dot := ecdsa_recover;
    }.
    Global Instance Method_ecdsa_to_eth_address `(Trait)
      : Notation.Dot "ecdsa_to_eth_address" := {
      Notation.dot := ecdsa_to_eth_address;
    }.
    Global Instance Method_call_chain_extension `(Trait)
      : Notation.Dot "call_chain_extension" := {
      Notation.dot := call_chain_extension;
    }.
    Global Instance Method_set_code_hash `(Trait)
      : Notation.Dot "set_code_hash" := {
      Notation.dot := set_code_hash;
    }.
  End EnvBackend.
  
  Module TypedEnvBackend.
    Class Trait (Self : Set) : Set := {
      caller : (mut_ref Self) -> (M ImplE.AccountId);
      transferred_value : (mut_ref Self) -> (M ImplE.Balance);
      weight_to_fee : (mut_ref Self) -> u64 -> (M ImplE.Balance);
      gas_left : (mut_ref Self) -> (M u64);
      block_timestamp : (mut_ref Self) -> (M ImplE.Timestamp);
      account_id : (mut_ref Self) -> (M ImplE.AccountId);
      balance : (mut_ref Self) -> (M ImplE.Balance);
      block_number : (mut_ref Self) -> (M ImplE.BlockNumber);
      minimum_balance : (mut_ref Self) -> (M ImplE.Balance);
      emit_event : (mut_ref Self) -> Event -> (M unit);
      invoke_contract
        :
        (mut_ref Self) ->
        (ref (crate.call.CallParams E (crate.call.Call E) Args R)) ->
        (M (crate.Result (ink_primitives.MessageResult R)));
      invoke_contract_delegate
        :
        (mut_ref Self) ->
        (ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R)) ->
        (M (crate.Result R));
      instantiate_contract
        :
        (mut_ref Self) ->
        (ref (crate.call.CreateParams E ContractRef Args Salt R)) ->
        (M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)));
      terminate_contract : (mut_ref Self) -> ImplE.AccountId -> (M Empty_set);
      transfer
        :
        (mut_ref Self) ->
        ImplE.AccountId ->
        ImplE.Balance ->
        (M (crate.Result unit));
      is_contract : (mut_ref Self) -> (ref ImplE.AccountId) -> (M bool);
      caller_is_origin : (mut_ref Self) -> (M bool);
      code_hash
        :
        (mut_ref Self) ->
        (ref ImplE.AccountId) ->
        (M (crate.Result ImplE.Hash));
      own_code_hash : (mut_ref Self) -> (M (crate.Result ImplE.Hash));
      call_runtime
        :
        (mut_ref Self) -> (ref crate.call.Call) -> (M (crate.Result unit));
    }.
    
    Global Instance Method_caller `(Trait) : Notation.Dot "caller" := {
      Notation.dot := caller;
    }.
    Global Instance Method_transferred_value `(Trait)
      : Notation.Dot "transferred_value" := {
      Notation.dot := transferred_value;
    }.
    Global Instance Method_weight_to_fee `(Trait)
      : Notation.Dot "weight_to_fee" := {
      Notation.dot := weight_to_fee;
    }.
    Global Instance Method_gas_left `(Trait) : Notation.Dot "gas_left" := {
      Notation.dot := gas_left;
    }.
    Global Instance Method_block_timestamp `(Trait)
      : Notation.Dot "block_timestamp" := {
      Notation.dot := block_timestamp;
    }.
    Global Instance Method_account_id `(Trait) : Notation.Dot "account_id" := {
      Notation.dot := account_id;
    }.
    Global Instance Method_balance `(Trait) : Notation.Dot "balance" := {
      Notation.dot := balance;
    }.
    Global Instance Method_block_number `(Trait)
      : Notation.Dot "block_number" := {
      Notation.dot := block_number;
    }.
    Global Instance Method_minimum_balance `(Trait)
      : Notation.Dot "minimum_balance" := {
      Notation.dot := minimum_balance;
    }.
    Global Instance Method_emit_event `(Trait) : Notation.Dot "emit_event" := {
      Notation.dot := emit_event;
    }.
    Global Instance Method_invoke_contract `(Trait)
      : Notation.Dot "invoke_contract" := {
      Notation.dot := invoke_contract;
    }.
    Global Instance Method_invoke_contract_delegate `(Trait)
      : Notation.Dot "invoke_contract_delegate" := {
      Notation.dot := invoke_contract_delegate;
    }.
    Global Instance Method_instantiate_contract `(Trait)
      : Notation.Dot "instantiate_contract" := {
      Notation.dot := instantiate_contract;
    }.
    Global Instance Method_terminate_contract `(Trait)
      : Notation.Dot "terminate_contract" := {
      Notation.dot := terminate_contract;
    }.
    Global Instance Method_transfer `(Trait) : Notation.Dot "transfer" := {
      Notation.dot := transfer;
    }.
    Global Instance Method_is_contract `(Trait)
      : Notation.Dot "is_contract" := {
      Notation.dot := is_contract;
    }.
    Global Instance Method_caller_is_origin `(Trait)
      : Notation.Dot "caller_is_origin" := {
      Notation.dot := caller_is_origin;
    }.
    Global Instance Method_code_hash `(Trait) : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
    Global Instance Method_own_code_hash `(Trait)
      : Notation.Dot "own_code_hash" := {
      Notation.dot := own_code_hash;
    }.
    Global Instance Method_call_runtime `(Trait)
      : Notation.Dot "call_runtime" := {
      Notation.dot := call_runtime;
    }.
  End TypedEnvBackend.
End backend.

Module ReturnFlags.
  Record t : Set := {
    value : u32;
  }.
  
  Global Instance Get_value : Notation.Dot "value" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End ReturnFlags.
Definition ReturnFlags : Set := ReturnFlags.t.

Module Impl__crate_default_Default_for_crate_backend_ReturnFlags.
  Definition Self := crate.backend.ReturnFlags.
  
  Definition default (_ : unit) : M crate.backend.ReturnFlags :=
    let* α0 := _crate.default.Default.default tt in
    Pure {| crate.backend.ReturnFlags.value := α0; |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_crate_backend_ReturnFlags.

Module Implcrate.backend.ReturnFlags_2.
  Definition Self := crate.backend.ReturnFlags.
  
  Definition new_with_reverted (has_reverted : bool) : M Self :=
    let* α0 := Self::["default"] tt in
    α0.["set_reverted"] has_reverted.
  
  Global Instance AssociatedFunction_new_with_reverted :
    Notation.DoubleColon Self "new_with_reverted" := {
    Notation.double_colon := new_with_reverted;
  }.
  
  Definition set_reverted (self : Self) (has_reverted : bool) : M Self :=
    let* _ :=
      match has_reverted with
      | true => self.["value"].["bitor_assign"] (cast has_reverted u32)
      | false =>
        let* α0 := has_reverted.["not"] in
        self.["value"].["bitand_assign"] (cast α0 u32)
      end in
    Pure self.
  
  Global Instance Method_set_reverted : Notation.Dot "set_reverted" := {
    Notation.dot := set_reverted;
  }.
End Implcrate.backend.ReturnFlags_2.

Module CallFlags.
  Record t : Set := {
    forward_input : bool;
    clone_input : bool;
    tail_call : bool;
    allow_reentry : bool;
  }.
  
  Global Instance Get_forward_input : Notation.Dot "forward_input" := {
    Notation.dot '(Build_t x0 _ _ _) := x0;
  }.
  Global Instance Get_clone_input : Notation.Dot "clone_input" := {
    Notation.dot '(Build_t _ x1 _ _) := x1;
  }.
  Global Instance Get_tail_call : Notation.Dot "tail_call" := {
    Notation.dot '(Build_t _ _ x2 _) := x2;
  }.
  Global Instance Get_allow_reentry : Notation.Dot "allow_reentry" := {
    Notation.dot '(Build_t _ _ _ x3) := x3;
  }.
End CallFlags.
Definition CallFlags : Set := CallFlags.t.

Module Impl__crate_marker_Copy_for_CallFlags.
  Definition Self := CallFlags.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_CallFlags.

Module Impl__crate_clone_Clone_for_CallFlags.
  Definition Self := CallFlags.
  
  Definition clone (self : ref Self) : M CallFlags :=
    let _ := tt in
    self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_CallFlags.

Module Impl__crate_fmt_Debug_for_CallFlags.
  Definition Self := CallFlags.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field4_finish"]
      f
      "CallFlags"
      "forward_input"
      (addr_of self.["forward_input"])
      "clone_input"
      (addr_of self.["clone_input"])
      "tail_call"
      (addr_of self.["tail_call"])
      "allow_reentry"
      (addr_of (addr_of self.["allow_reentry"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_CallFlags.

Module Impl__crate_default_Default_for_CallFlags.
  Definition Self := CallFlags.
  
  Definition default (_ : unit) : M CallFlags :=
    let* α0 := _crate.default.Default.default tt in
    let* α1 := _crate.default.Default.default tt in
    let* α2 := _crate.default.Default.default tt in
    let* α3 := _crate.default.Default.default tt in
    Pure
      {|
        CallFlags.forward_input := α0;
        CallFlags.clone_input := α1;
        CallFlags.tail_call := α2;
        CallFlags.allow_reentry := α3;
      |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_CallFlags.

Module ImplCallFlags_2.
  Definition Self := CallFlags.
  
  Definition set_forward_input (self : Self) (forward_input : bool) : M Self :=
    let* _ := assign self.["forward_input"] forward_input in
    Pure self.
  
  Global Instance Method_set_forward_input :
    Notation.Dot "set_forward_input" := {
    Notation.dot := set_forward_input;
  }.
  
  Definition set_clone_input (self : Self) (clone_input : bool) : M Self :=
    let* _ := assign self.["clone_input"] clone_input in
    Pure self.
  
  Global Instance Method_set_clone_input : Notation.Dot "set_clone_input" := {
    Notation.dot := set_clone_input;
  }.
  
  Definition set_tail_call (self : Self) (tail_call : bool) : M Self :=
    let* _ := assign self.["tail_call"] tail_call in
    Pure self.
  
  Global Instance Method_set_tail_call : Notation.Dot "set_tail_call" := {
    Notation.dot := set_tail_call;
  }.
  
  Definition set_allow_reentry (self : Self) (allow_reentry : bool) : M Self :=
    let* _ := assign self.["allow_reentry"] allow_reentry in
    Pure self.
  
  Global Instance Method_set_allow_reentry :
    Notation.Dot "set_allow_reentry" := {
    Notation.dot := set_allow_reentry;
  }.
  
  Definition into_u32 (self : Self) : M u32 :=
    let* α0 := (cast self.["clone_input"] u32).["shl"] 1 in
    let* α1 := (cast self.["forward_input"] u32).["bitor"] α0 in
    let* α2 := (cast self.["tail_call"] u32).["shl"] 2 in
    let* α3 := α1.["bitor"] α2 in
    let* α4 := (cast self.["allow_reentry"] u32).["shl"] 3 in
    α3.["bitor"] α4.
  
  Global Instance Method_into_u32 : Notation.Dot "into_u32" := {
    Notation.dot := into_u32;
  }.
  
  Definition forward_input (self : ref Self) : M bool :=
    Pure self.["forward_input"].
  
  Global Instance Method_forward_input : Notation.Dot "forward_input" := {
    Notation.dot := forward_input;
  }.
  
  Definition clone_input (self : ref Self) : M bool :=
    Pure self.["clone_input"].
  
  Global Instance Method_clone_input : Notation.Dot "clone_input" := {
    Notation.dot := clone_input;
  }.
  
  Definition tail_call (self : ref Self) : M bool := Pure self.["tail_call"].
  
  Global Instance Method_tail_call : Notation.Dot "tail_call" := {
    Notation.dot := tail_call;
  }.
  
  Definition allow_reentry (self : ref Self) : M bool :=
    Pure self.["allow_reentry"].
  
  Global Instance Method_allow_reentry : Notation.Dot "allow_reentry" := {
    Notation.dot := allow_reentry;
  }.
End ImplCallFlags_2.

Module EnvBackend.
  Class Trait (Self : Set) : Set := {
    set_contract_storage
      :
      (mut_ref Self) -> (ref K) -> (ref V) -> (M (Option u32));
    get_contract_storage
      :
      (mut_ref Self) -> (ref K) -> (M (crate.Result (Option R)));
    take_contract_storage
      :
      (mut_ref Self) -> (ref K) -> (M (crate.Result (Option R)));
    contains_contract_storage : (mut_ref Self) -> (ref K) -> (M (Option u32));
    clear_contract_storage : (mut_ref Self) -> (ref K) -> (M (Option u32));
    decode_input : (mut_ref Self) -> (M (crate.Result T));
    return_value
      :
      (mut_ref Self) -> crate.backend.ReturnFlags -> (ref R) -> (M Empty_set);
    debug_message : (mut_ref Self) -> (ref str) -> (M unit);
    hash_bytes
      :
      (mut_ref Self) -> (ref Slice) -> (mut_ref HashOutput.Type) -> (M unit);
    hash_encoded
      :
      (mut_ref Self) -> (ref T) -> (mut_ref HashOutput.Type) -> (M unit);
    ecdsa_recover
      :
      (mut_ref Self) ->
      (ref list u8) ->
      (ref list u8) ->
      (mut_ref list u8) ->
      (M (crate.Result unit));
    ecdsa_to_eth_address
      :
      (mut_ref Self) ->
      (ref list u8) ->
      (mut_ref list u8) ->
      (M (crate.Result unit));
    call_chain_extension
      :
      (mut_ref Self) ->
      u32 ->
      (ref I) ->
      F ->
      D ->
      (M (Root.core.result.Result T E));
    set_code_hash : (mut_ref Self) -> (ref Slice) -> (M (crate.Result unit));
  }.
  
  Global Instance Method_set_contract_storage `(Trait)
    : Notation.Dot "set_contract_storage" := {
    Notation.dot := set_contract_storage;
  }.
  Global Instance Method_get_contract_storage `(Trait)
    : Notation.Dot "get_contract_storage" := {
    Notation.dot := get_contract_storage;
  }.
  Global Instance Method_take_contract_storage `(Trait)
    : Notation.Dot "take_contract_storage" := {
    Notation.dot := take_contract_storage;
  }.
  Global Instance Method_contains_contract_storage `(Trait)
    : Notation.Dot "contains_contract_storage" := {
    Notation.dot := contains_contract_storage;
  }.
  Global Instance Method_clear_contract_storage `(Trait)
    : Notation.Dot "clear_contract_storage" := {
    Notation.dot := clear_contract_storage;
  }.
  Global Instance Method_decode_input `(Trait)
    : Notation.Dot "decode_input" := {
    Notation.dot := decode_input;
  }.
  Global Instance Method_return_value `(Trait)
    : Notation.Dot "return_value" := {
    Notation.dot := return_value;
  }.
  Global Instance Method_debug_message `(Trait)
    : Notation.Dot "debug_message" := {
    Notation.dot := debug_message;
  }.
  Global Instance Method_hash_bytes `(Trait) : Notation.Dot "hash_bytes" := {
    Notation.dot := hash_bytes;
  }.
  Global Instance Method_hash_encoded `(Trait)
    : Notation.Dot "hash_encoded" := {
    Notation.dot := hash_encoded;
  }.
  Global Instance Method_ecdsa_recover `(Trait)
    : Notation.Dot "ecdsa_recover" := {
    Notation.dot := ecdsa_recover;
  }.
  Global Instance Method_ecdsa_to_eth_address `(Trait)
    : Notation.Dot "ecdsa_to_eth_address" := {
    Notation.dot := ecdsa_to_eth_address;
  }.
  Global Instance Method_call_chain_extension `(Trait)
    : Notation.Dot "call_chain_extension" := {
    Notation.dot := call_chain_extension;
  }.
  Global Instance Method_set_code_hash `(Trait)
    : Notation.Dot "set_code_hash" := {
    Notation.dot := set_code_hash;
  }.
End EnvBackend.

Module TypedEnvBackend.
  Class Trait (Self : Set) : Set := {
    caller : (mut_ref Self) -> (M ImplE.AccountId);
    transferred_value : (mut_ref Self) -> (M ImplE.Balance);
    weight_to_fee : (mut_ref Self) -> u64 -> (M ImplE.Balance);
    gas_left : (mut_ref Self) -> (M u64);
    block_timestamp : (mut_ref Self) -> (M ImplE.Timestamp);
    account_id : (mut_ref Self) -> (M ImplE.AccountId);
    balance : (mut_ref Self) -> (M ImplE.Balance);
    block_number : (mut_ref Self) -> (M ImplE.BlockNumber);
    minimum_balance : (mut_ref Self) -> (M ImplE.Balance);
    emit_event : (mut_ref Self) -> Event -> (M unit);
    invoke_contract
      :
      (mut_ref Self) ->
      (ref (crate.call.CallParams E (crate.call.Call E) Args R)) ->
      (M (crate.Result (ink_primitives.MessageResult R)));
    invoke_contract_delegate
      :
      (mut_ref Self) ->
      (ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R)) ->
      (M (crate.Result R));
    instantiate_contract
      :
      (mut_ref Self) ->
      (ref (crate.call.CreateParams E ContractRef Args Salt R)) ->
      (M
        (crate.Result
          (ink_primitives.ConstructorResult ConstructorReturnType.Output)));
    terminate_contract : (mut_ref Self) -> ImplE.AccountId -> (M Empty_set);
    transfer
      :
      (mut_ref Self) ->
      ImplE.AccountId ->
      ImplE.Balance ->
      (M (crate.Result unit));
    is_contract : (mut_ref Self) -> (ref ImplE.AccountId) -> (M bool);
    caller_is_origin : (mut_ref Self) -> (M bool);
    code_hash
      :
      (mut_ref Self) -> (ref ImplE.AccountId) -> (M (crate.Result ImplE.Hash));
    own_code_hash : (mut_ref Self) -> (M (crate.Result ImplE.Hash));
    call_runtime
      :
      (mut_ref Self) -> (ref crate.call.Call) -> (M (crate.Result unit));
  }.
  
  Global Instance Method_caller `(Trait) : Notation.Dot "caller" := {
    Notation.dot := caller;
  }.
  Global Instance Method_transferred_value `(Trait)
    : Notation.Dot "transferred_value" := {
    Notation.dot := transferred_value;
  }.
  Global Instance Method_weight_to_fee `(Trait)
    : Notation.Dot "weight_to_fee" := {
    Notation.dot := weight_to_fee;
  }.
  Global Instance Method_gas_left `(Trait) : Notation.Dot "gas_left" := {
    Notation.dot := gas_left;
  }.
  Global Instance Method_block_timestamp `(Trait)
    : Notation.Dot "block_timestamp" := {
    Notation.dot := block_timestamp;
  }.
  Global Instance Method_account_id `(Trait) : Notation.Dot "account_id" := {
    Notation.dot := account_id;
  }.
  Global Instance Method_balance `(Trait) : Notation.Dot "balance" := {
    Notation.dot := balance;
  }.
  Global Instance Method_block_number `(Trait)
    : Notation.Dot "block_number" := {
    Notation.dot := block_number;
  }.
  Global Instance Method_minimum_balance `(Trait)
    : Notation.Dot "minimum_balance" := {
    Notation.dot := minimum_balance;
  }.
  Global Instance Method_emit_event `(Trait) : Notation.Dot "emit_event" := {
    Notation.dot := emit_event;
  }.
  Global Instance Method_invoke_contract `(Trait)
    : Notation.Dot "invoke_contract" := {
    Notation.dot := invoke_contract;
  }.
  Global Instance Method_invoke_contract_delegate `(Trait)
    : Notation.Dot "invoke_contract_delegate" := {
    Notation.dot := invoke_contract_delegate;
  }.
  Global Instance Method_instantiate_contract `(Trait)
    : Notation.Dot "instantiate_contract" := {
    Notation.dot := instantiate_contract;
  }.
  Global Instance Method_terminate_contract `(Trait)
    : Notation.Dot "terminate_contract" := {
    Notation.dot := terminate_contract;
  }.
  Global Instance Method_transfer `(Trait) : Notation.Dot "transfer" := {
    Notation.dot := transfer;
  }.
  Global Instance Method_is_contract `(Trait) : Notation.Dot "is_contract" := {
    Notation.dot := is_contract;
  }.
  Global Instance Method_caller_is_origin `(Trait)
    : Notation.Dot "caller_is_origin" := {
    Notation.dot := caller_is_origin;
  }.
  Global Instance Method_code_hash `(Trait) : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
  Global Instance Method_own_code_hash `(Trait)
    : Notation.Dot "own_code_hash" := {
    Notation.dot := own_code_hash;
  }.
  Global Instance Method_call_runtime `(Trait)
    : Notation.Dot "call_runtime" := {
    Notation.dot := call_runtime;
  }.
End TypedEnvBackend.

Module call.
  Module call_builder.
    Module CallParams.
      Record t : Set := {
        call_type : CallType;
        call_flags : crate.backend.CallFlags;
        _return_type : crate.call.utils.ReturnType R;
        exec_input : crate.call.ExecutionInput Args;
        _phantom : core.marker.PhantomData ( -> E);
      }.
      
      Global Instance Get_call_type : Notation.Dot "call_type" := {
        Notation.dot '(Build_t x0 _ _ _ _) := x0;
      }.
      Global Instance Get_call_flags : Notation.Dot "call_flags" := {
        Notation.dot '(Build_t _ x1 _ _ _) := x1;
      }.
      Global Instance Get__return_type : Notation.Dot "_return_type" := {
        Notation.dot '(Build_t _ _ x2 _ _) := x2;
      }.
      Global Instance Get_exec_input : Notation.Dot "exec_input" := {
        Notation.dot '(Build_t _ _ _ x3 _) := x3;
      }.
      Global Instance Get__phantom : Notation.Dot "_phantom" := {
        Notation.dot '(Build_t _ _ _ _ x4) := x4;
      }.
    End CallParams.
    Definition CallParams : Set := CallParams.t.
    
    Module Impl__crate_fmt_Debug_for_crate_call_CallParams_E_CallType_Args_R.
      Definition Self := crate.call.CallParams E CallType Args R.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field5_finish"]
          f
          "CallParams"
          "call_type"
          (addr_of self.["call_type"])
          "call_flags"
          (addr_of self.["call_flags"])
          "_return_type"
          (addr_of self.["_return_type"])
          "exec_input"
          (addr_of self.["exec_input"])
          "_phantom"
          (addr_of (addr_of self.["_phantom"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I E CallType Args R : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_CallParams_E_CallType_Args_R.
    
    Module Implcrate.call.CallParams E CallType Args R.
      Definition Self := crate.call.CallParams E CallType Args R.
      
      Definition call_flags
          (self : ref Self)
          : M (ref crate.backend.CallFlags) :=
        Pure (addr_of self.["call_flags"]).
      
      Global Instance Method_call_flags : Notation.Dot "call_flags" := {
        Notation.dot := call_flags;
      }.
      
      Definition exec_input
          (self : ref Self)
          : M (ref (crate.call.ExecutionInput Args)) :=
        Pure (addr_of self.["exec_input"]).
      
      Global Instance Method_exec_input : Notation.Dot "exec_input" := {
        Notation.dot := exec_input;
      }.
    End Implcrate.call.CallParams E CallType Args R.
    
    Module Implcrate.call.CallParams E (crate.call.Call E) Args R.
      Definition Self := crate.call.CallParams E (crate.call.Call E) Args R.
      
      Definition callee (self : ref Self) : M (ref ImplE.AccountId) :=
        Pure (addr_of self.["call_type"].["callee"]).
      
      Global Instance Method_callee : Notation.Dot "callee" := {
        Notation.dot := callee;
      }.
      
      Definition gas_limit (self : ref Self) : M crate.types.Gas :=
        Pure self.["call_type"].["gas_limit"].
      
      Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot := gas_limit;
      }.
      
      Definition transferred_value (self : ref Self) : M (ref ImplE.Balance) :=
        Pure (addr_of self.["call_type"].["transferred_value"]).
      
      Global Instance Method_transferred_value :
        Notation.Dot "transferred_value" := {
        Notation.dot := transferred_value;
      }.
    End Implcrate.call.CallParams E (crate.call.Call E) Args R.
    
    Module Implcrate.call.CallParams E (crate.call.DelegateCall E) Args R.
      Definition
        Self
        :=
        crate.call.CallParams E (crate.call.DelegateCall E) Args R.
      
      Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
        Pure (addr_of self.["call_type"].["code_hash"]).
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
    End Implcrate.call.CallParams E (crate.call.DelegateCall E) Args R.
    
    Module Implcrate.call.CallParams E (crate.call.Call E) Args R_2.
      Definition Self := crate.call.CallParams E (crate.call.Call E) Args R.
      
      Definition invoke (self : ref Self) : M R :=
        let* α0 := crate.invoke_contract self in
        let* α1 :=
          α0.["unwrap_or_else"]
            (fun env_error =>
              let* α0 := format_argument::["new_debug"] (addr_of env_error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "Cross-contract call failed with " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        α1.["unwrap_or_else"]
          (fun lang_error =>
            let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Cross-contract call failed with " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke
          (self : ref Self)
          : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
        crate.invoke_contract self.
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End Implcrate.call.CallParams E (crate.call.Call E) Args R_2.
    
    Module Implcrate.call.CallParams E (crate.call.DelegateCall E) Args R_2.
      Definition
        Self
        :=
        crate.call.CallParams E (crate.call.DelegateCall E) Args R.
      
      Definition invoke (self : ref Self) : M R :=
        let* α0 := crate.invoke_contract_delegate self in
        α0.["unwrap_or_else"]
          (fun env_error =>
            let* α0 := format_argument::["new_debug"] (addr_of env_error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Cross-contract call failed with " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke
          (self : ref Self)
          : M (crate.Result R crate.Error) :=
        crate.invoke_contract_delegate self.
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End Implcrate.call.CallParams E (crate.call.DelegateCall E) Args R_2.
    
    Definition build_call
        {E : Set}
        `{Environment.Trait E}
        (_ : unit)
        :
          M
            (CallBuilder
              E
              (crate.call.utils.Unset (crate.call.Call E))
              (crate.call.utils.Unset
                (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
              (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
      let* α0 := Default.default tt in
      let* α1 := Default.default tt in
      let* α2 := Default.default tt in
      let* α3 := Default.default tt in
      let* α4 := Default.default tt in
      Pure
        {|
          CallBuilder.call_type := α0;
          CallBuilder.call_flags := α1;
          CallBuilder.exec_input := α2;
          CallBuilder.return_type := α3;
          CallBuilder._phantom := α4;
        |}.
    
    Module Call.
      Record t : Set := {
        callee : ImplE.AccountId;
        gas_limit : crate.types.Gas;
        transferred_value : ImplE.Balance;
      }.
      
      Global Instance Get_callee : Notation.Dot "callee" := {
        Notation.dot '(Build_t x0 _ _) := x0;
      }.
      Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot '(Build_t _ x1 _) := x1;
      }.
      Global Instance Get_transferred_value :
          Notation.Dot "transferred_value" := {
        Notation.dot '(Build_t _ _ x2) := x2;
      }.
    End Call.
    Definition Call : Set := Call.t.
    
    Module Impl__crate_clone_Clone_for_crate_call_Call_E.
      Definition Self := crate.call.Call E.
      
      Definition clone (self : ref Self) : M (crate.call.Call E) :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["callee"]) in
        let* α1 := _crate.clone.Clone.clone (addr_of self.["gas_limit"]) in
        let* α2 :=
          _crate.clone.Clone.clone (addr_of self.["transferred_value"]) in
        Pure
          {|
            crate.call.Call.callee := α0;
            crate.call.Call.gas_limit := α1;
            crate.call.Call.transferred_value := α2;
          |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I E : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_crate_call_Call_E.
    
    Module Implcrate.call.Call E.
      Definition Self := crate.call.Call E.
      
      Definition new (callee : ImplE.AccountId) : M Self :=
        let* α0 := Default.default tt in
        let* α1 := ImplE.Balance::["zero"] tt in
        Pure
          {|
            Self.callee := callee;
            Self.gas_limit := α0;
            Self.transferred_value := α1;
          |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
    End Implcrate.call.Call E.
    
    Module Implcrate.call.Call E_2.
      Definition Self := crate.call.Call E.
      
      Definition gas_limit
          (self : Self)
          (gas_limit : crate.types.Gas)
          : M Self :=
        Pure
          {|
            crate.call.Call.callee := self.["callee"];
            crate.call.Call.gas_limit := gas_limit;
            crate.call.Call.transferred_value := self.["transferred_value"];
          |}.
      
      Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot := gas_limit;
      }.
      
      Definition transferred_value
          (self : Self)
          (transferred_value : ImplE.Balance)
          : M Self :=
        Pure
          {|
            crate.call.Call.callee := self.["callee"];
            crate.call.Call.gas_limit := self.["gas_limit"];
            crate.call.Call.transferred_value := transferred_value;
          |}.
      
      Global Instance Method_transferred_value :
        Notation.Dot "transferred_value" := {
        Notation.dot := transferred_value;
      }.
    End Implcrate.call.Call E_2.
    
    Module DelegateCall.
      Record t : Set := {
        code_hash : ImplE.Hash;
      }.
      
      Global Instance Get_code_hash : Notation.Dot "code_hash" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End DelegateCall.
    Definition DelegateCall : Set := DelegateCall.t.
    
    Module Implcrate.call.DelegateCall E.
      Definition Self := crate.call.DelegateCall E.
      
      Definition new (code_hash : ImplE.Hash) : M Self :=
        Pure {| crate.call.DelegateCall.code_hash := code_hash; |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
    End Implcrate.call.DelegateCall E.
    
    Module Implcrate.call.DelegateCall E_2.
      Definition Self := crate.call.DelegateCall E.
      
      Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
        Pure {| crate.call.DelegateCall.code_hash := code_hash; |}.
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
    End Implcrate.call.DelegateCall E_2.
    
    Module CallBuilder.
      Record t : Set := {
        call_type : CallType;
        call_flags : crate.backend.CallFlags;
        exec_input : Args;
        return_type : RetType;
        _phantom : core.marker.PhantomData ( -> E);
      }.
      
      Global Instance Get_call_type : Notation.Dot "call_type" := {
        Notation.dot '(Build_t x0 _ _ _ _) := x0;
      }.
      Global Instance Get_call_flags : Notation.Dot "call_flags" := {
        Notation.dot '(Build_t _ x1 _ _ _) := x1;
      }.
      Global Instance Get_exec_input : Notation.Dot "exec_input" := {
        Notation.dot '(Build_t _ _ x2 _ _) := x2;
      }.
      Global Instance Get_return_type : Notation.Dot "return_type" := {
        Notation.dot '(Build_t _ _ _ x3 _) := x3;
      }.
      Global Instance Get__phantom : Notation.Dot "_phantom" := {
        Notation.dot '(Build_t _ _ _ _ x4) := x4;
      }.
    End CallBuilder.
    Definition CallBuilder : Set := CallBuilder.t.
    
    Module Impl__crate_clone_Clone_for_CallBuilder_E_CallType_Args_RetType.
      Definition Self := CallBuilder E CallType Args RetType.
      
      Definition clone
          (self : ref Self)
          : M (CallBuilder E CallType Args RetType) :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["call_type"]) in
        let* α1 := _crate.clone.Clone.clone (addr_of self.["call_flags"]) in
        let* α2 := _crate.clone.Clone.clone (addr_of self.["exec_input"]) in
        let* α3 := _crate.clone.Clone.clone (addr_of self.["return_type"]) in
        let* α4 := _crate.clone.Clone.clone (addr_of self.["_phantom"]) in
        Pure
          {|
            CallBuilder.call_type := α0;
            CallBuilder.call_flags := α1;
            CallBuilder.exec_input := α2;
            CallBuilder.return_type := α3;
            CallBuilder._phantom := α4;
          |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I
          E
          CallType
          Args
          RetType
          :
          _crate.clone.Clone.Trait
          Self :=
        {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_CallBuilder_E_CallType_Args_RetType.
    
    Module ImplCallBuilder E (crate.call.utils.Unset CallType) Args RetType.
      Definition
        Self
        :=
        CallBuilder E (crate.call.utils.Unset CallType) Args RetType.
      
      Definition call_type
          (self : Self)
          (call_type : NewCallType)
          : M (CallBuilder E (crate.call.utils.Set NewCallType) Args RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := crate.call.utils.Set.Build_t call_type;
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_call_type : Notation.Dot "call_type" := {
        Notation.dot := call_type;
      }.
    End ImplCallBuilder E (crate.call.utils.Unset CallType) Args RetType.
    
    Module ImplCallBuilder E CallType Args RetType.
      Definition Self := CallBuilder E CallType Args RetType.
      
      Definition call_flags
          (self : Self)
          (call_flags : crate.backend.CallFlags)
          : M (CallBuilder E CallType Args RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := self.["call_type"];
            CallBuilder.call_flags := call_flags;
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_call_flags : Notation.Dot "call_flags" := {
        Notation.dot := call_flags;
      }.
    End ImplCallBuilder E CallType Args RetType.
    
    Module
      ImplCallBuilder
        E
        CallType
        Args
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      Definition
        Self
        :=
        CallBuilder
          E
          CallType
          Args
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      
      Definition returns
          (self : Self)
          :
            M
              (CallBuilder
                E
                CallType
                Args
                (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
        let* α0 := Default.default tt in
        let* α1 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := self.["call_type"];
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := crate.call.utils.Set.Build_t α0;
            CallBuilder._phantom := α1;
          |}.
      
      Global Instance Method_returns : Notation.Dot "returns" := {
        Notation.dot := returns;
      }.
    End
      ImplCallBuilder
        E
        CallType
        Args
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Module
      ImplCallBuilder
        E
        CallType
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        RetType.
      Definition
        Self
        :=
        CallBuilder
          E
          CallType
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          RetType.
      
      Definition exec_input
          (self : Self)
          (exec_input : crate.call.ExecutionInput Args)
          :
            M
              (CallBuilder
                E
                CallType
                (crate.call.utils.Set (crate.call.ExecutionInput Args))
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := self.["call_type"];
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := crate.call.utils.Set.Build_t exec_input;
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_exec_input : Notation.Dot "exec_input" := {
        Notation.dot := exec_input;
      }.
    End
      ImplCallBuilder
        E
        CallType
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        RetType.
    
    Module ImplCallBuilder E (crate.call.utils.Unset CallType) Args RetType_2.
      Definition
        Self
        :=
        CallBuilder E (crate.call.utils.Unset CallType) Args RetType.
      
      Definition call
          (self : Self)
          (callee : ImplE.AccountId)
          :
            M
              (CallBuilder
                E
                (crate.call.utils.Set (crate.call.Call E))
                Args
                RetType) :=
        let* α0 := crate.call.Call::["new"] callee in
        let* α1 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := crate.call.utils.Set.Build_t α0;
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α1;
          |}.
      
      Global Instance Method_call : Notation.Dot "call" := {
        Notation.dot := call;
      }.
      
      Definition delegate
          (self : Self)
          (code_hash : ImplE.Hash)
          :
            M
              (CallBuilder
                E
                (crate.call.utils.Set (crate.call.DelegateCall E))
                Args
                RetType) :=
        let* α0 := crate.call.DelegateCall::["new"] code_hash in
        let* α1 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type := crate.call.utils.Set.Build_t α0;
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α1;
          |}.
      
      Global Instance Method_delegate : Notation.Dot "delegate" := {
        Notation.dot := delegate;
      }.
    End ImplCallBuilder E (crate.call.utils.Unset CallType) Args RetType_2.
    
    Module
      ImplCallBuilder E (crate.call.utils.Set (crate.call.Call E)) Args RetType.
      Definition
        Self
        :=
        CallBuilder E (crate.call.utils.Set (crate.call.Call E)) Args RetType.
      
      Definition gas_limit
          (self : Self)
          (gas_limit : crate.types.Gas)
          : M Self :=
        let* call_type := self.["call_type"].["value"] in
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type :=
              crate.call.utils.Set.Build_t
                {|
                  crate.call.Call.callee := call_type.["callee"];
                  crate.call.Call.gas_limit := gas_limit;
                  crate.call.Call.transferred_value :=
                    call_type.["transferred_value"];
                |};
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot := gas_limit;
      }.
      
      Definition transferred_value
          (self : Self)
          (transferred_value : ImplE.Balance)
          : M Self :=
        let* call_type := self.["call_type"].["value"] in
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type :=
              crate.call.utils.Set.Build_t
                {|
                  crate.call.Call.callee := call_type.["callee"];
                  crate.call.Call.gas_limit := call_type.["gas_limit"];
                  crate.call.Call.transferred_value := transferred_value;
                |};
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_transferred_value :
        Notation.Dot "transferred_value" := {
        Notation.dot := transferred_value;
      }.
    End
      ImplCallBuilder E (crate.call.utils.Set (crate.call.Call E)) Args RetType.
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        Args
        RetType.
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.DelegateCall E))
          Args
          RetType.
      
      Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
        let* α0 := Default.default tt in
        Pure
          {|
            CallBuilder.call_type :=
              crate.call.utils.Set.Build_t
                {| crate.call.DelegateCall.code_hash := code_hash; |};
            CallBuilder.call_flags := self.["call_flags"];
            CallBuilder.exec_input := self.["exec_input"];
            CallBuilder.return_type := self.["return_type"];
            CallBuilder._phantom := α0;
          |}.
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        Args
        RetType.
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.Call E))
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      
      Definition params
          (self : Self)
          : M (crate.call.CallParams E (crate.call.Call E) Args RetType) :=
        let* α0 := self.["call_type"].["value"] in
        let* α1 := Default.default tt in
        let* α2 := self.["exec_input"].["value"] in
        Pure
          {|
            crate.call.CallParams.call_type := α0;
            crate.call.CallParams.call_flags := self.["call_flags"];
            crate.call.CallParams._return_type := α1;
            crate.call.CallParams.exec_input := α2;
            crate.call.CallParams._phantom := self.["_phantom"];
          |}.
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.DelegateCall E))
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      
      Definition params
          (self : Self)
          :
            M
              (crate.call.CallParams
                E
                (crate.call.DelegateCall E)
                Args
                RetType) :=
        let* α0 := self.["call_type"].["value"] in
        let* α1 := Default.default tt in
        let* α2 := self.["exec_input"].["value"] in
        Pure
          {|
            crate.call.CallParams.call_type := α0;
            crate.call.CallParams.call_flags := self.["call_flags"];
            crate.call.CallParams._return_type := α1;
            crate.call.CallParams.exec_input := α2;
            crate.call.CallParams._phantom := self.["_phantom"];
          |}.
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.Call E))
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset RetType).
      
      Definition params
          (self : Self)
          :
            M
              (crate.call.CallParams
                E
                (crate.call.Call E)
                crate.call.utils.EmptyArgumentList
                unit) :=
        let* α0 := self.["call_type"].["value"] in
        let* α1 := Default.default tt in
        let* α2 := Default.default tt in
        Pure
          {|
            crate.call.CallParams.call_type := α0;
            crate.call.CallParams.call_flags := self.["call_flags"];
            crate.call.CallParams._return_type := α1;
            crate.call.CallParams.exec_input := α2;
            crate.call.CallParams._phantom := self.["_phantom"];
          |}.
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.DelegateCall E))
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset RetType).
      
      Definition params
          (self : Self)
          :
            M
              (crate.call.CallParams
                E
                (crate.call.DelegateCall E)
                crate.call.utils.EmptyArgumentList
                unit) :=
        let* α0 := self.["call_type"].["value"] in
        let* α1 := Default.default tt in
        let* α2 := Default.default tt in
        Pure
          {|
            crate.call.CallParams.call_type := α0;
            crate.call.CallParams.call_flags := self.["call_flags"];
            crate.call.CallParams._return_type := α1;
            crate.call.CallParams.exec_input := α2;
            crate.call.CallParams._phantom := self.["_phantom"];
          |}.
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.Call E))
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      
      Definition invoke (self : Self) : M unit :=
        let* α0 := self.["params"] in
        α0.["invoke"].
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke
          (self : Self)
          : M (crate.Result (ink_primitives.MessageResult unit) crate.Error) :=
        let* α0 := self.["params"] in
        α0.["try_invoke"].
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.DelegateCall E))
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      
      Definition invoke (self : Self) : M unit :=
        let* α0 := self.["params"] in
        α0.["invoke"].
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke (self : Self) : M (crate.Result unit crate.Error) :=
        let* α0 := self.["params"] in
        α0.["try_invoke"].
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.Call E))
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set (crate.call.utils.ReturnType R)).
      
      Definition invoke (self : Self) : M R :=
        let* α0 := self.["params"] in
        α0.["invoke"].
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke
          (self : Self)
          : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
        let* α0 := self.["params"] in
        α0.["try_invoke"].
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
    
    Module
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
      Definition
        Self
        :=
        CallBuilder
          E
          (crate.call.utils.Set (crate.call.DelegateCall E))
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set (crate.call.utils.ReturnType R)).
      
      Definition invoke (self : Self) : M R :=
        let* α0 := self.["params"] in
        α0.["invoke"].
      
      Global Instance Method_invoke : Notation.Dot "invoke" := {
        Notation.dot := invoke;
      }.
      
      Definition try_invoke (self : Self) : M (crate.Result R crate.Error) :=
        let* α0 := self.["params"] in
        α0.["try_invoke"].
      
      Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
        Notation.dot := try_invoke;
      }.
    End
      ImplCallBuilder
        E
        (crate.call.utils.Set (crate.call.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
  End call_builder.
  
  Module common.
    Module ReturnType.
      Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
      
      Global Instance Get_0 : Notation.Dot 0 := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End ReturnType.
    Definition ReturnType := ReturnType.t.
    
    Module Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.
      Definition Self := crate.call.utils.ReturnType T.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "ReturnType"
          (addr_of (addr_of (self.[0]))).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I T : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.
    
    Module Impl_Clone_for_crate_call_utils_ReturnType_T.
      Definition Self := crate.call.utils.ReturnType T.
      
      Definition clone (self : ref Self) : M Self :=
        let* α0 := Default.default tt in
        Self α0.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I T : Clone.Trait Self := {
        Clone.clone := clone;
      }.
    End Impl_Clone_for_crate_call_utils_ReturnType_T.
    
    Module Impl_Copy_for_crate_call_utils_ReturnType_T.
      Definition Self := crate.call.utils.ReturnType T.
      
      Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
    End Impl_Copy_for_crate_call_utils_ReturnType_T.
    
    Module Impl_Default_for_crate_call_utils_ReturnType_T.
      Definition Self := crate.call.utils.ReturnType T.
      
      Definition default (_ : unit) : M Self :=
        let* α0 := Default.default tt in
        Self α0.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I T : Default.Trait Self := {
        Default.default := default;
      }.
    End Impl_Default_for_crate_call_utils_ReturnType_T.
    
    Module Set.
      Record t : Set := { _ : T;}.
      
      Global Instance Get_0 : Notation.Dot 0 := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End Set.
    Definition Set := Set.t.
    
    Module Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.
      Definition Self := crate.call.utils.Set T.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "Set"
          (addr_of (addr_of (self.[0]))).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I T : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.
    
    Module Impl__crate_marker_Copy_for_crate_call_utils_Set_T.
      Definition Self := crate.call.utils.Set T.
      
      Global Instance I T : _crate.marker.Copy.Trait Self :=
        _crate.marker.Copy.Build_Class _.
    End Impl__crate_marker_Copy_for_crate_call_utils_Set_T.
    
    Module Impl__crate_clone_Clone_for_crate_call_utils_Set_T.
      Definition Self := crate.call.utils.Set T.
      
      Definition clone (self : ref Self) : M (crate.call.utils.Set T) :=
        let* α0 := _crate.clone.Clone.clone (addr_of (self.[0])) in
        Pure (crate.call.utils.Set.Build_t α0).
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I T : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_crate_call_utils_Set_T.
    
    Module Implcrate.call.utils.Set T.
      Definition Self := crate.call.utils.Set T.
      
      Definition value (self : Self) : M T := Pure (self.[0]).
      
      Global Instance Method_value : Notation.Dot "value" := {
        Notation.dot := value;
      }.
    End Implcrate.call.utils.Set T.
    
    Module Unset.
      Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
      
      Global Instance Get_0 : Notation.Dot 0 := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End Unset.
    Definition Unset := Unset.t.
    
    Module Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.
      Definition Self := crate.call.utils.Unset T.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "Unset"
          (addr_of (addr_of (self.[0]))).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I T : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.
    
    Module Impl_Clone_for_crate_call_utils_Unset_T.
      Definition Self := crate.call.utils.Unset T.
      
      Definition clone (self : ref Self) : M Self :=
        let* α0 := Default.default tt in
        Self α0.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I T : Clone.Trait Self := {
        Clone.clone := clone;
      }.
    End Impl_Clone_for_crate_call_utils_Unset_T.
    
    Module Impl_Copy_for_crate_call_utils_Unset_T.
      Definition Self := crate.call.utils.Unset T.
      
      Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
    End Impl_Copy_for_crate_call_utils_Unset_T.
    
    Module Impl_Default_for_crate_call_utils_Unset_T.
      Definition Self := crate.call.utils.Unset T.
      
      Definition default (_ : unit) : M Self :=
        let* α0 := Default.default tt in
        Self α0.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I T : Default.Trait Self := {
        Default.default := default;
      }.
    End Impl_Default_for_crate_call_utils_Unset_T.
    
    Module Unwrap.
      Class Trait (Self : Set) : Set := {
        Output : Set;
        unwrap_or_else : Self -> F -> (M ImplSelf.Output);
      }.
      
      Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
        Notation.dot := Output;
      }.
      Global Instance Method_unwrap_or_else `(Trait)
        : Notation.Dot "unwrap_or_else" := {
        Notation.dot := unwrap_or_else;
      }.
    End Unwrap.
    
    Module Impl_Unwrap_for_crate_call_utils_Unset_T.
      Definition Self := crate.call.utils.Unset T.
      
      Definition Output : Set := T.
      
      Definition unwrap_or_else (self : Self) (f : F) : M ImplSelf.Output :=
        f tt.
      
      Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
        Notation.dot := unwrap_or_else;
      }.
      
      Global Instance I T : Unwrap.Trait Self := {
        Unwrap.unwrap_or_else := unwrap_or_else;
      }.
    End Impl_Unwrap_for_crate_call_utils_Unset_T.
    
    Module Impl_Unwrap_for_crate_call_utils_Set_T.
      Definition Self := crate.call.utils.Set T.
      
      Definition Output : Set := T.
      
      Definition unwrap_or_else
          (self : Self)
          (Pattern : F)
          : M ImplSelf.Output :=
        self.["value"].
      
      Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
        Notation.dot := unwrap_or_else;
      }.
      
      Global Instance I T : Unwrap.Trait Self := {
        Unwrap.unwrap_or_else := unwrap_or_else;
      }.
    End Impl_Unwrap_for_crate_call_utils_Set_T.
  End common.
  
  Module create_builder.
    Module state.
      Module Salt.
        Inductive t : Set :=
        .
      End Salt.
      Definition Salt := Salt.t.
    End state.
    
    Module FromAccountId.
      Class Trait (T Self : Set) : Set := {
        from_account_id : Environment.AccountId -> (M Self);
      }.
      
      Global Instance Method_from_account_id `(Trait)
        : Notation.Dot "from_account_id" := {
        Notation.dot := from_account_id;
      }.
    End FromAccountId.
    
    Module ConstructorReturnType.
      Class Trait (C Self : Set) : Set := {
        IS_RESULT : bool;
        Output : Set;
        Error : Set;
        ok : C -> (M ImplSelf.Output);
      }.
      
      Global Instance Method_IS_RESULT `(Trait) : Notation.Dot "IS_RESULT" := {
        Notation.dot := IS_RESULT;
      }.
      Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
        Notation.dot := Output;
      }.
      Global Instance Method_Error `(Trait) : Notation.Dot "Error" := {
        Notation.dot := Error;
      }.
      Global Instance Method_ok `(Trait) : Notation.Dot "ok" := {
        Notation.dot := ok;
      }.
      Global Instance Method_err `(Trait) : Notation.Dot "err" := {
        Notation.dot (_err : ImplSelf.Error) :=
          (Pure None
          : M (Option ImplSelf.Output));
      }.
    End ConstructorReturnType.
    
    Module Impl_ConstructorReturnType_for_C.
      Definition Self := C.
      
      Definition Output : Set := C.
      
      Definition Error : Set := unit.
      
      Definition ok (value : C) : M ImplSelf.Output := Pure value.
      
      Global Instance AssociatedFunction_ok :
        Notation.DoubleColon Self "ok" := {
        Notation.double_colon := ok;
      }.
      
      Global Instance I C : ConstructorReturnType.Trait Self C := {
        ConstructorReturnType.ok := ok;
      }.
    End Impl_ConstructorReturnType_for_C.
    
    Module Impl_ConstructorReturnType_for_core_result_Result_C_E.
      Definition Self := core.result.Result C E.
      
      Definition IS_RESULT := Pure true.
      
      Global Instance AssociatedFunction_IS_RESULT :
        Notation.DoubleColon Self "IS_RESULT" := {
        Notation.double_colon := IS_RESULT;
      }.
      
      Definition Output : Set := core.result.Result C E.
      
      Definition Error : Set := E.
      
      Definition ok (value : C) : M ImplSelf.Output := Pure (Ok value).
      
      Global Instance AssociatedFunction_ok :
        Notation.DoubleColon Self "ok" := {
        Notation.double_colon := ok;
      }.
      
      Definition err (err : ImplSelf.Error) : M (Option ImplSelf.Output) :=
        Pure (Some (Err err)).
      
      Global Instance AssociatedFunction_err :
        Notation.DoubleColon Self "err" := {
        Notation.double_colon := err;
      }.
      
      Global Instance I C E : ConstructorReturnType.Trait Self C := {
        ConstructorReturnType.ok := ok;
      }.
    End Impl_ConstructorReturnType_for_core_result_Result_C_E.
    
    Module CreateParams.
      Record t : Set := {
        code_hash : ImplE.Hash;
        gas_limit : u64;
        endowment : ImplE.Balance;
        exec_input : crate.call.ExecutionInput Args;
        salt_bytes : Salt;
        _return_type : crate.call.utils.ReturnType R;
        _phantom : core.marker.PhantomData ( -> ContractRef);
      }.
      
      Global Instance Get_code_hash : Notation.Dot "code_hash" := {
        Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
      }.
      Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
      }.
      Global Instance Get_endowment : Notation.Dot "endowment" := {
        Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
      }.
      Global Instance Get_exec_input : Notation.Dot "exec_input" := {
        Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
      }.
      Global Instance Get_salt_bytes : Notation.Dot "salt_bytes" := {
        Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
      }.
      Global Instance Get__return_type : Notation.Dot "_return_type" := {
        Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
      }.
      Global Instance Get__phantom : Notation.Dot "_phantom" := {
        Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
      }.
    End CreateParams.
    Definition CreateParams : Set := CreateParams.t.
    
    Module
        Impl__crate_fmt_Debug_for_crate_call_CreateParams_E_ContractRef_Args_Salt_R.
      Definition Self := crate.call.CreateParams E ContractRef Args Salt R.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        let names :=
          addr_of
            [
              "code_hash";
              "gas_limit";
              "endowment";
              "exec_input";
              "salt_bytes";
              "_return_type";
              "_phantom"
            ] in
        let values :=
          addr_of
            [
              addr_of self.["code_hash"];
              addr_of self.["gas_limit"];
              addr_of self.["endowment"];
              addr_of self.["exec_input"];
              addr_of self.["salt_bytes"];
              addr_of self.["_return_type"];
              addr_of (addr_of self.["_phantom"])
            ] in
        _crate.fmt.Formatter::["debug_struct_fields_finish"]
          f
          "CreateParams"
          names
          values.
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I
          E
          ContractRef
          Args
          Salt
          R
          :
          _crate.fmt.Debug.Trait
          Self :=
        {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End
      Impl__crate_fmt_Debug_for_crate_call_CreateParams_E_ContractRef_Args_Salt_R.
    
    Module Implcrate.call.CreateParams E ContractRef Args Salt R.
      Definition Self := crate.call.CreateParams E ContractRef Args Salt R.
      
      Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
        Pure (addr_of self.["code_hash"]).
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
      
      Definition gas_limit (self : ref Self) : M u64 := Pure self.["gas_limit"].
      
      Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot := gas_limit;
      }.
      
      Definition endowment (self : ref Self) : M (ref ImplE.Balance) :=
        Pure (addr_of self.["endowment"]).
      
      Global Instance Method_endowment : Notation.Dot "endowment" := {
        Notation.dot := endowment;
      }.
      
      Definition exec_input
          (self : ref Self)
          : M (ref (crate.call.ExecutionInput Args)) :=
        Pure (addr_of self.["exec_input"]).
      
      Global Instance Method_exec_input : Notation.Dot "exec_input" := {
        Notation.dot := exec_input;
      }.
      
      Definition update_selector
          (self : mut_ref Self)
          (selector : crate.call.Selector)
          : M unit :=
        self.["exec_input"].["update_selector"] selector.
      
      Global Instance Method_update_selector :
        Notation.Dot "update_selector" := {
        Notation.dot := update_selector;
      }.
    End Implcrate.call.CreateParams E ContractRef Args Salt R.
    
    Module Implcrate.call.CreateParams E ContractRef Args Salt R_2.
      Definition Self := crate.call.CreateParams E ContractRef Args Salt R.
      
      Definition salt_bytes (self : ref Self) : M (ref Salt) :=
        Pure (addr_of self.["salt_bytes"]).
      
      Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
        Notation.dot := salt_bytes;
      }.
    End Implcrate.call.CreateParams E ContractRef Args Salt R_2.
    
    Module Implcrate.call.CreateParams E ContractRef Args Salt R_3.
      Definition Self := crate.call.CreateParams E ContractRef Args Salt R.
      
      Definition instantiate
          (self : ref Self)
          : M ConstructorReturnType.Output :=
        let* α0 := crate.instantiate_contract self in
        let* α1 :=
          α0.["unwrap_or_else"]
            (fun env_error =>
              let* α0 := format_argument::["new_debug"] (addr_of env_error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "Cross-contract instantiation failed with " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        α1.["unwrap_or_else"]
          (fun lang_error =>
            let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Received a `LangError` while instantiating: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_instantiate : Notation.Dot "instantiate" := {
        Notation.dot := instantiate;
      }.
      
      Definition try_instantiate
          (self : ref Self)
          :
            M
              (crate.Result
                (ink_primitives.ConstructorResult ConstructorReturnType.Output)
                crate.Error) :=
        crate.instantiate_contract self.
      
      Global Instance Method_try_instantiate :
        Notation.Dot "try_instantiate" := {
        Notation.dot := try_instantiate;
      }.
    End Implcrate.call.CreateParams E ContractRef Args Salt R_3.
    
    Module CreateBuilder.
      Record t : Set := {
        code_hash : CodeHash;
        gas_limit : GasLimit;
        endowment : Endowment;
        exec_input : Args;
        salt : Salt;
        return_type : RetType;
        _phantom : core.marker.PhantomData ( -> (E * ContractRef));
      }.
      
      Global Instance Get_code_hash : Notation.Dot "code_hash" := {
        Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
      }.
      Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
      }.
      Global Instance Get_endowment : Notation.Dot "endowment" := {
        Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
      }.
      Global Instance Get_exec_input : Notation.Dot "exec_input" := {
        Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
      }.
      Global Instance Get_salt : Notation.Dot "salt" := {
        Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
      }.
      Global Instance Get_return_type : Notation.Dot "return_type" := {
        Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
      }.
      Global Instance Get__phantom : Notation.Dot "_phantom" := {
        Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
      }.
    End CreateBuilder.
    Definition CreateBuilder : Set := CreateBuilder.t.
    
    Definition build_create
        {ContractRef : Set}
        `{ContractEnv.Trait ContractRef}
        (_ : unit)
        :
          M
            (CreateBuilder
              ContractEnv.Env
              ContractRef
              (crate.call.utils.Unset Environment.Hash)
              (crate.call.utils.Unset u64)
              (crate.call.utils.Unset Environment.Balance)
              (crate.call.utils.Unset
                (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
              (crate.call.utils.Unset state.Salt)
              (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
      let* α0 := Default.default tt in
      let* α1 := Default.default tt in
      let* α2 := Default.default tt in
      let* α3 := Default.default tt in
      let* α4 := Default.default tt in
      let* α5 := Default.default tt in
      let* α6 := Default.default tt in
      Pure
        {|
          CreateBuilder.code_hash := α0;
          CreateBuilder.gas_limit := α1;
          CreateBuilder.endowment := α2;
          CreateBuilder.exec_input := α3;
          CreateBuilder.salt := α4;
          CreateBuilder.return_type := α5;
          CreateBuilder._phantom := α6;
        |}.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Unset ImplE.Hash)
        GasLimit
        Endowment
        Args
        Salt
        RetType.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          (crate.call.utils.Unset ImplE.Hash)
          GasLimit
          Endowment
          Args
          Salt
          RetType.
      
      Definition code_hash
          (self : Self)
          (code_hash : ImplE.Hash)
          :
            M
              (CreateBuilder
                E
                ContractRef
                (crate.call.utils.Set ImplE.Hash)
                GasLimit
                Endowment
                Args
                Salt
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := crate.call.utils.Set.Build_t code_hash;
            CreateBuilder.gas_limit := self.["gas_limit"];
            CreateBuilder.endowment := self.["endowment"];
            CreateBuilder.exec_input := self.["exec_input"];
            CreateBuilder.salt := self.["salt"];
            CreateBuilder.return_type := self.["return_type"];
            CreateBuilder._phantom := α0;
          |}.
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Unset ImplE.Hash)
        GasLimit
        Endowment
        Args
        Salt
        RetType.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        (crate.call.utils.Unset u64)
        Endowment
        Args
        Salt
        RetType.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          CodeHash
          (crate.call.utils.Unset u64)
          Endowment
          Args
          Salt
          RetType.
      
      Definition gas_limit
          (self : Self)
          (gas_limit : u64)
          :
            M
              (CreateBuilder
                E
                ContractRef
                CodeHash
                (crate.call.utils.Set u64)
                Endowment
                Args
                Salt
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := self.["code_hash"];
            CreateBuilder.gas_limit := crate.call.utils.Set.Build_t gas_limit;
            CreateBuilder.endowment := self.["endowment"];
            CreateBuilder.exec_input := self.["exec_input"];
            CreateBuilder.salt := self.["salt"];
            CreateBuilder.return_type := self.["return_type"];
            CreateBuilder._phantom := α0;
          |}.
      
      Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
        Notation.dot := gas_limit;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        (crate.call.utils.Unset u64)
        Endowment
        Args
        Salt
        RetType.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        (crate.call.utils.Unset ImplE.Balance)
        Args
        Salt
        RetType.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          CodeHash
          GasLimit
          (crate.call.utils.Unset ImplE.Balance)
          Args
          Salt
          RetType.
      
      Definition endowment
          (self : Self)
          (endowment : ImplE.Balance)
          :
            M
              (CreateBuilder
                E
                ContractRef
                CodeHash
                GasLimit
                (crate.call.utils.Set ImplE.Balance)
                Args
                Salt
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := self.["code_hash"];
            CreateBuilder.gas_limit := self.["gas_limit"];
            CreateBuilder.endowment := crate.call.utils.Set.Build_t endowment;
            CreateBuilder.exec_input := self.["exec_input"];
            CreateBuilder.salt := self.["salt"];
            CreateBuilder.return_type := self.["return_type"];
            CreateBuilder._phantom := α0;
          |}.
      
      Global Instance Method_endowment : Notation.Dot "endowment" := {
        Notation.dot := endowment;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        (crate.call.utils.Unset ImplE.Balance)
        Args
        Salt
        RetType.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        Salt
        RetType.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          CodeHash
          GasLimit
          Endowment
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          Salt
          RetType.
      
      Definition exec_input
          (self : Self)
          (exec_input : crate.call.ExecutionInput Args)
          :
            M
              (CreateBuilder
                E
                ContractRef
                CodeHash
                GasLimit
                Endowment
                (crate.call.utils.Set (crate.call.ExecutionInput Args))
                Salt
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := self.["code_hash"];
            CreateBuilder.gas_limit := self.["gas_limit"];
            CreateBuilder.endowment := self.["endowment"];
            CreateBuilder.exec_input := crate.call.utils.Set.Build_t exec_input;
            CreateBuilder.salt := self.["salt"];
            CreateBuilder.return_type := self.["return_type"];
            CreateBuilder._phantom := α0;
          |}.
      
      Global Instance Method_exec_input : Notation.Dot "exec_input" := {
        Notation.dot := exec_input;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        Salt
        RetType.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        (crate.call.utils.Unset state.Salt)
        RetType.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          CodeHash
          GasLimit
          Endowment
          Args
          (crate.call.utils.Unset state.Salt)
          RetType.
      
      Definition salt_bytes
          (self : Self)
          (salt : Salt)
          :
            M
              (CreateBuilder
                E
                ContractRef
                CodeHash
                GasLimit
                Endowment
                Args
                (crate.call.utils.Set Salt)
                RetType) :=
        let* α0 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := self.["code_hash"];
            CreateBuilder.gas_limit := self.["gas_limit"];
            CreateBuilder.endowment := self.["endowment"];
            CreateBuilder.exec_input := self.["exec_input"];
            CreateBuilder.salt := crate.call.utils.Set.Build_t salt;
            CreateBuilder.return_type := self.["return_type"];
            CreateBuilder._phantom := α0;
          |}.
      
      Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
        Notation.dot := salt_bytes;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        (crate.call.utils.Unset state.Salt)
        RetType.
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        Salt
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          CodeHash
          GasLimit
          Endowment
          Args
          Salt
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
      
      Definition returns
          (self : Self)
          :
            M
              (CreateBuilder
                E
                ContractRef
                CodeHash
                GasLimit
                Endowment
                Args
                Salt
                (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
        let* α0 := Default.default tt in
        let* α1 := Default.default tt in
        Pure
          {|
            CreateBuilder.code_hash := self.["code_hash"];
            CreateBuilder.gas_limit := self.["gas_limit"];
            CreateBuilder.endowment := self.["endowment"];
            CreateBuilder.exec_input := self.["exec_input"];
            CreateBuilder.salt := self.["salt"];
            CreateBuilder.return_type := crate.call.utils.Set.Build_t α0;
            CreateBuilder._phantom := α1;
          |}.
      
      Global Instance Method_returns : Notation.Dot "returns" := {
        Notation.dot := returns;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        Salt
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          (crate.call.utils.Set ImplE.Hash)
          GasLimit
          (crate.call.utils.Set ImplE.Balance)
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set Salt)
          (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      
      Definition params
          (self : Self)
          : M (crate.call.CreateParams E ContractRef Args Salt RetType) :=
        let* α0 := self.["code_hash"].["value"] in
        let* α1 := self.["gas_limit"].["unwrap_or_else"] (fun  => Pure 0) in
        let* α2 := self.["endowment"].["value"] in
        let* α3 := self.["exec_input"].["value"] in
        let* α4 := self.["salt"].["value"] in
        let* α5 := Default.default tt in
        let* α6 := Default.default tt in
        Pure
          {|
            crate.call.CreateParams.code_hash := α0;
            crate.call.CreateParams.gas_limit := α1;
            crate.call.CreateParams.endowment := α2;
            crate.call.CreateParams.exec_input := α3;
            crate.call.CreateParams.salt_bytes := α4;
            crate.call.CreateParams._return_type := α5;
            crate.call.CreateParams._phantom := α6;
          |}.
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Module
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
      Definition
        Self
        :=
        CreateBuilder
          E
          ContractRef
          (crate.call.utils.Set ImplE.Hash)
          GasLimit
          (crate.call.utils.Set ImplE.Balance)
          (crate.call.utils.Set (crate.call.ExecutionInput Args))
          (crate.call.utils.Set Salt)
          (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
      
      Definition instantiate (self : Self) : M ConstructorReturnType.Output :=
        let* α0 := self.["params"] in
        α0.["instantiate"].
      
      Global Instance Method_instantiate : Notation.Dot "instantiate" := {
        Notation.dot := instantiate;
      }.
      
      Definition try_instantiate
          (self : Self)
          :
            M
              (crate.Result
                (ink_primitives.ConstructorResult ConstructorReturnType.Output)
                crate.Error) :=
        let* α0 := self.["params"] in
        α0.["try_instantiate"].
      
      Global Instance Method_try_instantiate :
        Notation.Dot "try_instantiate" := {
        Notation.dot := try_instantiate;
      }.
    End
      ImplCreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
  End create_builder.
  
  Module execution_input.
    Module ExecutionInput.
      Record t : Set := {
        selector : crate.call.Selector;
        args : Args;
      }.
      
      Global Instance Get_selector : Notation.Dot "selector" := {
        Notation.dot '(Build_t x0 _) := x0;
      }.
      Global Instance Get_args : Notation.Dot "args" := {
        Notation.dot '(Build_t _ x1) := x1;
      }.
    End ExecutionInput.
    Definition ExecutionInput : Set := ExecutionInput.t.
    
    Module Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.
      Definition Self := crate.call.ExecutionInput Args.
      
      Definition clone (self : ref Self) : M (crate.call.ExecutionInput Args) :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["selector"]) in
        let* α1 := _crate.clone.Clone.clone (addr_of self.["args"]) in
        Pure
          {|
            crate.call.ExecutionInput.selector := α0;
            crate.call.ExecutionInput.args := α1;
          |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I Args : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.
    
    Module Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.
      Definition Self := crate.call.ExecutionInput Args.
      
      Definition default (_ : unit) : M (crate.call.ExecutionInput Args) :=
        let* α0 := _crate.default.Default.default tt in
        let* α1 := _crate.default.Default.default tt in
        Pure
          {|
            crate.call.ExecutionInput.selector := α0;
            crate.call.ExecutionInput.args := α1;
          |}.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I Args : _crate.default.Default.Trait Self := {
        _crate.default.Default.default := default;
      }.
    End Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.
    
    Module Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.
      Definition Self := crate.call.ExecutionInput Args.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field2_finish"]
          f
          "ExecutionInput"
          "selector"
          (addr_of self.["selector"])
          "args"
          (addr_of (addr_of self.["args"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I Args : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.
    
    Module Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList.
      Definition
        Self
        :=
        crate.call.ExecutionInput crate.call.utils.EmptyArgumentList.
      
      Definition new (selector : crate.call.Selector) : M Self :=
        let* α0 := ArgumentList::["empty"] tt in
        Pure {| Self.selector := selector; Self.args := α0; |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
      
      Definition push_arg
          (self : Self)
          (arg : T)
          :
            M
              (crate.call.ExecutionInput
                (ArgumentList
                  (Argument T)
                  crate.call.utils.EmptyArgumentList)) :=
        let* α0 := self.["args"].["push_arg"] arg in
        Pure
          {|
            crate.call.ExecutionInput.selector := self.["selector"];
            crate.call.ExecutionInput.args := α0;
          |}.
      
      Global Instance Method_push_arg : Notation.Dot "push_arg" := {
        Notation.dot := push_arg;
      }.
    End Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList.
    
    Module Implcrate.call.ExecutionInput (ArgumentList (Argument Head) Rest).
      Definition
        Self
        :=
        crate.call.ExecutionInput (ArgumentList (Argument Head) Rest).
      
      Definition push_arg
          (self : Self)
          (arg : T)
          : M (crate.call.ExecutionInput (ArgsList T (ArgsList Head Rest))) :=
        let* α0 := self.["args"].["push_arg"] arg in
        Pure
          {|
            crate.call.ExecutionInput.selector := self.["selector"];
            crate.call.ExecutionInput.args := α0;
          |}.
      
      Global Instance Method_push_arg : Notation.Dot "push_arg" := {
        Notation.dot := push_arg;
      }.
    End Implcrate.call.ExecutionInput (ArgumentList (Argument Head) Rest).
    
    Module Implcrate.call.ExecutionInput Args.
      Definition Self := crate.call.ExecutionInput Args.
      
      Definition update_selector
          (self : mut_ref Self)
          (selector : crate.call.Selector)
          : M unit :=
        let* _ := assign self.["selector"] selector in
        Pure tt.
      
      Global Instance Method_update_selector :
        Notation.Dot "update_selector" := {
        Notation.dot := update_selector;
      }.
    End Implcrate.call.ExecutionInput Args.
    
    Module ArgumentList.
      Record t : Set := {
        head : Head;
        rest : Rest;
      }.
      
      Global Instance Get_head : Notation.Dot "head" := {
        Notation.dot '(Build_t x0 _) := x0;
      }.
      Global Instance Get_rest : Notation.Dot "rest" := {
        Notation.dot '(Build_t _ x1) := x1;
      }.
    End ArgumentList.
    Definition ArgumentList : Set := ArgumentList.t.
    
    Module Impl__crate_clone_Clone_for_ArgumentList_Head_Rest.
      Definition Self := ArgumentList Head Rest.
      
      Definition clone (self : ref Self) : M (ArgumentList Head Rest) :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["head"]) in
        let* α1 := _crate.clone.Clone.clone (addr_of self.["rest"]) in
        Pure {| ArgumentList.head := α0; ArgumentList.rest := α1; |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I Head Rest : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_ArgumentList_Head_Rest.
    
    Module Impl__crate_default_Default_for_ArgumentList_Head_Rest.
      Definition Self := ArgumentList Head Rest.
      
      Definition default (_ : unit) : M (ArgumentList Head Rest) :=
        let* α0 := _crate.default.Default.default tt in
        let* α1 := _crate.default.Default.default tt in
        Pure {| ArgumentList.head := α0; ArgumentList.rest := α1; |}.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I Head Rest : _crate.default.Default.Trait Self := {
        _crate.default.Default.default := default;
      }.
    End Impl__crate_default_Default_for_ArgumentList_Head_Rest.
    
    Module Impl__crate_fmt_Debug_for_ArgumentList_Head_Rest.
      Definition Self := ArgumentList Head Rest.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field2_finish"]
          f
          "ArgumentList"
          "head"
          (addr_of self.["head"])
          "rest"
          (addr_of (addr_of self.["rest"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I Head Rest : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_ArgumentList_Head_Rest.
    
    Definition ArgsList : Set := ArgumentList (Argument Head) Rest.
    
    Module Argument.
      Record t : Set := {
        arg : T;
      }.
      
      Global Instance Get_arg : Notation.Dot "arg" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End Argument.
    Definition Argument : Set := Argument.t.
    
    Module Impl__crate_clone_Clone_for_Argument_T.
      Definition Self := Argument T.
      
      Definition clone (self : ref Self) : M (Argument T) :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["arg"]) in
        Pure {| Argument.arg := α0; |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I T : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_Argument_T.
    
    Module Impl__crate_fmt_Debug_for_Argument_T.
      Definition Self := Argument T.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field1_finish"]
          f
          "Argument"
          "arg"
          (addr_of (addr_of self.["arg"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I T : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_Argument_T.
    
    Module ImplArgument T.
      Definition Self := Argument T.
      
      Definition new (arg : T) : M Self := Pure {| Self.arg := arg; |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
    End ImplArgument T.
    
    Module ArgumentListEnd.
      Inductive t : Set := Build.
    End ArgumentListEnd.
    Definition ArgumentListEnd := ArgumentListEnd.t.
    
    Module Impl__crate_clone_Clone_for_ArgumentListEnd.
      Definition Self := ArgumentListEnd.
      
      Definition clone (self : ref Self) : M ArgumentListEnd :=
        Pure ArgumentListEnd.Build.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_ArgumentListEnd.
    
    Module Impl__crate_default_Default_for_ArgumentListEnd.
      Definition Self := ArgumentListEnd.
      
      Definition default (_ : unit) : M ArgumentListEnd := Pure {|  |}.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I : _crate.default.Default.Trait Self := {
        _crate.default.Default.default := default;
      }.
    End Impl__crate_default_Default_for_ArgumentListEnd.
    
    Module Impl__crate_fmt_Debug_for_ArgumentListEnd.
      Definition Self := ArgumentListEnd.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["write_str"] f "ArgumentListEnd".
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_ArgumentListEnd.
    
    Definition EmptyArgumentList : Set :=
      ArgumentList ArgumentListEnd ArgumentListEnd.
    
    Module Implcrate.call.utils.EmptyArgumentList.
      Definition Self := crate.call.utils.EmptyArgumentList.
      
      Definition empty (_ : unit) : M crate.call.utils.EmptyArgumentList :=
        Pure
          {|
            ArgumentList.head := ArgumentListEnd.Build;
            ArgumentList.rest := ArgumentListEnd.Build;
          |}.
      
      Global Instance AssociatedFunction_empty :
        Notation.DoubleColon Self "empty" := {
        Notation.double_colon := empty;
      }.
      
      Definition push_arg
          (self : Self)
          (arg : T)
          : M (ArgumentList (Argument T) Self) :=
        let* α0 := Argument::["new"] arg in
        Pure {| ArgumentList.head := α0; ArgumentList.rest := self; |}.
      
      Global Instance Method_push_arg : Notation.Dot "push_arg" := {
        Notation.dot := push_arg;
      }.
    End Implcrate.call.utils.EmptyArgumentList.
    
    Module ImplArgumentList (Argument Head) Rest.
      Definition Self := ArgumentList (Argument Head) Rest.
      
      Definition push_arg
          (self : Self)
          (arg : T)
          : M (ArgumentList (Argument T) Self) :=
        let* α0 := Argument::["new"] arg in
        Pure {| ArgumentList.head := α0; ArgumentList.rest := self; |}.
      
      Global Instance Method_push_arg : Notation.Dot "push_arg" := {
        Notation.dot := push_arg;
      }.
    End ImplArgumentList (Argument Head) Rest.
    
    Module Impl_scale_Encode_for_Argument_T.
      Definition Self := Argument T.
      
      Definition size_hint (self : ref Self) : M usize :=
        scale.Encode.size_hint (addr_of self.["arg"]).
      
      Global Instance Method_size_hint : Notation.Dot "size_hint" := {
        Notation.dot := size_hint;
      }.
      
      Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
        scale.Encode.encode_to (addr_of self.["arg"]) output.
      
      Global Instance Method_encode_to : Notation.Dot "encode_to" := {
        Notation.dot := encode_to;
      }.
      
      Global Instance I T : scale.Encode.Trait Self := {
      }.
    End Impl_scale_Encode_for_Argument_T.
    
    Module Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.
      Definition Self := crate.call.utils.EmptyArgumentList.
      
      Definition size_hint (self : ref Self) : M usize := Pure 0.
      
      Global Instance Method_size_hint : Notation.Dot "size_hint" := {
        Notation.dot := size_hint;
      }.
      
      Definition encode_to (self : ref Self) (_output : mut_ref O) : M unit :=
        Pure tt.
      
      Global Instance Method_encode_to : Notation.Dot "encode_to" := {
        Notation.dot := encode_to;
      }.
      
      Global Instance I : scale.Encode.Trait Self := {
      }.
    End Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.
    
    Module Impl_scale_Encode_for_ArgumentList_Argument_Head_Rest.
      Definition Self := ArgumentList (Argument Head) Rest.
      
      Definition size_hint (self : ref Self) : M usize :=
        let* α0 := scale.Encode.size_hint (addr_of self.["head"]) in
        let* α1 := scale.Encode.size_hint (addr_of self.["rest"]) in
        α0.["add"] α1.
      
      Global Instance Method_size_hint : Notation.Dot "size_hint" := {
        Notation.dot := size_hint;
      }.
      
      Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
        let* _ := scale.Encode.encode_to (addr_of self.["rest"]) output in
        let* _ := scale.Encode.encode_to (addr_of self.["head"]) output in
        Pure tt.
      
      Global Instance Method_encode_to : Notation.Dot "encode_to" := {
        Notation.dot := encode_to;
      }.
      
      Global Instance I Head Rest : scale.Encode.Trait Self := {
      }.
    End Impl_scale_Encode_for_ArgumentList_Argument_Head_Rest.
    
    Module Impl_scale_Encode_for_crate_call_ExecutionInput_Args.
      Definition Self := crate.call.ExecutionInput Args.
      
      Definition size_hint (self : ref Self) : M usize :=
        let* α0 := scale.Encode.size_hint (addr_of self.["selector"]) in
        let* α1 := scale.Encode.size_hint (addr_of self.["args"]) in
        α0.["add"] α1.
      
      Global Instance Method_size_hint : Notation.Dot "size_hint" := {
        Notation.dot := size_hint;
      }.
      
      Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
        let* _ := scale.Encode.encode_to (addr_of self.["selector"]) output in
        let* _ := scale.Encode.encode_to (addr_of self.["args"]) output in
        Pure tt.
      
      Global Instance Method_encode_to : Notation.Dot "encode_to" := {
        Notation.dot := encode_to;
      }.
      
      Global Instance I Args : scale.Encode.Trait Self := {
      }.
    End Impl_scale_Encode_for_crate_call_ExecutionInput_Args.
  End execution_input.
  
  Module selector.
    Module From := derive_more.From.
    
    Module Selector.
      Record t : Set := {
        bytes : list u8;
      }.
      
      Global Instance Get_bytes : Notation.Dot "bytes" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End Selector.
    Definition Selector : Set := Selector.t.
    
    Module Impl__crate_default_Default_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition default (_ : unit) : M crate.call.Selector :=
        let* α0 := _crate.default.Default.default tt in
        Pure {| crate.call.Selector.bytes := α0; |}.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I : _crate.default.Default.Trait Self := {
        _crate.default.Default.default := default;
      }.
    End Impl__crate_default_Default_for_crate_call_Selector.
    
    Module Impl__crate_fmt_Debug_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field1_finish"]
          f
          "Selector"
          "bytes"
          (addr_of (addr_of self.["bytes"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_crate_call_Selector.
    
    Module Impl__crate_marker_Copy_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Global Instance I : _crate.marker.Copy.Trait Self :=
        _crate.marker.Copy.Build_Class _.
    End Impl__crate_marker_Copy_for_crate_call_Selector.
    
    Module Impl__crate_clone_Clone_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition clone (self : ref Self) : M crate.call.Selector :=
        let _ := tt in
        self.["deref"].
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_crate_call_Selector.
    
    Module Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
        _crate.marker.StructuralPartialEq.Build_Class _.
    End Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.
    
    Module Impl__crate_cmp_PartialEq_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition eq
          (self : ref Self)
          (other : ref crate.call.Selector)
          : M bool :=
        self.["bytes"].["eq"] other.["bytes"].
      
      Global Instance Method_eq : Notation.Dot "eq" := {
        Notation.dot := eq;
      }.
      
      Global Instance I : _crate.cmp.PartialEq.Trait Self := {
        _crate.cmp.PartialEq.eq := eq;
      }.
    End Impl__crate_cmp_PartialEq_for_crate_call_Selector.
    
    Module Impl__crate_marker_StructuralEq_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Global Instance I : _crate.marker.StructuralEq.Trait Self :=
        _crate.marker.StructuralEq.Build_Class _.
    End Impl__crate_marker_StructuralEq_for_crate_call_Selector.
    
    Module Impl__crate_cmp_Eq_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
        let _ := tt in
        Pure tt.
      
      Global Instance Method_assert_receiver_is_total_eq :
        Notation.Dot "assert_receiver_is_total_eq" := {
        Notation.dot := assert_receiver_is_total_eq;
      }.
      
      Global Instance I : _crate.cmp.Eq.Trait Self := {
      }.
    End Impl__crate_cmp_Eq_for_crate_call_Selector.
    
    Module Impl_Root_core_convert_From_for_crate_call_Selector.
      Definition Self := crate.call.Selector.
      
      Definition from (original : list u8) : M crate.call.Selector :=
        Pure {| crate.call.Selector.bytes := original; |}.
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : Root.core.convert.From.Trait Self list u8 := {
        Root.core.convert.From.from := from;
      }.
    End Impl_Root_core_convert_From_for_crate_call_Selector.
    
    Definition _ : unit := run (Pure tt).
    
    Definition _ : unit := run (Pure tt).
    
    Module Implcrate.call.Selector.
      Definition Self := crate.call.Selector.
      
      Definition new (bytes : list u8) : M Self :=
        Pure {| Self.bytes := bytes; |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
      
      Definition to_bytes (self : Self) : M list u8 := Pure self.["bytes"].
      
      Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
        Notation.dot := to_bytes;
      }.
    End Implcrate.call.Selector.
  End selector.
  
  Module utils.
    
  End utils.
  
  Module build_call := self.call_builder.build_call.
  
  Module build_create := self.create_builder.build_create.
  
  Module state := self.create_builder.state.
End call.

Module call_builder.
  Module CallParams.
    Record t : Set := {
      call_type : CallType;
      call_flags : crate.backend.CallFlags;
      _return_type : crate.call.utils.ReturnType R;
      exec_input : crate.call.ExecutionInput Args;
      _phantom : core.marker.PhantomData ( -> E);
    }.
    
    Global Instance Get_call_type : Notation.Dot "call_type" := {
      Notation.dot '(Build_t x0 _ _ _ _) := x0;
    }.
    Global Instance Get_call_flags : Notation.Dot "call_flags" := {
      Notation.dot '(Build_t _ x1 _ _ _) := x1;
    }.
    Global Instance Get__return_type : Notation.Dot "_return_type" := {
      Notation.dot '(Build_t _ _ x2 _ _) := x2;
    }.
    Global Instance Get_exec_input : Notation.Dot "exec_input" := {
      Notation.dot '(Build_t _ _ _ x3 _) := x3;
    }.
    Global Instance Get__phantom : Notation.Dot "_phantom" := {
      Notation.dot '(Build_t _ _ _ _ x4) := x4;
    }.
  End CallParams.
  Definition CallParams : Set := CallParams.t.
  
  Module
      Impl__crate_fmt_Debug_for_self_call_builder_CallParams_E_CallType_Args_R.
    Definition Self := self.call_builder.CallParams E CallType Args R.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field5_finish"]
        f
        "CallParams"
        "call_type"
        (addr_of self.["call_type"])
        "call_flags"
        (addr_of self.["call_flags"])
        "_return_type"
        (addr_of self.["_return_type"])
        "exec_input"
        (addr_of self.["exec_input"])
        "_phantom"
        (addr_of (addr_of self.["_phantom"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I E CallType Args R : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_self_call_builder_CallParams_E_CallType_Args_R.
  
  Module Implself.call_builder.CallParams E CallType Args R.
    Definition Self := self.call_builder.CallParams E CallType Args R.
    
    Definition call_flags (self : ref Self) : M (ref crate.backend.CallFlags) :=
      Pure (addr_of self.["call_flags"]).
    
    Global Instance Method_call_flags : Notation.Dot "call_flags" := {
      Notation.dot := call_flags;
    }.
    
    Definition exec_input
        (self : ref Self)
        : M (ref (crate.call.ExecutionInput Args)) :=
      Pure (addr_of self.["exec_input"]).
    
    Global Instance Method_exec_input : Notation.Dot "exec_input" := {
      Notation.dot := exec_input;
    }.
  End Implself.call_builder.CallParams E CallType Args R.
  
  Module Implself.call_builder.CallParams E (self.call_builder.Call E) Args R.
    Definition
      Self
      :=
      self.call_builder.CallParams E (self.call_builder.Call E) Args R.
    
    Definition callee (self : ref Self) : M (ref ImplE.AccountId) :=
      Pure (addr_of self.["call_type"].["callee"]).
    
    Global Instance Method_callee : Notation.Dot "callee" := {
      Notation.dot := callee;
    }.
    
    Definition gas_limit (self : ref Self) : M crate.types.Gas :=
      Pure self.["call_type"].["gas_limit"].
    
    Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot := gas_limit;
    }.
    
    Definition transferred_value (self : ref Self) : M (ref ImplE.Balance) :=
      Pure (addr_of self.["call_type"].["transferred_value"]).
    
    Global Instance Method_transferred_value :
      Notation.Dot "transferred_value" := {
      Notation.dot := transferred_value;
    }.
  End Implself.call_builder.CallParams E (self.call_builder.Call E) Args R.
  
  Module
    Implself.call_builder.CallParams
      E
      (self.call_builder.DelegateCall E)
      Args
      R.
    Definition
      Self
      :=
      self.call_builder.CallParams E (self.call_builder.DelegateCall E) Args R.
    
    Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
      Pure (addr_of self.["call_type"].["code_hash"]).
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
  End
    Implself.call_builder.CallParams
      E
      (self.call_builder.DelegateCall E)
      Args
      R.
  
  Module Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_2.
    Definition
      Self
      :=
      self.call_builder.CallParams E (self.call_builder.Call E) Args R.
    
    Definition invoke (self : ref Self) : M R :=
      let* α0 := crate.invoke_contract self in
      let* α1 :=
        α0.["unwrap_or_else"]
          (fun env_error =>
            let* α0 := format_argument::["new_debug"] (addr_of env_error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Cross-contract call failed with " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      α1.["unwrap_or_else"]
        (fun lang_error =>
          let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Cross-contract call failed with " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke
        (self : ref Self)
        : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
      crate.invoke_contract self.
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_2.
  
  Module
    Implself.call_builder.CallParams
      E
      (self.call_builder.DelegateCall E)
      Args
      R_2.
    Definition
      Self
      :=
      self.call_builder.CallParams E (self.call_builder.DelegateCall E) Args R.
    
    Definition invoke (self : ref Self) : M R :=
      let* α0 := crate.invoke_contract_delegate self in
      α0.["unwrap_or_else"]
        (fun env_error =>
          let* α0 := format_argument::["new_debug"] (addr_of env_error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Cross-contract call failed with " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke (self : ref Self) : M (crate.Result R crate.Error) :=
      crate.invoke_contract_delegate self.
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End
    Implself.call_builder.CallParams
      E
      (self.call_builder.DelegateCall E)
      Args
      R_2.
  
  Definition build_call
      {E : Set}
      `{Environment.Trait E}
      (_ : unit)
      :
        M
          (self.call_builder.CallBuilder
            E
            (crate.call.utils.Unset (self.call_builder.Call E))
            (crate.call.utils.Unset
              (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
            (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
    let* α0 := Default.default tt in
    let* α1 := Default.default tt in
    let* α2 := Default.default tt in
    let* α3 := Default.default tt in
    let* α4 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type := α0;
        self.call_builder.CallBuilder.call_flags := α1;
        self.call_builder.CallBuilder.exec_input := α2;
        self.call_builder.CallBuilder.return_type := α3;
        self.call_builder.CallBuilder._phantom := α4;
      |}.
  
  Module Call.
    Record t : Set := {
      callee : ImplE.AccountId;
      gas_limit : crate.types.Gas;
      transferred_value : ImplE.Balance;
    }.
    
    Global Instance Get_callee : Notation.Dot "callee" := {
      Notation.dot '(Build_t x0 _ _) := x0;
    }.
    Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot '(Build_t _ x1 _) := x1;
    }.
    Global Instance Get_transferred_value :
        Notation.Dot "transferred_value" := {
      Notation.dot '(Build_t _ _ x2) := x2;
    }.
  End Call.
  Definition Call : Set := Call.t.
  
  Module Impl__crate_clone_Clone_for_self_call_builder_Call_E.
    Definition Self := self.call_builder.Call E.
    
    Definition clone (self : ref Self) : M (self.call_builder.Call E) :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["callee"]) in
      let* α1 := _crate.clone.Clone.clone (addr_of self.["gas_limit"]) in
      let* α2 :=
        _crate.clone.Clone.clone (addr_of self.["transferred_value"]) in
      Pure
        {|
          self.call_builder.Call.callee := α0;
          self.call_builder.Call.gas_limit := α1;
          self.call_builder.Call.transferred_value := α2;
        |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I E : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_self_call_builder_Call_E.
  
  Module Implself.call_builder.Call E.
    Definition Self := self.call_builder.Call E.
    
    Definition new (callee : ImplE.AccountId) : M Self :=
      let* α0 := Default.default tt in
      let* α1 := ImplE.Balance::["zero"] tt in
      Pure
        {|
          Self.callee := callee;
          Self.gas_limit := α0;
          Self.transferred_value := α1;
        |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
  End Implself.call_builder.Call E.
  
  Module Implself.call_builder.Call E_2.
    Definition Self := self.call_builder.Call E.
    
    Definition gas_limit (self : Self) (gas_limit : crate.types.Gas) : M Self :=
      Pure
        {|
          self.call_builder.Call.callee := self.["callee"];
          self.call_builder.Call.gas_limit := gas_limit;
          self.call_builder.Call.transferred_value :=
            self.["transferred_value"];
        |}.
    
    Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot := gas_limit;
    }.
    
    Definition transferred_value
        (self : Self)
        (transferred_value : ImplE.Balance)
        : M Self :=
      Pure
        {|
          self.call_builder.Call.callee := self.["callee"];
          self.call_builder.Call.gas_limit := self.["gas_limit"];
          self.call_builder.Call.transferred_value := transferred_value;
        |}.
    
    Global Instance Method_transferred_value :
      Notation.Dot "transferred_value" := {
      Notation.dot := transferred_value;
    }.
  End Implself.call_builder.Call E_2.
  
  Module DelegateCall.
    Record t : Set := {
      code_hash : ImplE.Hash;
    }.
    
    Global Instance Get_code_hash : Notation.Dot "code_hash" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End DelegateCall.
  Definition DelegateCall : Set := DelegateCall.t.
  
  Module Implself.call_builder.DelegateCall E.
    Definition Self := self.call_builder.DelegateCall E.
    
    Definition new (code_hash : ImplE.Hash) : M Self :=
      Pure {| self.call_builder.DelegateCall.code_hash := code_hash; |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
  End Implself.call_builder.DelegateCall E.
  
  Module Implself.call_builder.DelegateCall E_2.
    Definition Self := self.call_builder.DelegateCall E.
    
    Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
      Pure {| self.call_builder.DelegateCall.code_hash := code_hash; |}.
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
  End Implself.call_builder.DelegateCall E_2.
  
  Module CallBuilder.
    Record t : Set := {
      call_type : CallType;
      call_flags : crate.backend.CallFlags;
      exec_input : Args;
      return_type : RetType;
      _phantom : core.marker.PhantomData ( -> E);
    }.
    
    Global Instance Get_call_type : Notation.Dot "call_type" := {
      Notation.dot '(Build_t x0 _ _ _ _) := x0;
    }.
    Global Instance Get_call_flags : Notation.Dot "call_flags" := {
      Notation.dot '(Build_t _ x1 _ _ _) := x1;
    }.
    Global Instance Get_exec_input : Notation.Dot "exec_input" := {
      Notation.dot '(Build_t _ _ x2 _ _) := x2;
    }.
    Global Instance Get_return_type : Notation.Dot "return_type" := {
      Notation.dot '(Build_t _ _ _ x3 _) := x3;
    }.
    Global Instance Get__phantom : Notation.Dot "_phantom" := {
      Notation.dot '(Build_t _ _ _ _ x4) := x4;
    }.
  End CallBuilder.
  Definition CallBuilder : Set := CallBuilder.t.
  
  Module
      Impl__crate_clone_Clone_for_self_call_builder_CallBuilder_E_CallType_Args_RetType.
    Definition Self := self.call_builder.CallBuilder E CallType Args RetType.
    
    Definition clone
        (self : ref Self)
        : M (self.call_builder.CallBuilder E CallType Args RetType) :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["call_type"]) in
      let* α1 := _crate.clone.Clone.clone (addr_of self.["call_flags"]) in
      let* α2 := _crate.clone.Clone.clone (addr_of self.["exec_input"]) in
      let* α3 := _crate.clone.Clone.clone (addr_of self.["return_type"]) in
      let* α4 := _crate.clone.Clone.clone (addr_of self.["_phantom"]) in
      Pure
        {|
          self.call_builder.CallBuilder.call_type := α0;
          self.call_builder.CallBuilder.call_flags := α1;
          self.call_builder.CallBuilder.exec_input := α2;
          self.call_builder.CallBuilder.return_type := α3;
          self.call_builder.CallBuilder._phantom := α4;
        |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I E CallType Args RetType : _crate.clone.Clone.Trait Self :=
      {
      _crate.clone.Clone.clone := clone;
    }.
  End
    Impl__crate_clone_Clone_for_self_call_builder_CallBuilder_E_CallType_Args_RetType.
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType.
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Unset CallType)
        Args
        RetType.
    
    Definition call_type
        (self : Self)
        (call_type : NewCallType)
        :
          M
            (self.call_builder.CallBuilder
              E
              (crate.call.utils.Set NewCallType)
              Args
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t call_type;
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_call_type : Notation.Dot "call_type" := {
      Notation.dot := call_type;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType.
  
  Module Implself.call_builder.CallBuilder E CallType Args RetType.
    Definition Self := self.call_builder.CallBuilder E CallType Args RetType.
    
    Definition call_flags
        (self : Self)
        (call_flags : crate.backend.CallFlags)
        : M (self.call_builder.CallBuilder E CallType Args RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type := self.["call_type"];
          self.call_builder.CallBuilder.call_flags := call_flags;
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_call_flags : Notation.Dot "call_flags" := {
      Notation.dot := call_flags;
    }.
  End Implself.call_builder.CallBuilder E CallType Args RetType.
  
  Module
    Implself.call_builder.CallBuilder
      E
      CallType
      Args
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        CallType
        Args
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Definition returns
        (self : Self)
        :
          M
            (self.call_builder.CallBuilder
              E
              CallType
              Args
              (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
      let* α0 := Default.default tt in
      let* α1 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type := self.["call_type"];
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type :=
            crate.call.utils.Set.Build_t α0;
          self.call_builder.CallBuilder._phantom := α1;
        |}.
    
    Global Instance Method_returns : Notation.Dot "returns" := {
      Notation.dot := returns;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      CallType
      Args
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      CallType
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      RetType.
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        CallType
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        RetType.
    
    Definition exec_input
        (self : Self)
        (exec_input : crate.call.ExecutionInput Args)
        :
          M
            (self.call_builder.CallBuilder
              E
              CallType
              (crate.call.utils.Set (crate.call.ExecutionInput Args))
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type := self.["call_type"];
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input :=
            crate.call.utils.Set.Build_t exec_input;
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_exec_input : Notation.Dot "exec_input" := {
      Notation.dot := exec_input;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      CallType
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      RetType.
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType_2.
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Unset CallType)
        Args
        RetType.
    
    Definition call
        (self : Self)
        (callee : ImplE.AccountId)
        :
          M
            (self.call_builder.CallBuilder
              E
              (crate.call.utils.Set (self.call_builder.Call E))
              Args
              RetType) :=
      let* α0 := self.call_builder.Call::["new"] callee in
      let* α1 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t α0;
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α1;
        |}.
    
    Global Instance Method_call : Notation.Dot "call" := {
      Notation.dot := call;
    }.
    
    Definition delegate
        (self : Self)
        (code_hash : ImplE.Hash)
        :
          M
            (self.call_builder.CallBuilder
              E
              (crate.call.utils.Set (self.call_builder.DelegateCall E))
              Args
              RetType) :=
      let* α0 := self.call_builder.DelegateCall::["new"] code_hash in
      let* α1 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t α0;
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α1;
        |}.
    
    Global Instance Method_delegate : Notation.Dot "delegate" := {
      Notation.dot := delegate;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType_2.
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      Args
      RetType.
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.Call E))
        Args
        RetType.
    
    Definition gas_limit (self : Self) (gas_limit : crate.types.Gas) : M Self :=
      let* call_type := self.["call_type"].["value"] in
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t
              {|
                self.call_builder.Call.callee := call_type.["callee"];
                self.call_builder.Call.gas_limit := gas_limit;
                self.call_builder.Call.transferred_value :=
                  call_type.["transferred_value"];
              |};
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot := gas_limit;
    }.
    
    Definition transferred_value
        (self : Self)
        (transferred_value : ImplE.Balance)
        : M Self :=
      let* call_type := self.["call_type"].["value"] in
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t
              {|
                self.call_builder.Call.callee := call_type.["callee"];
                self.call_builder.Call.gas_limit := call_type.["gas_limit"];
                self.call_builder.Call.transferred_value := transferred_value;
              |};
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_transferred_value :
      Notation.Dot "transferred_value" := {
      Notation.dot := transferred_value;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      Args
      RetType.
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      Args
      RetType.
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.DelegateCall E))
        Args
        RetType.
    
    Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.call_builder.CallBuilder.call_type :=
            crate.call.utils.Set.Build_t
              {| self.call_builder.DelegateCall.code_hash := code_hash; |};
          self.call_builder.CallBuilder.call_flags := self.["call_flags"];
          self.call_builder.CallBuilder.exec_input := self.["exec_input"];
          self.call_builder.CallBuilder.return_type := self.["return_type"];
          self.call_builder.CallBuilder._phantom := α0;
        |}.
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      Args
      RetType.
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Definition params
        (self : Self)
        :
          M
            (self.call_builder.CallParams
              E
              (self.call_builder.Call E)
              Args
              RetType) :=
      let* α0 := self.["call_type"].["value"] in
      let* α1 := Default.default tt in
      let* α2 := self.["exec_input"].["value"] in
      Pure
        {|
          self.call_builder.CallParams.call_type := α0;
          self.call_builder.CallParams.call_flags := self.["call_flags"];
          self.call_builder.CallParams._return_type := α1;
          self.call_builder.CallParams.exec_input := α2;
          self.call_builder.CallParams._phantom := self.["_phantom"];
        |}.
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Definition params
        (self : Self)
        :
          M
            (self.call_builder.CallParams
              E
              (self.call_builder.DelegateCall E)
              Args
              RetType) :=
      let* α0 := self.["call_type"].["value"] in
      let* α1 := Default.default tt in
      let* α2 := self.["exec_input"].["value"] in
      Pure
        {|
          self.call_builder.CallParams.call_type := α0;
          self.call_builder.CallParams.call_flags := self.["call_flags"];
          self.call_builder.CallParams._return_type := α1;
          self.call_builder.CallParams.exec_input := α2;
          self.call_builder.CallParams._phantom := self.["_phantom"];
        |}.
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
    
    Definition params
        (self : Self)
        :
          M
            (self.call_builder.CallParams
              E
              (self.call_builder.Call E)
              crate.call.utils.EmptyArgumentList
              unit) :=
      let* α0 := self.["call_type"].["value"] in
      let* α1 := Default.default tt in
      let* α2 := Default.default tt in
      Pure
        {|
          self.call_builder.CallParams.call_type := α0;
          self.call_builder.CallParams.call_flags := self.["call_flags"];
          self.call_builder.CallParams._return_type := α1;
          self.call_builder.CallParams.exec_input := α2;
          self.call_builder.CallParams._phantom := self.["_phantom"];
        |}.
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset RetType).
    
    Definition params
        (self : Self)
        :
          M
            (self.call_builder.CallParams
              E
              (self.call_builder.DelegateCall E)
              crate.call.utils.EmptyArgumentList
              unit) :=
      let* α0 := self.["call_type"].["value"] in
      let* α1 := Default.default tt in
      let* α2 := Default.default tt in
      Pure
        {|
          self.call_builder.CallParams.call_type := α0;
          self.call_builder.CallParams.call_flags := self.["call_flags"];
          self.call_builder.CallParams._return_type := α1;
          self.call_builder.CallParams.exec_input := α2;
          self.call_builder.CallParams._phantom := self.["_phantom"];
        |}.
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.Call E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Definition invoke (self : Self) : M unit :=
      let* α0 := self.["params"] in
      α0.["invoke"].
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke
        (self : Self)
        : M (crate.Result (ink_primitives.MessageResult unit) crate.Error) :=
      let* α0 := self.["params"] in
      α0.["try_invoke"].
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.DelegateCall E))
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Definition invoke (self : Self) : M unit :=
      let* α0 := self.["params"] in
      α0.["invoke"].
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke (self : Self) : M (crate.Result unit crate.Error) :=
      let* α0 := self.["params"] in
      α0.["try_invoke"].
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.Call E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
    
    Definition invoke (self : Self) : M R :=
      let* α0 := self.["params"] in
      α0.["invoke"].
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke
        (self : Self)
        : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
      let* α0 := self.["params"] in
      α0.["try_invoke"].
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
  
  Module
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
    Definition
      Self
      :=
      self.call_builder.CallBuilder
        E
        (crate.call.utils.Set (self.call_builder.DelegateCall E))
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set (crate.call.utils.ReturnType R)).
    
    Definition invoke (self : Self) : M R :=
      let* α0 := self.["params"] in
      α0.["invoke"].
    
    Global Instance Method_invoke : Notation.Dot "invoke" := {
      Notation.dot := invoke;
    }.
    
    Definition try_invoke (self : Self) : M (crate.Result R crate.Error) :=
      let* α0 := self.["params"] in
      α0.["try_invoke"].
    
    Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
      Notation.dot := try_invoke;
    }.
  End
    Implself.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
End call_builder.

Module CallParams.
  Record t : Set := {
    call_type : CallType;
    call_flags : crate.backend.CallFlags;
    _return_type : crate.call.utils.ReturnType R;
    exec_input : crate.call.ExecutionInput Args;
    _phantom : core.marker.PhantomData ( -> E);
  }.
  
  Global Instance Get_call_type : Notation.Dot "call_type" := {
    Notation.dot '(Build_t x0 _ _ _ _) := x0;
  }.
  Global Instance Get_call_flags : Notation.Dot "call_flags" := {
    Notation.dot '(Build_t _ x1 _ _ _) := x1;
  }.
  Global Instance Get__return_type : Notation.Dot "_return_type" := {
    Notation.dot '(Build_t _ _ x2 _ _) := x2;
  }.
  Global Instance Get_exec_input : Notation.Dot "exec_input" := {
    Notation.dot '(Build_t _ _ _ x3 _) := x3;
  }.
  Global Instance Get__phantom : Notation.Dot "_phantom" := {
    Notation.dot '(Build_t _ _ _ _ x4) := x4;
  }.
End CallParams.
Definition CallParams : Set := CallParams.t.

Module Impl__crate_fmt_Debug_for_self_call_builder_CallParams_E_CallType_Args_R.
  Definition Self := self.call_builder.CallParams E CallType Args R.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field5_finish"]
      f
      "CallParams"
      "call_type"
      (addr_of self.["call_type"])
      "call_flags"
      (addr_of self.["call_flags"])
      "_return_type"
      (addr_of self.["_return_type"])
      "exec_input"
      (addr_of self.["exec_input"])
      "_phantom"
      (addr_of (addr_of self.["_phantom"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I E CallType Args R : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_self_call_builder_CallParams_E_CallType_Args_R.

Module Implself.call_builder.CallParams E CallType Args R_2.
  Definition Self := self.call_builder.CallParams E CallType Args R.
  
  Definition call_flags (self : ref Self) : M (ref crate.backend.CallFlags) :=
    Pure (addr_of self.["call_flags"]).
  
  Global Instance Method_call_flags : Notation.Dot "call_flags" := {
    Notation.dot := call_flags;
  }.
  
  Definition exec_input
      (self : ref Self)
      : M (ref (crate.call.ExecutionInput Args)) :=
    Pure (addr_of self.["exec_input"]).
  
  Global Instance Method_exec_input : Notation.Dot "exec_input" := {
    Notation.dot := exec_input;
  }.
End Implself.call_builder.CallParams E CallType Args R_2.

Module Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_3.
  Definition
    Self
    :=
    self.call_builder.CallParams E (self.call_builder.Call E) Args R.
  
  Definition callee (self : ref Self) : M (ref ImplE.AccountId) :=
    Pure (addr_of self.["call_type"].["callee"]).
  
  Global Instance Method_callee : Notation.Dot "callee" := {
    Notation.dot := callee;
  }.
  
  Definition gas_limit (self : ref Self) : M crate.types.Gas :=
    Pure self.["call_type"].["gas_limit"].
  
  Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot := gas_limit;
  }.
  
  Definition transferred_value (self : ref Self) : M (ref ImplE.Balance) :=
    Pure (addr_of self.["call_type"].["transferred_value"]).
  
  Global Instance Method_transferred_value :
    Notation.Dot "transferred_value" := {
    Notation.dot := transferred_value;
  }.
End Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_3.

Module
  Implself.call_builder.CallParams
    E
    (self.call_builder.DelegateCall E)
    Args
    R_3.
  Definition
    Self
    :=
    self.call_builder.CallParams E (self.call_builder.DelegateCall E) Args R.
  
  Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
    Pure (addr_of self.["call_type"].["code_hash"]).
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
End
  Implself.call_builder.CallParams
    E
    (self.call_builder.DelegateCall E)
    Args
    R_3.

Module Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_4.
  Definition
    Self
    :=
    self.call_builder.CallParams E (self.call_builder.Call E) Args R.
  
  Definition invoke (self : ref Self) : M R :=
    let* α0 := crate.invoke_contract self in
    let* α1 :=
      α0.["unwrap_or_else"]
        (fun env_error =>
          let* α0 := format_argument::["new_debug"] (addr_of env_error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Cross-contract call failed with " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    α1.["unwrap_or_else"]
      (fun lang_error =>
        let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "Cross-contract call failed with " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke
      (self : ref Self)
      : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
    crate.invoke_contract self.
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End Implself.call_builder.CallParams E (self.call_builder.Call E) Args R_4.

Module
  Implself.call_builder.CallParams
    E
    (self.call_builder.DelegateCall E)
    Args
    R_4.
  Definition
    Self
    :=
    self.call_builder.CallParams E (self.call_builder.DelegateCall E) Args R.
  
  Definition invoke (self : ref Self) : M R :=
    let* α0 := crate.invoke_contract_delegate self in
    α0.["unwrap_or_else"]
      (fun env_error =>
        let* α0 := format_argument::["new_debug"] (addr_of env_error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "Cross-contract call failed with " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke (self : ref Self) : M (crate.Result R crate.Error) :=
    crate.invoke_contract_delegate self.
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End
  Implself.call_builder.CallParams
    E
    (self.call_builder.DelegateCall E)
    Args
    R_4.

Definition build_call
    {E : Set}
    `{Environment.Trait E}
    (_ : unit)
    :
      M
        (self.call_builder.CallBuilder
          E
          (crate.call.utils.Unset (self.call_builder.Call E))
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
  let* α0 := Default.default tt in
  let* α1 := Default.default tt in
  let* α2 := Default.default tt in
  let* α3 := Default.default tt in
  let* α4 := Default.default tt in
  Pure
    {|
      self.call_builder.CallBuilder.call_type := α0;
      self.call_builder.CallBuilder.call_flags := α1;
      self.call_builder.CallBuilder.exec_input := α2;
      self.call_builder.CallBuilder.return_type := α3;
      self.call_builder.CallBuilder._phantom := α4;
    |}.

Module Call.
  Record t : Set := {
    callee : ImplE.AccountId;
    gas_limit : crate.types.Gas;
    transferred_value : ImplE.Balance;
  }.
  
  Global Instance Get_callee : Notation.Dot "callee" := {
    Notation.dot '(Build_t x0 _ _) := x0;
  }.
  Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot '(Build_t _ x1 _) := x1;
  }.
  Global Instance Get_transferred_value : Notation.Dot "transferred_value" := {
    Notation.dot '(Build_t _ _ x2) := x2;
  }.
End Call.
Definition Call : Set := Call.t.

Module Impl__crate_clone_Clone_for_self_call_builder_Call_E.
  Definition Self := self.call_builder.Call E.
  
  Definition clone (self : ref Self) : M (self.call_builder.Call E) :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["callee"]) in
    let* α1 := _crate.clone.Clone.clone (addr_of self.["gas_limit"]) in
    let* α2 := _crate.clone.Clone.clone (addr_of self.["transferred_value"]) in
    Pure
      {|
        self.call_builder.Call.callee := α0;
        self.call_builder.Call.gas_limit := α1;
        self.call_builder.Call.transferred_value := α2;
      |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I E : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_self_call_builder_Call_E.

Module Implself.call_builder.Call E_3.
  Definition Self := self.call_builder.Call E.
  
  Definition new (callee : ImplE.AccountId) : M Self :=
    let* α0 := Default.default tt in
    let* α1 := ImplE.Balance::["zero"] tt in
    Pure
      {|
        Self.callee := callee;
        Self.gas_limit := α0;
        Self.transferred_value := α1;
      |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
End Implself.call_builder.Call E_3.

Module Implself.call_builder.Call E_4.
  Definition Self := self.call_builder.Call E.
  
  Definition gas_limit (self : Self) (gas_limit : crate.types.Gas) : M Self :=
    Pure
      {|
        self.call_builder.Call.callee := self.["callee"];
        self.call_builder.Call.gas_limit := gas_limit;
        self.call_builder.Call.transferred_value := self.["transferred_value"];
      |}.
  
  Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot := gas_limit;
  }.
  
  Definition transferred_value
      (self : Self)
      (transferred_value : ImplE.Balance)
      : M Self :=
    Pure
      {|
        self.call_builder.Call.callee := self.["callee"];
        self.call_builder.Call.gas_limit := self.["gas_limit"];
        self.call_builder.Call.transferred_value := transferred_value;
      |}.
  
  Global Instance Method_transferred_value :
    Notation.Dot "transferred_value" := {
    Notation.dot := transferred_value;
  }.
End Implself.call_builder.Call E_4.

Module DelegateCall.
  Record t : Set := {
    code_hash : ImplE.Hash;
  }.
  
  Global Instance Get_code_hash : Notation.Dot "code_hash" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End DelegateCall.
Definition DelegateCall : Set := DelegateCall.t.

Module Implself.call_builder.DelegateCall E_3.
  Definition Self := self.call_builder.DelegateCall E.
  
  Definition new (code_hash : ImplE.Hash) : M Self :=
    Pure {| self.call_builder.DelegateCall.code_hash := code_hash; |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
End Implself.call_builder.DelegateCall E_3.

Module Implself.call_builder.DelegateCall E_4.
  Definition Self := self.call_builder.DelegateCall E.
  
  Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
    Pure {| self.call_builder.DelegateCall.code_hash := code_hash; |}.
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
End Implself.call_builder.DelegateCall E_4.

Module CallBuilder.
  Record t : Set := {
    call_type : CallType;
    call_flags : crate.backend.CallFlags;
    exec_input : Args;
    return_type : RetType;
    _phantom : core.marker.PhantomData ( -> E);
  }.
  
  Global Instance Get_call_type : Notation.Dot "call_type" := {
    Notation.dot '(Build_t x0 _ _ _ _) := x0;
  }.
  Global Instance Get_call_flags : Notation.Dot "call_flags" := {
    Notation.dot '(Build_t _ x1 _ _ _) := x1;
  }.
  Global Instance Get_exec_input : Notation.Dot "exec_input" := {
    Notation.dot '(Build_t _ _ x2 _ _) := x2;
  }.
  Global Instance Get_return_type : Notation.Dot "return_type" := {
    Notation.dot '(Build_t _ _ _ x3 _) := x3;
  }.
  Global Instance Get__phantom : Notation.Dot "_phantom" := {
    Notation.dot '(Build_t _ _ _ _ x4) := x4;
  }.
End CallBuilder.
Definition CallBuilder : Set := CallBuilder.t.

Module
    Impl__crate_clone_Clone_for_self_call_builder_CallBuilder_E_CallType_Args_RetType.
  Definition Self := self.call_builder.CallBuilder E CallType Args RetType.
  
  Definition clone
      (self : ref Self)
      : M (self.call_builder.CallBuilder E CallType Args RetType) :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["call_type"]) in
    let* α1 := _crate.clone.Clone.clone (addr_of self.["call_flags"]) in
    let* α2 := _crate.clone.Clone.clone (addr_of self.["exec_input"]) in
    let* α3 := _crate.clone.Clone.clone (addr_of self.["return_type"]) in
    let* α4 := _crate.clone.Clone.clone (addr_of self.["_phantom"]) in
    Pure
      {|
        self.call_builder.CallBuilder.call_type := α0;
        self.call_builder.CallBuilder.call_flags := α1;
        self.call_builder.CallBuilder.exec_input := α2;
        self.call_builder.CallBuilder.return_type := α3;
        self.call_builder.CallBuilder._phantom := α4;
      |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I E CallType Args RetType : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End
  Impl__crate_clone_Clone_for_self_call_builder_CallBuilder_E_CallType_Args_RetType.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Unset CallType)
    Args
    RetType_3.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType.
  
  Definition call_type
      (self : Self)
      (call_type : NewCallType)
      :
        M
          (self.call_builder.CallBuilder
            E
            (crate.call.utils.Set NewCallType)
            Args
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t call_type;
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_call_type : Notation.Dot "call_type" := {
    Notation.dot := call_type;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Unset CallType)
    Args
    RetType_3.

Module Implself.call_builder.CallBuilder E CallType Args RetType_2.
  Definition Self := self.call_builder.CallBuilder E CallType Args RetType.
  
  Definition call_flags
      (self : Self)
      (call_flags : crate.backend.CallFlags)
      : M (self.call_builder.CallBuilder E CallType Args RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type := self.["call_type"];
        self.call_builder.CallBuilder.call_flags := call_flags;
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_call_flags : Notation.Dot "call_flags" := {
    Notation.dot := call_flags;
  }.
End Implself.call_builder.CallBuilder E CallType Args RetType_2.

Module
  Implself.call_builder.CallBuilder
    E
    CallType
    Args
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      CallType
      Args
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Definition returns
      (self : Self)
      :
        M
          (self.call_builder.CallBuilder
            E
            CallType
            Args
            (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
    let* α0 := Default.default tt in
    let* α1 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type := self.["call_type"];
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type :=
          crate.call.utils.Set.Build_t α0;
        self.call_builder.CallBuilder._phantom := α1;
      |}.
  
  Global Instance Method_returns : Notation.Dot "returns" := {
    Notation.dot := returns;
  }.
End
  Implself.call_builder.CallBuilder
    E
    CallType
    Args
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.

Module
  Implself.call_builder.CallBuilder
    E
    CallType
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    RetType_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      CallType
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      RetType.
  
  Definition exec_input
      (self : Self)
      (exec_input : crate.call.ExecutionInput Args)
      :
        M
          (self.call_builder.CallBuilder
            E
            CallType
            (crate.call.utils.Set (crate.call.ExecutionInput Args))
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type := self.["call_type"];
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input :=
          crate.call.utils.Set.Build_t exec_input;
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_exec_input : Notation.Dot "exec_input" := {
    Notation.dot := exec_input;
  }.
End
  Implself.call_builder.CallBuilder
    E
    CallType
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    RetType_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Unset CallType)
    Args
    RetType_4.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Unset CallType)
      Args
      RetType.
  
  Definition call
      (self : Self)
      (callee : ImplE.AccountId)
      :
        M
          (self.call_builder.CallBuilder
            E
            (crate.call.utils.Set (self.call_builder.Call E))
            Args
            RetType) :=
    let* α0 := self.call_builder.Call::["new"] callee in
    let* α1 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t α0;
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α1;
      |}.
  
  Global Instance Method_call : Notation.Dot "call" := {
    Notation.dot := call;
  }.
  
  Definition delegate
      (self : Self)
      (code_hash : ImplE.Hash)
      :
        M
          (self.call_builder.CallBuilder
            E
            (crate.call.utils.Set (self.call_builder.DelegateCall E))
            Args
            RetType) :=
    let* α0 := self.call_builder.DelegateCall::["new"] code_hash in
    let* α1 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t α0;
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α1;
      |}.
  
  Global Instance Method_delegate : Notation.Dot "delegate" := {
    Notation.dot := delegate;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Unset CallType)
    Args
    RetType_4.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    Args
    RetType_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      Args
      RetType.
  
  Definition gas_limit (self : Self) (gas_limit : crate.types.Gas) : M Self :=
    let* call_type := self.["call_type"].["value"] in
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t
            {|
              self.call_builder.Call.callee := call_type.["callee"];
              self.call_builder.Call.gas_limit := gas_limit;
              self.call_builder.Call.transferred_value :=
                call_type.["transferred_value"];
            |};
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot := gas_limit;
  }.
  
  Definition transferred_value
      (self : Self)
      (transferred_value : ImplE.Balance)
      : M Self :=
    let* call_type := self.["call_type"].["value"] in
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t
            {|
              self.call_builder.Call.callee := call_type.["callee"];
              self.call_builder.Call.gas_limit := call_type.["gas_limit"];
              self.call_builder.Call.transferred_value := transferred_value;
            |};
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_transferred_value :
    Notation.Dot "transferred_value" := {
    Notation.dot := transferred_value;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    Args
    RetType_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    Args
    RetType_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      Args
      RetType.
  
  Definition code_hash (self : Self) (code_hash : ImplE.Hash) : M Self :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.call_builder.CallBuilder.call_type :=
          crate.call.utils.Set.Build_t
            {| self.call_builder.DelegateCall.code_hash := code_hash; |};
        self.call_builder.CallBuilder.call_flags := self.["call_flags"];
        self.call_builder.CallBuilder.exec_input := self.["exec_input"];
        self.call_builder.CallBuilder.return_type := self.["return_type"];
        self.call_builder.CallBuilder._phantom := α0;
      |}.
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    Args
    RetType_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Definition params
      (self : Self)
      :
        M
          (self.call_builder.CallParams
            E
            (self.call_builder.Call E)
            Args
            RetType) :=
    let* α0 := self.["call_type"].["value"] in
    let* α1 := Default.default tt in
    let* α2 := self.["exec_input"].["value"] in
    Pure
      {|
        self.call_builder.CallParams.call_type := α0;
        self.call_builder.CallParams.call_flags := self.["call_flags"];
        self.call_builder.CallParams._return_type := α1;
        self.call_builder.CallParams.exec_input := α2;
        self.call_builder.CallParams._phantom := self.["_phantom"];
      |}.
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Definition params
      (self : Self)
      :
        M
          (self.call_builder.CallParams
            E
            (self.call_builder.DelegateCall E)
            Args
            RetType) :=
    let* α0 := self.["call_type"].["value"] in
    let* α1 := Default.default tt in
    let* α2 := self.["exec_input"].["value"] in
    Pure
      {|
        self.call_builder.CallParams.call_type := α0;
        self.call_builder.CallParams.call_flags := self.["call_flags"];
        self.call_builder.CallParams._return_type := α1;
        self.call_builder.CallParams.exec_input := α2;
        self.call_builder.CallParams._phantom := self.["_phantom"];
      |}.
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset RetType)_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
  
  Definition params
      (self : Self)
      :
        M
          (self.call_builder.CallParams
            E
            (self.call_builder.Call E)
            crate.call.utils.EmptyArgumentList
            unit) :=
    let* α0 := self.["call_type"].["value"] in
    let* α1 := Default.default tt in
    let* α2 := Default.default tt in
    Pure
      {|
        self.call_builder.CallParams.call_type := α0;
        self.call_builder.CallParams.call_flags := self.["call_flags"];
        self.call_builder.CallParams._return_type := α1;
        self.call_builder.CallParams.exec_input := α2;
        self.call_builder.CallParams._phantom := self.["_phantom"];
      |}.
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset RetType)_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset RetType)_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset RetType).
  
  Definition params
      (self : Self)
      :
        M
          (self.call_builder.CallParams
            E
            (self.call_builder.DelegateCall E)
            crate.call.utils.EmptyArgumentList
            unit) :=
    let* α0 := self.["call_type"].["value"] in
    let* α1 := Default.default tt in
    let* α2 := Default.default tt in
    Pure
      {|
        self.call_builder.CallParams.call_type := α0;
        self.call_builder.CallParams.call_flags := self.["call_flags"];
        self.call_builder.CallParams._return_type := α1;
        self.call_builder.CallParams.exec_input := α2;
        self.call_builder.CallParams._phantom := self.["_phantom"];
      |}.
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset RetType)_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Definition invoke (self : Self) : M unit :=
    let* α0 := self.["params"] in
    α0.["invoke"].
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke
      (self : Self)
      : M (crate.Result (ink_primitives.MessageResult unit) crate.Error) :=
    let* α0 := self.["params"] in
    α0.["try_invoke"].
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Definition invoke (self : Self) : M unit :=
    let* α0 := self.["params"] in
    α0.["invoke"].
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke (self : Self) : M (crate.Result unit crate.Error) :=
    let* α0 := self.["params"] in
    α0.["try_invoke"].
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType R))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.Call E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
  
  Definition invoke (self : Self) : M R :=
    let* α0 := self.["params"] in
    α0.["invoke"].
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke
      (self : Self)
      : M (crate.Result (ink_primitives.MessageResult R) crate.Error) :=
    let* α0 := self.["params"] in
    α0.["try_invoke"].
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.Call E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType R))_2.

Module
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType R))_2.
  Definition
    Self
    :=
    self.call_builder.CallBuilder
      E
      (crate.call.utils.Set (self.call_builder.DelegateCall E))
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set (crate.call.utils.ReturnType R)).
  
  Definition invoke (self : Self) : M R :=
    let* α0 := self.["params"] in
    α0.["invoke"].
  
  Global Instance Method_invoke : Notation.Dot "invoke" := {
    Notation.dot := invoke;
  }.
  
  Definition try_invoke (self : Self) : M (crate.Result R crate.Error) :=
    let* α0 := self.["params"] in
    α0.["try_invoke"].
  
  Global Instance Method_try_invoke : Notation.Dot "try_invoke" := {
    Notation.dot := try_invoke;
  }.
End
  Implself.call_builder.CallBuilder
    E
    (crate.call.utils.Set (self.call_builder.DelegateCall E))
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set (crate.call.utils.ReturnType R))_2.

Module common.
  Module ReturnType.
    Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
    
    Global Instance Get_0 : Notation.Dot 0 := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End ReturnType.
  Definition ReturnType := ReturnType.t.
  
  Module Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.
    Definition Self := crate.call.utils.ReturnType T.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "ReturnType"
        (addr_of (addr_of (self.[0]))).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I T : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.
  
  Module Impl_Clone_for_crate_call_utils_ReturnType_T.
    Definition Self := crate.call.utils.ReturnType T.
    
    Definition clone (self : ref Self) : M Self :=
      let* α0 := Default.default tt in
      Self α0.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I T : Clone.Trait Self := {
      Clone.clone := clone;
    }.
  End Impl_Clone_for_crate_call_utils_ReturnType_T.
  
  Module Impl_Copy_for_crate_call_utils_ReturnType_T.
    Definition Self := crate.call.utils.ReturnType T.
    
    Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
  End Impl_Copy_for_crate_call_utils_ReturnType_T.
  
  Module Impl_Default_for_crate_call_utils_ReturnType_T.
    Definition Self := crate.call.utils.ReturnType T.
    
    Definition default (_ : unit) : M Self :=
      let* α0 := Default.default tt in
      Self α0.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I T : Default.Trait Self := {
      Default.default := default;
    }.
  End Impl_Default_for_crate_call_utils_ReturnType_T.
  
  Module Set.
    Record t : Set := { _ : T;}.
    
    Global Instance Get_0 : Notation.Dot 0 := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End Set.
  Definition Set := Set.t.
  
  Module Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.
    Definition Self := crate.call.utils.Set T.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "Set"
        (addr_of (addr_of (self.[0]))).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I T : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.
  
  Module Impl__crate_marker_Copy_for_crate_call_utils_Set_T.
    Definition Self := crate.call.utils.Set T.
    
    Global Instance I T : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_call_utils_Set_T.
  
  Module Impl__crate_clone_Clone_for_crate_call_utils_Set_T.
    Definition Self := crate.call.utils.Set T.
    
    Definition clone (self : ref Self) : M (crate.call.utils.Set T) :=
      let* α0 := _crate.clone.Clone.clone (addr_of (self.[0])) in
      Pure (crate.call.utils.Set.Build_t α0).
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I T : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_call_utils_Set_T.
  
  Module Implcrate.call.utils.Set T_2.
    Definition Self := crate.call.utils.Set T.
    
    Definition value (self : Self) : M T := Pure (self.[0]).
    
    Global Instance Method_value : Notation.Dot "value" := {
      Notation.dot := value;
    }.
  End Implcrate.call.utils.Set T_2.
  
  Module Unset.
    Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
    
    Global Instance Get_0 : Notation.Dot 0 := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End Unset.
  Definition Unset := Unset.t.
  
  Module Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.
    Definition Self := crate.call.utils.Unset T.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "Unset"
        (addr_of (addr_of (self.[0]))).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I T : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.
  
  Module Impl_Clone_for_crate_call_utils_Unset_T.
    Definition Self := crate.call.utils.Unset T.
    
    Definition clone (self : ref Self) : M Self :=
      let* α0 := Default.default tt in
      Self α0.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I T : Clone.Trait Self := {
      Clone.clone := clone;
    }.
  End Impl_Clone_for_crate_call_utils_Unset_T.
  
  Module Impl_Copy_for_crate_call_utils_Unset_T.
    Definition Self := crate.call.utils.Unset T.
    
    Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
  End Impl_Copy_for_crate_call_utils_Unset_T.
  
  Module Impl_Default_for_crate_call_utils_Unset_T.
    Definition Self := crate.call.utils.Unset T.
    
    Definition default (_ : unit) : M Self :=
      let* α0 := Default.default tt in
      Self α0.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I T : Default.Trait Self := {
      Default.default := default;
    }.
  End Impl_Default_for_crate_call_utils_Unset_T.
  
  Module Unwrap.
    Class Trait (Self : Set) : Set := {
      Output : Set;
      unwrap_or_else : Self -> F -> (M ImplSelf.Output);
    }.
    
    Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
      Notation.dot := Output;
    }.
    Global Instance Method_unwrap_or_else `(Trait)
      : Notation.Dot "unwrap_or_else" := {
      Notation.dot := unwrap_or_else;
    }.
  End Unwrap.
  
  Module Impl_Unwrap_for_crate_call_utils_Unset_T.
    Definition Self := crate.call.utils.Unset T.
    
    Definition Output : Set := T.
    
    Definition unwrap_or_else (self : Self) (f : F) : M ImplSelf.Output := f tt.
    
    Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
      Notation.dot := unwrap_or_else;
    }.
    
    Global Instance I T : Unwrap.Trait Self := {
      Unwrap.unwrap_or_else := unwrap_or_else;
    }.
  End Impl_Unwrap_for_crate_call_utils_Unset_T.
  
  Module Impl_Unwrap_for_crate_call_utils_Set_T.
    Definition Self := crate.call.utils.Set T.
    
    Definition Output : Set := T.
    
    Definition unwrap_or_else (self : Self) (Pattern : F) : M ImplSelf.Output :=
      self.["value"].
    
    Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
      Notation.dot := unwrap_or_else;
    }.
    
    Global Instance I T : Unwrap.Trait Self := {
      Unwrap.unwrap_or_else := unwrap_or_else;
    }.
  End Impl_Unwrap_for_crate_call_utils_Set_T.
End common.

Module ReturnType.
  Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
  
  Global Instance Get_0 : Notation.Dot 0 := {
    Notation.dot '(Build_t x0) := x0;
  }.
End ReturnType.
Definition ReturnType := ReturnType.t.

Module Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.
  Definition Self := crate.call.utils.ReturnType T.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_tuple_field1_finish"]
      f
      "ReturnType"
      (addr_of (addr_of (self.[0]))).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I T : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_call_utils_ReturnType_T.

Module Impl_Clone_for_crate_call_utils_ReturnType_T.
  Definition Self := crate.call.utils.ReturnType T.
  
  Definition clone (self : ref Self) : M Self :=
    let* α0 := Default.default tt in
    Self α0.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I T : Clone.Trait Self := {
    Clone.clone := clone;
  }.
End Impl_Clone_for_crate_call_utils_ReturnType_T.

Module Impl_Copy_for_crate_call_utils_ReturnType_T.
  Definition Self := crate.call.utils.ReturnType T.
  
  Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
End Impl_Copy_for_crate_call_utils_ReturnType_T.

Module Impl_Default_for_crate_call_utils_ReturnType_T.
  Definition Self := crate.call.utils.ReturnType T.
  
  Definition default (_ : unit) : M Self :=
    let* α0 := Default.default tt in
    Self α0.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I T : Default.Trait Self := {
    Default.default := default;
  }.
End Impl_Default_for_crate_call_utils_ReturnType_T.

Module Set.
  Record t : Set := { _ : T;}.
  
  Global Instance Get_0 : Notation.Dot 0 := {
    Notation.dot '(Build_t x0) := x0;
  }.
End Set.
Definition Set := Set.t.

Module Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.
  Definition Self := crate.call.utils.Set T.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_tuple_field1_finish"]
      f
      "Set"
      (addr_of (addr_of (self.[0]))).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I T : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_call_utils_Set_T.

Module Impl__crate_marker_Copy_for_crate_call_utils_Set_T.
  Definition Self := crate.call.utils.Set T.
  
  Global Instance I T : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_call_utils_Set_T.

Module Impl__crate_clone_Clone_for_crate_call_utils_Set_T.
  Definition Self := crate.call.utils.Set T.
  
  Definition clone (self : ref Self) : M (crate.call.utils.Set T) :=
    let* α0 := _crate.clone.Clone.clone (addr_of (self.[0])) in
    Pure (crate.call.utils.Set.Build_t α0).
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I T : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_call_utils_Set_T.

Module Implcrate.call.utils.Set T_3.
  Definition Self := crate.call.utils.Set T.
  
  Definition value (self : Self) : M T := Pure (self.[0]).
  
  Global Instance Method_value : Notation.Dot "value" := {
    Notation.dot := value;
  }.
End Implcrate.call.utils.Set T_3.

Module Unset.
  Record t : Set := { _ : core.marker.PhantomData ( -> T);}.
  
  Global Instance Get_0 : Notation.Dot 0 := {
    Notation.dot '(Build_t x0) := x0;
  }.
End Unset.
Definition Unset := Unset.t.

Module Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.
  Definition Self := crate.call.utils.Unset T.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_tuple_field1_finish"]
      f
      "Unset"
      (addr_of (addr_of (self.[0]))).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I T : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_call_utils_Unset_T.

Module Impl_Clone_for_crate_call_utils_Unset_T.
  Definition Self := crate.call.utils.Unset T.
  
  Definition clone (self : ref Self) : M Self :=
    let* α0 := Default.default tt in
    Self α0.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I T : Clone.Trait Self := {
    Clone.clone := clone;
  }.
End Impl_Clone_for_crate_call_utils_Unset_T.

Module Impl_Copy_for_crate_call_utils_Unset_T.
  Definition Self := crate.call.utils.Unset T.
  
  Global Instance I T : Copy.Trait Self := Copy.Build_Class _.
End Impl_Copy_for_crate_call_utils_Unset_T.

Module Impl_Default_for_crate_call_utils_Unset_T.
  Definition Self := crate.call.utils.Unset T.
  
  Definition default (_ : unit) : M Self :=
    let* α0 := Default.default tt in
    Self α0.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I T : Default.Trait Self := {
    Default.default := default;
  }.
End Impl_Default_for_crate_call_utils_Unset_T.

Module Unwrap.
  Class Trait (Self : Set) : Set := {
    Output : Set;
    unwrap_or_else : Self -> F -> (M ImplSelf.Output);
  }.
  
  Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
    Notation.dot := Output;
  }.
  Global Instance Method_unwrap_or_else `(Trait)
    : Notation.Dot "unwrap_or_else" := {
    Notation.dot := unwrap_or_else;
  }.
End Unwrap.

Module Impl_Unwrap_for_crate_call_utils_Unset_T.
  Definition Self := crate.call.utils.Unset T.
  
  Definition Output : Set := T.
  
  Definition unwrap_or_else (self : Self) (f : F) : M ImplSelf.Output := f tt.
  
  Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
    Notation.dot := unwrap_or_else;
  }.
  
  Global Instance I T : Unwrap.Trait Self := {
    Unwrap.unwrap_or_else := unwrap_or_else;
  }.
End Impl_Unwrap_for_crate_call_utils_Unset_T.

Module Impl_Unwrap_for_crate_call_utils_Set_T.
  Definition Self := crate.call.utils.Set T.
  
  Definition Output : Set := T.
  
  Definition unwrap_or_else (self : Self) (Pattern : F) : M ImplSelf.Output :=
    self.["value"].
  
  Global Instance Method_unwrap_or_else : Notation.Dot "unwrap_or_else" := {
    Notation.dot := unwrap_or_else;
  }.
  
  Global Instance I T : Unwrap.Trait Self := {
    Unwrap.unwrap_or_else := unwrap_or_else;
  }.
End Impl_Unwrap_for_crate_call_utils_Set_T.

Module create_builder.
  Module state.
    Module Salt.
      Inductive t : Set :=
      .
    End Salt.
    Definition Salt := Salt.t.
  End state.
  
  Module FromAccountId.
    Class Trait (T Self : Set) : Set := {
      from_account_id : Environment.AccountId -> (M Self);
    }.
    
    Global Instance Method_from_account_id `(Trait)
      : Notation.Dot "from_account_id" := {
      Notation.dot := from_account_id;
    }.
  End FromAccountId.
  
  Module ConstructorReturnType.
    Class Trait (C Self : Set) : Set := {
      IS_RESULT : bool;
      Output : Set;
      Error : Set;
      ok : C -> (M ImplSelf.Output);
    }.
    
    Global Instance Method_IS_RESULT `(Trait) : Notation.Dot "IS_RESULT" := {
      Notation.dot := IS_RESULT;
    }.
    Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
      Notation.dot := Output;
    }.
    Global Instance Method_Error `(Trait) : Notation.Dot "Error" := {
      Notation.dot := Error;
    }.
    Global Instance Method_ok `(Trait) : Notation.Dot "ok" := {
      Notation.dot := ok;
    }.
    Global Instance Method_err `(Trait) : Notation.Dot "err" := {
      Notation.dot (_err : ImplSelf.Error) :=
        (Pure None
        : M (Option ImplSelf.Output));
    }.
  End ConstructorReturnType.
  
  Module Impl_ConstructorReturnType_for_C.
    Definition Self := C.
    
    Definition Output : Set := C.
    
    Definition Error : Set := unit.
    
    Definition ok (value : C) : M ImplSelf.Output := Pure value.
    
    Global Instance AssociatedFunction_ok : Notation.DoubleColon Self "ok" := {
      Notation.double_colon := ok;
    }.
    
    Global Instance I C : ConstructorReturnType.Trait Self C := {
      ConstructorReturnType.ok := ok;
    }.
  End Impl_ConstructorReturnType_for_C.
  
  Module Impl_ConstructorReturnType_for_core_result_Result_C_E.
    Definition Self := core.result.Result C E.
    
    Definition IS_RESULT := Pure true.
    
    Global Instance AssociatedFunction_IS_RESULT :
      Notation.DoubleColon Self "IS_RESULT" := {
      Notation.double_colon := IS_RESULT;
    }.
    
    Definition Output : Set := core.result.Result C E.
    
    Definition Error : Set := E.
    
    Definition ok (value : C) : M ImplSelf.Output := Pure (Ok value).
    
    Global Instance AssociatedFunction_ok : Notation.DoubleColon Self "ok" := {
      Notation.double_colon := ok;
    }.
    
    Definition err (err : ImplSelf.Error) : M (Option ImplSelf.Output) :=
      Pure (Some (Err err)).
    
    Global Instance AssociatedFunction_err :
      Notation.DoubleColon Self "err" := {
      Notation.double_colon := err;
    }.
    
    Global Instance I C E : ConstructorReturnType.Trait Self C := {
      ConstructorReturnType.ok := ok;
    }.
  End Impl_ConstructorReturnType_for_core_result_Result_C_E.
  
  Module CreateParams.
    Record t : Set := {
      code_hash : ImplE.Hash;
      gas_limit : u64;
      endowment : ImplE.Balance;
      exec_input : crate.call.ExecutionInput Args;
      salt_bytes : Salt;
      _return_type : crate.call.utils.ReturnType R;
      _phantom : core.marker.PhantomData ( -> ContractRef);
    }.
    
    Global Instance Get_code_hash : Notation.Dot "code_hash" := {
      Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
    }.
    Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
    }.
    Global Instance Get_endowment : Notation.Dot "endowment" := {
      Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
    }.
    Global Instance Get_exec_input : Notation.Dot "exec_input" := {
      Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
    }.
    Global Instance Get_salt_bytes : Notation.Dot "salt_bytes" := {
      Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
    }.
    Global Instance Get__return_type : Notation.Dot "_return_type" := {
      Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
    }.
    Global Instance Get__phantom : Notation.Dot "_phantom" := {
      Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
    }.
  End CreateParams.
  Definition CreateParams : Set := CreateParams.t.
  
  Module
      Impl__crate_fmt_Debug_for_self_create_builder_CreateParams_E_ContractRef_Args_Salt_R.
    Definition
      Self
      :=
      self.create_builder.CreateParams E ContractRef Args Salt R.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      let names :=
        addr_of
          [
            "code_hash";
            "gas_limit";
            "endowment";
            "exec_input";
            "salt_bytes";
            "_return_type";
            "_phantom"
          ] in
      let values :=
        addr_of
          [
            addr_of self.["code_hash"];
            addr_of self.["gas_limit"];
            addr_of self.["endowment"];
            addr_of self.["exec_input"];
            addr_of self.["salt_bytes"];
            addr_of self.["_return_type"];
            addr_of (addr_of self.["_phantom"])
          ] in
      _crate.fmt.Formatter::["debug_struct_fields_finish"]
        f
        "CreateParams"
        names
        values.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I E ContractRef Args Salt R : _crate.fmt.Debug.Trait Self :=
      {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End
    Impl__crate_fmt_Debug_for_self_create_builder_CreateParams_E_ContractRef_Args_Salt_R.
  
  Module Implself.create_builder.CreateParams E ContractRef Args Salt R.
    Definition
      Self
      :=
      self.create_builder.CreateParams E ContractRef Args Salt R.
    
    Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
      Pure (addr_of self.["code_hash"]).
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
    
    Definition gas_limit (self : ref Self) : M u64 := Pure self.["gas_limit"].
    
    Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot := gas_limit;
    }.
    
    Definition endowment (self : ref Self) : M (ref ImplE.Balance) :=
      Pure (addr_of self.["endowment"]).
    
    Global Instance Method_endowment : Notation.Dot "endowment" := {
      Notation.dot := endowment;
    }.
    
    Definition exec_input
        (self : ref Self)
        : M (ref (crate.call.ExecutionInput Args)) :=
      Pure (addr_of self.["exec_input"]).
    
    Global Instance Method_exec_input : Notation.Dot "exec_input" := {
      Notation.dot := exec_input;
    }.
    
    Definition update_selector
        (self : mut_ref Self)
        (selector : crate.call.Selector)
        : M unit :=
      self.["exec_input"].["update_selector"] selector.
    
    Global Instance Method_update_selector : Notation.Dot "update_selector" := {
      Notation.dot := update_selector;
    }.
  End Implself.create_builder.CreateParams E ContractRef Args Salt R.
  
  Module Implself.create_builder.CreateParams E ContractRef Args Salt R_2.
    Definition
      Self
      :=
      self.create_builder.CreateParams E ContractRef Args Salt R.
    
    Definition salt_bytes (self : ref Self) : M (ref Salt) :=
      Pure (addr_of self.["salt_bytes"]).
    
    Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
      Notation.dot := salt_bytes;
    }.
  End Implself.create_builder.CreateParams E ContractRef Args Salt R_2.
  
  Module Implself.create_builder.CreateParams E ContractRef Args Salt R_3.
    Definition
      Self
      :=
      self.create_builder.CreateParams E ContractRef Args Salt R.
    
    Definition instantiate (self : ref Self) : M ConstructorReturnType.Output :=
      let* α0 := crate.instantiate_contract self in
      let* α1 :=
        α0.["unwrap_or_else"]
          (fun env_error =>
            let* α0 := format_argument::["new_debug"] (addr_of env_error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Cross-contract instantiation failed with " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      α1.["unwrap_or_else"]
        (fun lang_error =>
          let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Received a `LangError` while instantiating: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_instantiate : Notation.Dot "instantiate" := {
      Notation.dot := instantiate;
    }.
    
    Definition try_instantiate
        (self : ref Self)
        :
          M
            (crate.Result
              (ink_primitives.ConstructorResult ConstructorReturnType.Output)
              crate.Error) :=
      crate.instantiate_contract self.
    
    Global Instance Method_try_instantiate : Notation.Dot "try_instantiate" := {
      Notation.dot := try_instantiate;
    }.
  End Implself.create_builder.CreateParams E ContractRef Args Salt R_3.
  
  Module CreateBuilder.
    Record t : Set := {
      code_hash : CodeHash;
      gas_limit : GasLimit;
      endowment : Endowment;
      exec_input : Args;
      salt : Salt;
      return_type : RetType;
      _phantom : core.marker.PhantomData ( -> (E * ContractRef));
    }.
    
    Global Instance Get_code_hash : Notation.Dot "code_hash" := {
      Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
    }.
    Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
    }.
    Global Instance Get_endowment : Notation.Dot "endowment" := {
      Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
    }.
    Global Instance Get_exec_input : Notation.Dot "exec_input" := {
      Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
    }.
    Global Instance Get_salt : Notation.Dot "salt" := {
      Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
    }.
    Global Instance Get_return_type : Notation.Dot "return_type" := {
      Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
    }.
    Global Instance Get__phantom : Notation.Dot "_phantom" := {
      Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
    }.
  End CreateBuilder.
  Definition CreateBuilder : Set := CreateBuilder.t.
  
  Definition build_create
      {ContractRef : Set}
      `{ContractEnv.Trait ContractRef}
      (_ : unit)
      :
        M
          (self.create_builder.CreateBuilder
            ContractEnv.Env
            ContractRef
            (crate.call.utils.Unset Environment.Hash)
            (crate.call.utils.Unset u64)
            (crate.call.utils.Unset Environment.Balance)
            (crate.call.utils.Unset
              (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
            (crate.call.utils.Unset state.Salt)
            (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
    let* α0 := Default.default tt in
    let* α1 := Default.default tt in
    let* α2 := Default.default tt in
    let* α3 := Default.default tt in
    let* α4 := Default.default tt in
    let* α5 := Default.default tt in
    let* α6 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := α0;
        self.create_builder.CreateBuilder.gas_limit := α1;
        self.create_builder.CreateBuilder.endowment := α2;
        self.create_builder.CreateBuilder.exec_input := α3;
        self.create_builder.CreateBuilder.salt := α4;
        self.create_builder.CreateBuilder.return_type := α5;
        self.create_builder.CreateBuilder._phantom := α6;
      |}.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Unset ImplE.Hash)
      GasLimit
      Endowment
      Args
      Salt
      RetType.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        (crate.call.utils.Unset ImplE.Hash)
        GasLimit
        Endowment
        Args
        Salt
        RetType.
    
    Definition code_hash
        (self : Self)
        (code_hash : ImplE.Hash)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              (crate.call.utils.Set ImplE.Hash)
              GasLimit
              Endowment
              Args
              Salt
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash :=
            crate.call.utils.Set.Build_t code_hash;
          self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
          self.create_builder.CreateBuilder.endowment := self.["endowment"];
          self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
          self.create_builder.CreateBuilder.salt := self.["salt"];
          self.create_builder.CreateBuilder.return_type := self.["return_type"];
          self.create_builder.CreateBuilder._phantom := α0;
        |}.
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Unset ImplE.Hash)
      GasLimit
      Endowment
      Args
      Salt
      RetType.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      (crate.call.utils.Unset u64)
      Endowment
      Args
      Salt
      RetType.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        CodeHash
        (crate.call.utils.Unset u64)
        Endowment
        Args
        Salt
        RetType.
    
    Definition gas_limit
        (self : Self)
        (gas_limit : u64)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              CodeHash
              (crate.call.utils.Set u64)
              Endowment
              Args
              Salt
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
          self.create_builder.CreateBuilder.gas_limit :=
            crate.call.utils.Set.Build_t gas_limit;
          self.create_builder.CreateBuilder.endowment := self.["endowment"];
          self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
          self.create_builder.CreateBuilder.salt := self.["salt"];
          self.create_builder.CreateBuilder.return_type := self.["return_type"];
          self.create_builder.CreateBuilder._phantom := α0;
        |}.
    
    Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
      Notation.dot := gas_limit;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      (crate.call.utils.Unset u64)
      Endowment
      Args
      Salt
      RetType.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      (crate.call.utils.Unset ImplE.Balance)
      Args
      Salt
      RetType.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        (crate.call.utils.Unset ImplE.Balance)
        Args
        Salt
        RetType.
    
    Definition endowment
        (self : Self)
        (endowment : ImplE.Balance)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              CodeHash
              GasLimit
              (crate.call.utils.Set ImplE.Balance)
              Args
              Salt
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
          self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
          self.create_builder.CreateBuilder.endowment :=
            crate.call.utils.Set.Build_t endowment;
          self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
          self.create_builder.CreateBuilder.salt := self.["salt"];
          self.create_builder.CreateBuilder.return_type := self.["return_type"];
          self.create_builder.CreateBuilder._phantom := α0;
        |}.
    
    Global Instance Method_endowment : Notation.Dot "endowment" := {
      Notation.dot := endowment;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      (crate.call.utils.Unset ImplE.Balance)
      Args
      Salt
      RetType.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      Salt
      RetType.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        (crate.call.utils.Unset
          (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
        Salt
        RetType.
    
    Definition exec_input
        (self : Self)
        (exec_input : crate.call.ExecutionInput Args)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              CodeHash
              GasLimit
              Endowment
              (crate.call.utils.Set (crate.call.ExecutionInput Args))
              Salt
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
          self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
          self.create_builder.CreateBuilder.endowment := self.["endowment"];
          self.create_builder.CreateBuilder.exec_input :=
            crate.call.utils.Set.Build_t exec_input;
          self.create_builder.CreateBuilder.salt := self.["salt"];
          self.create_builder.CreateBuilder.return_type := self.["return_type"];
          self.create_builder.CreateBuilder._phantom := α0;
        |}.
    
    Global Instance Method_exec_input : Notation.Dot "exec_input" := {
      Notation.dot := exec_input;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      Salt
      RetType.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      (crate.call.utils.Unset state.Salt)
      RetType.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        (crate.call.utils.Unset state.Salt)
        RetType.
    
    Definition salt_bytes
        (self : Self)
        (salt : Salt)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              CodeHash
              GasLimit
              Endowment
              Args
              (crate.call.utils.Set Salt)
              RetType) :=
      let* α0 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
          self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
          self.create_builder.CreateBuilder.endowment := self.["endowment"];
          self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
          self.create_builder.CreateBuilder.salt :=
            crate.call.utils.Set.Build_t salt;
          self.create_builder.CreateBuilder.return_type := self.["return_type"];
          self.create_builder.CreateBuilder._phantom := α0;
        |}.
    
    Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
      Notation.dot := salt_bytes;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      (crate.call.utils.Unset state.Salt)
      RetType.
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      Salt
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        CodeHash
        GasLimit
        Endowment
        Args
        Salt
        (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
    
    Definition returns
        (self : Self)
        :
          M
            (self.create_builder.CreateBuilder
              E
              ContractRef
              CodeHash
              GasLimit
              Endowment
              Args
              Salt
              (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
      let* α0 := Default.default tt in
      let* α1 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
          self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
          self.create_builder.CreateBuilder.endowment := self.["endowment"];
          self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
          self.create_builder.CreateBuilder.salt := self.["salt"];
          self.create_builder.CreateBuilder.return_type :=
            crate.call.utils.Set.Build_t α0;
          self.create_builder.CreateBuilder._phantom := α1;
        |}.
    
    Global Instance Method_returns : Notation.Dot "returns" := {
      Notation.dot := returns;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      Salt
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Definition params
        (self : Self)
        :
          M
            (self.create_builder.CreateParams
              E
              ContractRef
              Args
              Salt
              RetType) :=
      let* α0 := self.["code_hash"].["value"] in
      let* α1 := self.["gas_limit"].["unwrap_or_else"] (fun  => Pure 0) in
      let* α2 := self.["endowment"].["value"] in
      let* α3 := self.["exec_input"].["value"] in
      let* α4 := self.["salt"].["value"] in
      let* α5 := Default.default tt in
      let* α6 := Default.default tt in
      Pure
        {|
          self.create_builder.CreateParams.code_hash := α0;
          self.create_builder.CreateParams.gas_limit := α1;
          self.create_builder.CreateParams.endowment := α2;
          self.create_builder.CreateParams.exec_input := α3;
          self.create_builder.CreateParams.salt_bytes := α4;
          self.create_builder.CreateParams._return_type := α5;
          self.create_builder.CreateParams._phantom := α6;
        |}.
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Module
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
    Definition
      Self
      :=
      self.create_builder.CreateBuilder
        E
        ContractRef
        (crate.call.utils.Set ImplE.Hash)
        GasLimit
        (crate.call.utils.Set ImplE.Balance)
        (crate.call.utils.Set (crate.call.ExecutionInput Args))
        (crate.call.utils.Set Salt)
        (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
    
    Definition instantiate (self : Self) : M ConstructorReturnType.Output :=
      let* α0 := self.["params"] in
      α0.["instantiate"].
    
    Global Instance Method_instantiate : Notation.Dot "instantiate" := {
      Notation.dot := instantiate;
    }.
    
    Definition try_instantiate
        (self : Self)
        :
          M
            (crate.Result
              (ink_primitives.ConstructorResult ConstructorReturnType.Output)
              crate.Error) :=
      let* α0 := self.["params"] in
      α0.["try_instantiate"].
    
    Global Instance Method_try_instantiate : Notation.Dot "try_instantiate" := {
      Notation.dot := try_instantiate;
    }.
  End
    Implself.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_2.
End create_builder.

Module state.
  Module Salt.
    Inductive t : Set :=
    .
  End Salt.
  Definition Salt := Salt.t.
End state.

Module Salt.
  Inductive t : Set :=
  .
End Salt.
Definition Salt := Salt.t.

Module FromAccountId.
  Class Trait (T Self : Set) : Set := {
    from_account_id : Environment.AccountId -> (M Self);
  }.
  
  Global Instance Method_from_account_id `(Trait)
    : Notation.Dot "from_account_id" := {
    Notation.dot := from_account_id;
  }.
End FromAccountId.

Module ConstructorReturnType.
  Class Trait (C Self : Set) : Set := {
    IS_RESULT : bool;
    Output : Set;
    Error : Set;
    ok : C -> (M ImplSelf.Output);
  }.
  
  Global Instance Method_IS_RESULT `(Trait) : Notation.Dot "IS_RESULT" := {
    Notation.dot := IS_RESULT;
  }.
  Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
    Notation.dot := Output;
  }.
  Global Instance Method_Error `(Trait) : Notation.Dot "Error" := {
    Notation.dot := Error;
  }.
  Global Instance Method_ok `(Trait) : Notation.Dot "ok" := {
    Notation.dot := ok;
  }.
  Global Instance Method_err `(Trait) : Notation.Dot "err" := {
    Notation.dot (_err : ImplSelf.Error) :=
      (Pure None
      : M (Option ImplSelf.Output));
  }.
End ConstructorReturnType.

Module Impl_ConstructorReturnType_for_C.
  Definition Self := C.
  
  Definition Output : Set := C.
  
  Definition Error : Set := unit.
  
  Definition ok (value : C) : M ImplSelf.Output := Pure value.
  
  Global Instance AssociatedFunction_ok : Notation.DoubleColon Self "ok" := {
    Notation.double_colon := ok;
  }.
  
  Global Instance I C : ConstructorReturnType.Trait Self C := {
    ConstructorReturnType.ok := ok;
  }.
End Impl_ConstructorReturnType_for_C.

Module Impl_ConstructorReturnType_for_core_result_Result_C_E.
  Definition Self := core.result.Result C E.
  
  Definition IS_RESULT := Pure true.
  
  Global Instance AssociatedFunction_IS_RESULT :
    Notation.DoubleColon Self "IS_RESULT" := {
    Notation.double_colon := IS_RESULT;
  }.
  
  Definition Output : Set := core.result.Result C E.
  
  Definition Error : Set := E.
  
  Definition ok (value : C) : M ImplSelf.Output := Pure (Ok value).
  
  Global Instance AssociatedFunction_ok : Notation.DoubleColon Self "ok" := {
    Notation.double_colon := ok;
  }.
  
  Definition err (err : ImplSelf.Error) : M (Option ImplSelf.Output) :=
    Pure (Some (Err err)).
  
  Global Instance AssociatedFunction_err : Notation.DoubleColon Self "err" := {
    Notation.double_colon := err;
  }.
  
  Global Instance I C E : ConstructorReturnType.Trait Self C := {
    ConstructorReturnType.ok := ok;
  }.
End Impl_ConstructorReturnType_for_core_result_Result_C_E.

Module CreateParams.
  Record t : Set := {
    code_hash : ImplE.Hash;
    gas_limit : u64;
    endowment : ImplE.Balance;
    exec_input : crate.call.ExecutionInput Args;
    salt_bytes : Salt;
    _return_type : crate.call.utils.ReturnType R;
    _phantom : core.marker.PhantomData ( -> ContractRef);
  }.
  
  Global Instance Get_code_hash : Notation.Dot "code_hash" := {
    Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
  }.
  Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
  }.
  Global Instance Get_endowment : Notation.Dot "endowment" := {
    Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
  }.
  Global Instance Get_exec_input : Notation.Dot "exec_input" := {
    Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
  }.
  Global Instance Get_salt_bytes : Notation.Dot "salt_bytes" := {
    Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
  }.
  Global Instance Get__return_type : Notation.Dot "_return_type" := {
    Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
  }.
  Global Instance Get__phantom : Notation.Dot "_phantom" := {
    Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
  }.
End CreateParams.
Definition CreateParams : Set := CreateParams.t.

Module
    Impl__crate_fmt_Debug_for_self_create_builder_CreateParams_E_ContractRef_Args_Salt_R.
  Definition Self := self.create_builder.CreateParams E ContractRef Args Salt R.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    let names :=
      addr_of
        [
          "code_hash";
          "gas_limit";
          "endowment";
          "exec_input";
          "salt_bytes";
          "_return_type";
          "_phantom"
        ] in
    let values :=
      addr_of
        [
          addr_of self.["code_hash"];
          addr_of self.["gas_limit"];
          addr_of self.["endowment"];
          addr_of self.["exec_input"];
          addr_of self.["salt_bytes"];
          addr_of self.["_return_type"];
          addr_of (addr_of self.["_phantom"])
        ] in
    _crate.fmt.Formatter::["debug_struct_fields_finish"]
      f
      "CreateParams"
      names
      values.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I E ContractRef Args Salt R : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End
  Impl__crate_fmt_Debug_for_self_create_builder_CreateParams_E_ContractRef_Args_Salt_R.

Module Implself.create_builder.CreateParams E ContractRef Args Salt R_4.
  Definition Self := self.create_builder.CreateParams E ContractRef Args Salt R.
  
  Definition code_hash (self : ref Self) : M (ref ImplE.Hash) :=
    Pure (addr_of self.["code_hash"]).
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
  
  Definition gas_limit (self : ref Self) : M u64 := Pure self.["gas_limit"].
  
  Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot := gas_limit;
  }.
  
  Definition endowment (self : ref Self) : M (ref ImplE.Balance) :=
    Pure (addr_of self.["endowment"]).
  
  Global Instance Method_endowment : Notation.Dot "endowment" := {
    Notation.dot := endowment;
  }.
  
  Definition exec_input
      (self : ref Self)
      : M (ref (crate.call.ExecutionInput Args)) :=
    Pure (addr_of self.["exec_input"]).
  
  Global Instance Method_exec_input : Notation.Dot "exec_input" := {
    Notation.dot := exec_input;
  }.
  
  Definition update_selector
      (self : mut_ref Self)
      (selector : crate.call.Selector)
      : M unit :=
    self.["exec_input"].["update_selector"] selector.
  
  Global Instance Method_update_selector : Notation.Dot "update_selector" := {
    Notation.dot := update_selector;
  }.
End Implself.create_builder.CreateParams E ContractRef Args Salt R_4.

Module Implself.create_builder.CreateParams E ContractRef Args Salt R_5.
  Definition Self := self.create_builder.CreateParams E ContractRef Args Salt R.
  
  Definition salt_bytes (self : ref Self) : M (ref Salt) :=
    Pure (addr_of self.["salt_bytes"]).
  
  Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
    Notation.dot := salt_bytes;
  }.
End Implself.create_builder.CreateParams E ContractRef Args Salt R_5.

Module Implself.create_builder.CreateParams E ContractRef Args Salt R_6.
  Definition Self := self.create_builder.CreateParams E ContractRef Args Salt R.
  
  Definition instantiate (self : ref Self) : M ConstructorReturnType.Output :=
    let* α0 := crate.instantiate_contract self in
    let* α1 :=
      α0.["unwrap_or_else"]
        (fun env_error =>
          let* α0 := format_argument::["new_debug"] (addr_of env_error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Cross-contract instantiation failed with " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    α1.["unwrap_or_else"]
      (fun lang_error =>
        let* α0 := format_argument::["new_debug"] (addr_of lang_error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "Received a `LangError` while instantiating: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_instantiate : Notation.Dot "instantiate" := {
    Notation.dot := instantiate;
  }.
  
  Definition try_instantiate
      (self : ref Self)
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)
            crate.Error) :=
    crate.instantiate_contract self.
  
  Global Instance Method_try_instantiate : Notation.Dot "try_instantiate" := {
    Notation.dot := try_instantiate;
  }.
End Implself.create_builder.CreateParams E ContractRef Args Salt R_6.

Module CreateBuilder.
  Record t : Set := {
    code_hash : CodeHash;
    gas_limit : GasLimit;
    endowment : Endowment;
    exec_input : Args;
    salt : Salt;
    return_type : RetType;
    _phantom : core.marker.PhantomData ( -> (E * ContractRef));
  }.
  
  Global Instance Get_code_hash : Notation.Dot "code_hash" := {
    Notation.dot '(Build_t x0 _ _ _ _ _ _) := x0;
  }.
  Global Instance Get_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot '(Build_t _ x1 _ _ _ _ _) := x1;
  }.
  Global Instance Get_endowment : Notation.Dot "endowment" := {
    Notation.dot '(Build_t _ _ x2 _ _ _ _) := x2;
  }.
  Global Instance Get_exec_input : Notation.Dot "exec_input" := {
    Notation.dot '(Build_t _ _ _ x3 _ _ _) := x3;
  }.
  Global Instance Get_salt : Notation.Dot "salt" := {
    Notation.dot '(Build_t _ _ _ _ x4 _ _) := x4;
  }.
  Global Instance Get_return_type : Notation.Dot "return_type" := {
    Notation.dot '(Build_t _ _ _ _ _ x5 _) := x5;
  }.
  Global Instance Get__phantom : Notation.Dot "_phantom" := {
    Notation.dot '(Build_t _ _ _ _ _ _ x6) := x6;
  }.
End CreateBuilder.
Definition CreateBuilder : Set := CreateBuilder.t.

Definition build_create
    {ContractRef : Set}
    `{ContractEnv.Trait ContractRef}
    (_ : unit)
    :
      M
        (self.create_builder.CreateBuilder
          ContractEnv.Env
          ContractRef
          (crate.call.utils.Unset Environment.Hash)
          (crate.call.utils.Unset u64)
          (crate.call.utils.Unset Environment.Balance)
          (crate.call.utils.Unset
            (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
          (crate.call.utils.Unset state.Salt)
          (crate.call.utils.Unset (crate.call.utils.ReturnType unit))) :=
  let* α0 := Default.default tt in
  let* α1 := Default.default tt in
  let* α2 := Default.default tt in
  let* α3 := Default.default tt in
  let* α4 := Default.default tt in
  let* α5 := Default.default tt in
  let* α6 := Default.default tt in
  Pure
    {|
      self.create_builder.CreateBuilder.code_hash := α0;
      self.create_builder.CreateBuilder.gas_limit := α1;
      self.create_builder.CreateBuilder.endowment := α2;
      self.create_builder.CreateBuilder.exec_input := α3;
      self.create_builder.CreateBuilder.salt := α4;
      self.create_builder.CreateBuilder.return_type := α5;
      self.create_builder.CreateBuilder._phantom := α6;
    |}.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Unset ImplE.Hash)
    GasLimit
    Endowment
    Args
    Salt
    RetType_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Unset ImplE.Hash)
      GasLimit
      Endowment
      Args
      Salt
      RetType.
  
  Definition code_hash
      (self : Self)
      (code_hash : ImplE.Hash)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            (crate.call.utils.Set ImplE.Hash)
            GasLimit
            Endowment
            Args
            Salt
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash :=
          crate.call.utils.Set.Build_t code_hash;
        self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
        self.create_builder.CreateBuilder.endowment := self.["endowment"];
        self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
        self.create_builder.CreateBuilder.salt := self.["salt"];
        self.create_builder.CreateBuilder.return_type := self.["return_type"];
        self.create_builder.CreateBuilder._phantom := α0;
      |}.
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Unset ImplE.Hash)
    GasLimit
    Endowment
    Args
    Salt
    RetType_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    (crate.call.utils.Unset u64)
    Endowment
    Args
    Salt
    RetType_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      (crate.call.utils.Unset u64)
      Endowment
      Args
      Salt
      RetType.
  
  Definition gas_limit
      (self : Self)
      (gas_limit : u64)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            CodeHash
            (crate.call.utils.Set u64)
            Endowment
            Args
            Salt
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
        self.create_builder.CreateBuilder.gas_limit :=
          crate.call.utils.Set.Build_t gas_limit;
        self.create_builder.CreateBuilder.endowment := self.["endowment"];
        self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
        self.create_builder.CreateBuilder.salt := self.["salt"];
        self.create_builder.CreateBuilder.return_type := self.["return_type"];
        self.create_builder.CreateBuilder._phantom := α0;
      |}.
  
  Global Instance Method_gas_limit : Notation.Dot "gas_limit" := {
    Notation.dot := gas_limit;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    (crate.call.utils.Unset u64)
    Endowment
    Args
    Salt
    RetType_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    (crate.call.utils.Unset ImplE.Balance)
    Args
    Salt
    RetType_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      (crate.call.utils.Unset ImplE.Balance)
      Args
      Salt
      RetType.
  
  Definition endowment
      (self : Self)
      (endowment : ImplE.Balance)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            CodeHash
            GasLimit
            (crate.call.utils.Set ImplE.Balance)
            Args
            Salt
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
        self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
        self.create_builder.CreateBuilder.endowment :=
          crate.call.utils.Set.Build_t endowment;
        self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
        self.create_builder.CreateBuilder.salt := self.["salt"];
        self.create_builder.CreateBuilder.return_type := self.["return_type"];
        self.create_builder.CreateBuilder._phantom := α0;
      |}.
  
  Global Instance Method_endowment : Notation.Dot "endowment" := {
    Notation.dot := endowment;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    (crate.call.utils.Unset ImplE.Balance)
    Args
    Salt
    RetType_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    Salt
    RetType_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      (crate.call.utils.Unset
        (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
      Salt
      RetType.
  
  Definition exec_input
      (self : Self)
      (exec_input : crate.call.ExecutionInput Args)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            CodeHash
            GasLimit
            Endowment
            (crate.call.utils.Set (crate.call.ExecutionInput Args))
            Salt
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
        self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
        self.create_builder.CreateBuilder.endowment := self.["endowment"];
        self.create_builder.CreateBuilder.exec_input :=
          crate.call.utils.Set.Build_t exec_input;
        self.create_builder.CreateBuilder.salt := self.["salt"];
        self.create_builder.CreateBuilder.return_type := self.["return_type"];
        self.create_builder.CreateBuilder._phantom := α0;
      |}.
  
  Global Instance Method_exec_input : Notation.Dot "exec_input" := {
    Notation.dot := exec_input;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    (crate.call.utils.Unset
      (crate.call.ExecutionInput crate.call.utils.EmptyArgumentList))
    Salt
    RetType_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    Args
    (crate.call.utils.Unset state.Salt)
    RetType_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      (crate.call.utils.Unset state.Salt)
      RetType.
  
  Definition salt_bytes
      (self : Self)
      (salt : Salt)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            CodeHash
            GasLimit
            Endowment
            Args
            (crate.call.utils.Set Salt)
            RetType) :=
    let* α0 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
        self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
        self.create_builder.CreateBuilder.endowment := self.["endowment"];
        self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
        self.create_builder.CreateBuilder.salt :=
          crate.call.utils.Set.Build_t salt;
        self.create_builder.CreateBuilder.return_type := self.["return_type"];
        self.create_builder.CreateBuilder._phantom := α0;
      |}.
  
  Global Instance Method_salt_bytes : Notation.Dot "salt_bytes" := {
    Notation.dot := salt_bytes;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    Args
    (crate.call.utils.Unset state.Salt)
    RetType_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    Args
    Salt
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      CodeHash
      GasLimit
      Endowment
      Args
      Salt
      (crate.call.utils.Unset (crate.call.utils.ReturnType unit)).
  
  Definition returns
      (self : Self)
      :
        M
          (self.create_builder.CreateBuilder
            E
            ContractRef
            CodeHash
            GasLimit
            Endowment
            Args
            Salt
            (crate.call.utils.Set (crate.call.utils.ReturnType R))) :=
    let* α0 := Default.default tt in
    let* α1 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateBuilder.code_hash := self.["code_hash"];
        self.create_builder.CreateBuilder.gas_limit := self.["gas_limit"];
        self.create_builder.CreateBuilder.endowment := self.["endowment"];
        self.create_builder.CreateBuilder.exec_input := self.["exec_input"];
        self.create_builder.CreateBuilder.salt := self.["salt"];
        self.create_builder.CreateBuilder.return_type :=
          crate.call.utils.Set.Build_t α0;
        self.create_builder.CreateBuilder._phantom := α1;
      |}.
  
  Global Instance Method_returns : Notation.Dot "returns" := {
    Notation.dot := returns;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    CodeHash
    GasLimit
    Endowment
    Args
    Salt
    (crate.call.utils.Unset (crate.call.utils.ReturnType unit))_2.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Set ImplE.Hash)
    GasLimit
    (crate.call.utils.Set ImplE.Balance)
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set Salt)
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_3.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Definition params
      (self : Self)
      : M (self.create_builder.CreateParams E ContractRef Args Salt RetType) :=
    let* α0 := self.["code_hash"].["value"] in
    let* α1 := self.["gas_limit"].["unwrap_or_else"] (fun  => Pure 0) in
    let* α2 := self.["endowment"].["value"] in
    let* α3 := self.["exec_input"].["value"] in
    let* α4 := self.["salt"].["value"] in
    let* α5 := Default.default tt in
    let* α6 := Default.default tt in
    Pure
      {|
        self.create_builder.CreateParams.code_hash := α0;
        self.create_builder.CreateParams.gas_limit := α1;
        self.create_builder.CreateParams.endowment := α2;
        self.create_builder.CreateParams.exec_input := α3;
        self.create_builder.CreateParams.salt_bytes := α4;
        self.create_builder.CreateParams._return_type := α5;
        self.create_builder.CreateParams._phantom := α6;
      |}.
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Set ImplE.Hash)
    GasLimit
    (crate.call.utils.Set ImplE.Balance)
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set Salt)
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_3.

Module
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Set ImplE.Hash)
    GasLimit
    (crate.call.utils.Set ImplE.Balance)
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set Salt)
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_4.
  Definition
    Self
    :=
    self.create_builder.CreateBuilder
      E
      ContractRef
      (crate.call.utils.Set ImplE.Hash)
      GasLimit
      (crate.call.utils.Set ImplE.Balance)
      (crate.call.utils.Set (crate.call.ExecutionInput Args))
      (crate.call.utils.Set Salt)
      (crate.call.utils.Set (crate.call.utils.ReturnType RetType)).
  
  Definition instantiate (self : Self) : M ConstructorReturnType.Output :=
    let* α0 := self.["params"] in
    α0.["instantiate"].
  
  Global Instance Method_instantiate : Notation.Dot "instantiate" := {
    Notation.dot := instantiate;
  }.
  
  Definition try_instantiate
      (self : Self)
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)
            crate.Error) :=
    let* α0 := self.["params"] in
    α0.["try_instantiate"].
  
  Global Instance Method_try_instantiate : Notation.Dot "try_instantiate" := {
    Notation.dot := try_instantiate;
  }.
End
  Implself.create_builder.CreateBuilder
    E
    ContractRef
    (crate.call.utils.Set ImplE.Hash)
    GasLimit
    (crate.call.utils.Set ImplE.Balance)
    (crate.call.utils.Set (crate.call.ExecutionInput Args))
    (crate.call.utils.Set Salt)
    (crate.call.utils.Set (crate.call.utils.ReturnType RetType))_4.

Module execution_input.
  Module ExecutionInput.
    Record t : Set := {
      selector : crate.call.Selector;
      args : Args;
    }.
    
    Global Instance Get_selector : Notation.Dot "selector" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_args : Notation.Dot "args" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End ExecutionInput.
  Definition ExecutionInput : Set := ExecutionInput.t.
  
  Module Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.
    Definition Self := crate.call.ExecutionInput Args.
    
    Definition clone (self : ref Self) : M (crate.call.ExecutionInput Args) :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["selector"]) in
      let* α1 := _crate.clone.Clone.clone (addr_of self.["args"]) in
      Pure
        {|
          crate.call.ExecutionInput.selector := α0;
          crate.call.ExecutionInput.args := α1;
        |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I Args : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.
  
  Module Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.
    Definition Self := crate.call.ExecutionInput Args.
    
    Definition default (_ : unit) : M (crate.call.ExecutionInput Args) :=
      let* α0 := _crate.default.Default.default tt in
      let* α1 := _crate.default.Default.default tt in
      Pure
        {|
          crate.call.ExecutionInput.selector := α0;
          crate.call.ExecutionInput.args := α1;
        |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I Args : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.
  
  Module Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.
    Definition Self := crate.call.ExecutionInput Args.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field2_finish"]
        f
        "ExecutionInput"
        "selector"
        (addr_of self.["selector"])
        "args"
        (addr_of (addr_of self.["args"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I Args : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.
  
  Module Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList_2.
    Definition
      Self
      :=
      crate.call.ExecutionInput crate.call.utils.EmptyArgumentList.
    
    Definition new (selector : crate.call.Selector) : M Self :=
      let* α0 := super.execution_input.ArgumentList::["empty"] tt in
      Pure {| Self.selector := selector; Self.args := α0; |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
    
    Definition push_arg
        (self : Self)
        (arg : T)
        :
          M
            (crate.call.ExecutionInput
              (super.execution_input.ArgumentList
                (super.execution_input.Argument T)
                crate.call.utils.EmptyArgumentList)) :=
      let* α0 := self.["args"].["push_arg"] arg in
      Pure
        {|
          crate.call.ExecutionInput.selector := self.["selector"];
          crate.call.ExecutionInput.args := α0;
        |}.
    
    Global Instance Method_push_arg : Notation.Dot "push_arg" := {
      Notation.dot := push_arg;
    }.
  End Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList_2.
  
  Module
    Implcrate.call.ExecutionInput
      (super.execution_input.ArgumentList
        (super.execution_input.Argument Head)
        Rest).
    Definition
      Self
      :=
      crate.call.ExecutionInput
        (super.execution_input.ArgumentList
          (super.execution_input.Argument Head)
          Rest).
    
    Definition push_arg
        (self : Self)
        (arg : T)
        :
          M
            (crate.call.ExecutionInput
              (super.execution_input.ArgsList
                T
                (super.execution_input.ArgsList Head Rest))) :=
      let* α0 := self.["args"].["push_arg"] arg in
      Pure
        {|
          crate.call.ExecutionInput.selector := self.["selector"];
          crate.call.ExecutionInput.args := α0;
        |}.
    
    Global Instance Method_push_arg : Notation.Dot "push_arg" := {
      Notation.dot := push_arg;
    }.
  End
    Implcrate.call.ExecutionInput
      (super.execution_input.ArgumentList
        (super.execution_input.Argument Head)
        Rest).
  
  Module Implcrate.call.ExecutionInput Args_2.
    Definition Self := crate.call.ExecutionInput Args.
    
    Definition update_selector
        (self : mut_ref Self)
        (selector : crate.call.Selector)
        : M unit :=
      let* _ := assign self.["selector"] selector in
      Pure tt.
    
    Global Instance Method_update_selector : Notation.Dot "update_selector" := {
      Notation.dot := update_selector;
    }.
  End Implcrate.call.ExecutionInput Args_2.
  
  Module ArgumentList.
    Record t : Set := {
      head : Head;
      rest : Rest;
    }.
    
    Global Instance Get_head : Notation.Dot "head" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_rest : Notation.Dot "rest" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End ArgumentList.
  Definition ArgumentList : Set := ArgumentList.t.
  
  Module
      Impl__crate_clone_Clone_for_super_execution_input_ArgumentList_Head_Rest.
    Definition Self := super.execution_input.ArgumentList Head Rest.
    
    Definition clone
        (self : ref Self)
        : M (super.execution_input.ArgumentList Head Rest) :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["head"]) in
      let* α1 := _crate.clone.Clone.clone (addr_of self.["rest"]) in
      Pure
        {|
          super.execution_input.ArgumentList.head := α0;
          super.execution_input.ArgumentList.rest := α1;
        |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I Head Rest : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_super_execution_input_ArgumentList_Head_Rest.
  
  Module
      Impl__crate_default_Default_for_super_execution_input_ArgumentList_Head_Rest.
    Definition Self := super.execution_input.ArgumentList Head Rest.
    
    Definition default
        (_ : unit)
        : M (super.execution_input.ArgumentList Head Rest) :=
      let* α0 := _crate.default.Default.default tt in
      let* α1 := _crate.default.Default.default tt in
      Pure
        {|
          super.execution_input.ArgumentList.head := α0;
          super.execution_input.ArgumentList.rest := α1;
        |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I Head Rest : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End
    Impl__crate_default_Default_for_super_execution_input_ArgumentList_Head_Rest.
  
  Module Impl__crate_fmt_Debug_for_super_execution_input_ArgumentList_Head_Rest.
    Definition Self := super.execution_input.ArgumentList Head Rest.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field2_finish"]
        f
        "ArgumentList"
        "head"
        (addr_of self.["head"])
        "rest"
        (addr_of (addr_of self.["rest"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I Head Rest : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_super_execution_input_ArgumentList_Head_Rest.
  
  Definition ArgsList : Set :=
    super.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest.
  
  Module Argument.
    Record t : Set := {
      arg : T;
    }.
    
    Global Instance Get_arg : Notation.Dot "arg" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End Argument.
  Definition Argument : Set := Argument.t.
  
  Module Impl__crate_clone_Clone_for_super_execution_input_Argument_T.
    Definition Self := super.execution_input.Argument T.
    
    Definition clone (self : ref Self) : M (super.execution_input.Argument T) :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["arg"]) in
      Pure {| super.execution_input.Argument.arg := α0; |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I T : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_super_execution_input_Argument_T.
  
  Module Impl__crate_fmt_Debug_for_super_execution_input_Argument_T.
    Definition Self := super.execution_input.Argument T.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field1_finish"]
        f
        "Argument"
        "arg"
        (addr_of (addr_of self.["arg"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I T : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_super_execution_input_Argument_T.
  
  Module Implsuper.execution_input.Argument T.
    Definition Self := super.execution_input.Argument T.
    
    Definition new (arg : T) : M Self := Pure {| Self.arg := arg; |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
  End Implsuper.execution_input.Argument T.
  
  Module ArgumentListEnd.
    Inductive t : Set := Build.
  End ArgumentListEnd.
  Definition ArgumentListEnd := ArgumentListEnd.t.
  
  Module Impl__crate_clone_Clone_for_super_execution_input_ArgumentListEnd.
    Definition Self := super.execution_input.ArgumentListEnd.
    
    Definition clone
        (self : ref Self)
        : M super.execution_input.ArgumentListEnd :=
      Pure super.execution_input.ArgumentListEnd.Build.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_super_execution_input_ArgumentListEnd.
  
  Module Impl__crate_default_Default_for_super_execution_input_ArgumentListEnd.
    Definition Self := super.execution_input.ArgumentListEnd.
    
    Definition default (_ : unit) : M super.execution_input.ArgumentListEnd :=
      Pure {|  |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_super_execution_input_ArgumentListEnd.
  
  Module Impl__crate_fmt_Debug_for_super_execution_input_ArgumentListEnd.
    Definition Self := super.execution_input.ArgumentListEnd.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["write_str"] f "ArgumentListEnd".
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_super_execution_input_ArgumentListEnd.
  
  Definition EmptyArgumentList : Set :=
    super.execution_input.ArgumentList
      super.execution_input.ArgumentListEnd
      super.execution_input.ArgumentListEnd.
  
  Module Implcrate.call.utils.EmptyArgumentList_2.
    Definition Self := crate.call.utils.EmptyArgumentList.
    
    Definition empty (_ : unit) : M crate.call.utils.EmptyArgumentList :=
      Pure
        {|
          super.execution_input.ArgumentList.head :=
            super.execution_input.ArgumentListEnd.Build;
          super.execution_input.ArgumentList.rest :=
            super.execution_input.ArgumentListEnd.Build;
        |}.
    
    Global Instance AssociatedFunction_empty :
      Notation.DoubleColon Self "empty" := {
      Notation.double_colon := empty;
    }.
    
    Definition push_arg
        (self : Self)
        (arg : T)
        :
          M
            (super.execution_input.ArgumentList
              (super.execution_input.Argument T)
              Self) :=
      let* α0 := super.execution_input.Argument::["new"] arg in
      Pure
        {|
          super.execution_input.ArgumentList.head := α0;
          super.execution_input.ArgumentList.rest := self;
        |}.
    
    Global Instance Method_push_arg : Notation.Dot "push_arg" := {
      Notation.dot := push_arg;
    }.
  End Implcrate.call.utils.EmptyArgumentList_2.
  
  Module
    Implsuper.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest.
    Definition
      Self
      :=
      super.execution_input.ArgumentList
        (super.execution_input.Argument Head)
        Rest.
    
    Definition push_arg
        (self : Self)
        (arg : T)
        :
          M
            (super.execution_input.ArgumentList
              (super.execution_input.Argument T)
              Self) :=
      let* α0 := super.execution_input.Argument::["new"] arg in
      Pure
        {|
          super.execution_input.ArgumentList.head := α0;
          super.execution_input.ArgumentList.rest := self;
        |}.
    
    Global Instance Method_push_arg : Notation.Dot "push_arg" := {
      Notation.dot := push_arg;
    }.
  End
    Implsuper.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest.
  
  Module Impl_scale_Encode_for_super_execution_input_Argument_T.
    Definition Self := super.execution_input.Argument T.
    
    Definition size_hint (self : ref Self) : M usize :=
      scale.Encode.size_hint (addr_of self.["arg"]).
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
      scale.Encode.encode_to (addr_of self.["arg"]) output.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I T : scale.Encode.Trait Self := {
    }.
  End Impl_scale_Encode_for_super_execution_input_Argument_T.
  
  Module Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.
    Definition Self := crate.call.utils.EmptyArgumentList.
    
    Definition size_hint (self : ref Self) : M usize := Pure 0.
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (_output : mut_ref O) : M unit :=
      Pure tt.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I : scale.Encode.Trait Self := {
    }.
  End Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.
  
  Module
      Impl_scale_Encode_for_super_execution_input_ArgumentList_super_execution_input_Argument_Head_Rest.
    Definition
      Self
      :=
      super.execution_input.ArgumentList
        (super.execution_input.Argument Head)
        Rest.
    
    Definition size_hint (self : ref Self) : M usize :=
      let* α0 := scale.Encode.size_hint (addr_of self.["head"]) in
      let* α1 := scale.Encode.size_hint (addr_of self.["rest"]) in
      α0.["add"] α1.
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
      let* _ := scale.Encode.encode_to (addr_of self.["rest"]) output in
      let* _ := scale.Encode.encode_to (addr_of self.["head"]) output in
      Pure tt.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I Head Rest : scale.Encode.Trait Self := {
    }.
  End
    Impl_scale_Encode_for_super_execution_input_ArgumentList_super_execution_input_Argument_Head_Rest.
  
  Module Impl_scale_Encode_for_crate_call_ExecutionInput_Args.
    Definition Self := crate.call.ExecutionInput Args.
    
    Definition size_hint (self : ref Self) : M usize :=
      let* α0 := scale.Encode.size_hint (addr_of self.["selector"]) in
      let* α1 := scale.Encode.size_hint (addr_of self.["args"]) in
      α0.["add"] α1.
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
      let* _ := scale.Encode.encode_to (addr_of self.["selector"]) output in
      let* _ := scale.Encode.encode_to (addr_of self.["args"]) output in
      Pure tt.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I Args : scale.Encode.Trait Self := {
    }.
  End Impl_scale_Encode_for_crate_call_ExecutionInput_Args.
End execution_input.

Module ExecutionInput.
  Record t : Set := {
    selector : crate.call.Selector;
    args : Args;
  }.
  
  Global Instance Get_selector : Notation.Dot "selector" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_args : Notation.Dot "args" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End ExecutionInput.
Definition ExecutionInput : Set := ExecutionInput.t.

Module Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.
  Definition Self := crate.call.ExecutionInput Args.
  
  Definition clone (self : ref Self) : M (crate.call.ExecutionInput Args) :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["selector"]) in
    let* α1 := _crate.clone.Clone.clone (addr_of self.["args"]) in
    Pure
      {|
        crate.call.ExecutionInput.selector := α0;
        crate.call.ExecutionInput.args := α1;
      |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I Args : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_call_ExecutionInput_Args.

Module Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.
  Definition Self := crate.call.ExecutionInput Args.
  
  Definition default (_ : unit) : M (crate.call.ExecutionInput Args) :=
    let* α0 := _crate.default.Default.default tt in
    let* α1 := _crate.default.Default.default tt in
    Pure
      {|
        crate.call.ExecutionInput.selector := α0;
        crate.call.ExecutionInput.args := α1;
      |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I Args : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_crate_call_ExecutionInput_Args.

Module Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.
  Definition Self := crate.call.ExecutionInput Args.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field2_finish"]
      f
      "ExecutionInput"
      "selector"
      (addr_of self.["selector"])
      "args"
      (addr_of (addr_of self.["args"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I Args : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_call_ExecutionInput_Args.

Module Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList_3.
  Definition
    Self
    :=
    crate.call.ExecutionInput crate.call.utils.EmptyArgumentList.
  
  Definition new (selector : crate.call.Selector) : M Self :=
    let* α0 := super.execution_input.ArgumentList::["empty"] tt in
    Pure {| Self.selector := selector; Self.args := α0; |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
  
  Definition push_arg
      (self : Self)
      (arg : T)
      :
        M
          (crate.call.ExecutionInput
            (super.execution_input.ArgumentList
              (super.execution_input.Argument T)
              crate.call.utils.EmptyArgumentList)) :=
    let* α0 := self.["args"].["push_arg"] arg in
    Pure
      {|
        crate.call.ExecutionInput.selector := self.["selector"];
        crate.call.ExecutionInput.args := α0;
      |}.
  
  Global Instance Method_push_arg : Notation.Dot "push_arg" := {
    Notation.dot := push_arg;
  }.
End Implcrate.call.ExecutionInput crate.call.utils.EmptyArgumentList_3.

Module
  Implcrate.call.ExecutionInput
    (super.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest)_2.
  Definition
    Self
    :=
    crate.call.ExecutionInput
      (super.execution_input.ArgumentList
        (super.execution_input.Argument Head)
        Rest).
  
  Definition push_arg
      (self : Self)
      (arg : T)
      :
        M
          (crate.call.ExecutionInput
            (super.execution_input.ArgsList
              T
              (super.execution_input.ArgsList Head Rest))) :=
    let* α0 := self.["args"].["push_arg"] arg in
    Pure
      {|
        crate.call.ExecutionInput.selector := self.["selector"];
        crate.call.ExecutionInput.args := α0;
      |}.
  
  Global Instance Method_push_arg : Notation.Dot "push_arg" := {
    Notation.dot := push_arg;
  }.
End
  Implcrate.call.ExecutionInput
    (super.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest)_2.

Module Implcrate.call.ExecutionInput Args_3.
  Definition Self := crate.call.ExecutionInput Args.
  
  Definition update_selector
      (self : mut_ref Self)
      (selector : crate.call.Selector)
      : M unit :=
    let* _ := assign self.["selector"] selector in
    Pure tt.
  
  Global Instance Method_update_selector : Notation.Dot "update_selector" := {
    Notation.dot := update_selector;
  }.
End Implcrate.call.ExecutionInput Args_3.

Module ArgumentList.
  Record t : Set := {
    head : Head;
    rest : Rest;
  }.
  
  Global Instance Get_head : Notation.Dot "head" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_rest : Notation.Dot "rest" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End ArgumentList.
Definition ArgumentList : Set := ArgumentList.t.

Module Impl__crate_clone_Clone_for_super_execution_input_ArgumentList_Head_Rest.
  Definition Self := super.execution_input.ArgumentList Head Rest.
  
  Definition clone
      (self : ref Self)
      : M (super.execution_input.ArgumentList Head Rest) :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["head"]) in
    let* α1 := _crate.clone.Clone.clone (addr_of self.["rest"]) in
    Pure
      {|
        super.execution_input.ArgumentList.head := α0;
        super.execution_input.ArgumentList.rest := α1;
      |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I Head Rest : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_super_execution_input_ArgumentList_Head_Rest.

Module
    Impl__crate_default_Default_for_super_execution_input_ArgumentList_Head_Rest.
  Definition Self := super.execution_input.ArgumentList Head Rest.
  
  Definition default
      (_ : unit)
      : M (super.execution_input.ArgumentList Head Rest) :=
    let* α0 := _crate.default.Default.default tt in
    let* α1 := _crate.default.Default.default tt in
    Pure
      {|
        super.execution_input.ArgumentList.head := α0;
        super.execution_input.ArgumentList.rest := α1;
      |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I Head Rest : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End
  Impl__crate_default_Default_for_super_execution_input_ArgumentList_Head_Rest.

Module Impl__crate_fmt_Debug_for_super_execution_input_ArgumentList_Head_Rest.
  Definition Self := super.execution_input.ArgumentList Head Rest.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field2_finish"]
      f
      "ArgumentList"
      "head"
      (addr_of self.["head"])
      "rest"
      (addr_of (addr_of self.["rest"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I Head Rest : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_super_execution_input_ArgumentList_Head_Rest.

Definition ArgsList : Set :=
  super.execution_input.ArgumentList (super.execution_input.Argument Head) Rest.

Module Argument.
  Record t : Set := {
    arg : T;
  }.
  
  Global Instance Get_arg : Notation.Dot "arg" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End Argument.
Definition Argument : Set := Argument.t.

Module Impl__crate_clone_Clone_for_super_execution_input_Argument_T.
  Definition Self := super.execution_input.Argument T.
  
  Definition clone (self : ref Self) : M (super.execution_input.Argument T) :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["arg"]) in
    Pure {| super.execution_input.Argument.arg := α0; |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I T : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_super_execution_input_Argument_T.

Module Impl__crate_fmt_Debug_for_super_execution_input_Argument_T.
  Definition Self := super.execution_input.Argument T.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field1_finish"]
      f
      "Argument"
      "arg"
      (addr_of (addr_of self.["arg"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I T : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_super_execution_input_Argument_T.

Module Implsuper.execution_input.Argument T_2.
  Definition Self := super.execution_input.Argument T.
  
  Definition new (arg : T) : M Self := Pure {| Self.arg := arg; |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
End Implsuper.execution_input.Argument T_2.

Module ArgumentListEnd.
  Inductive t : Set := Build.
End ArgumentListEnd.
Definition ArgumentListEnd := ArgumentListEnd.t.

Module Impl__crate_clone_Clone_for_super_execution_input_ArgumentListEnd.
  Definition Self := super.execution_input.ArgumentListEnd.
  
  Definition clone
      (self : ref Self)
      : M super.execution_input.ArgumentListEnd :=
    Pure super.execution_input.ArgumentListEnd.Build.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_super_execution_input_ArgumentListEnd.

Module Impl__crate_default_Default_for_super_execution_input_ArgumentListEnd.
  Definition Self := super.execution_input.ArgumentListEnd.
  
  Definition default (_ : unit) : M super.execution_input.ArgumentListEnd :=
    Pure {|  |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_super_execution_input_ArgumentListEnd.

Module Impl__crate_fmt_Debug_for_super_execution_input_ArgumentListEnd.
  Definition Self := super.execution_input.ArgumentListEnd.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["write_str"] f "ArgumentListEnd".
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_super_execution_input_ArgumentListEnd.

Definition EmptyArgumentList : Set :=
  super.execution_input.ArgumentList
    super.execution_input.ArgumentListEnd
    super.execution_input.ArgumentListEnd.

Module Implcrate.call.utils.EmptyArgumentList_3.
  Definition Self := crate.call.utils.EmptyArgumentList.
  
  Definition empty (_ : unit) : M crate.call.utils.EmptyArgumentList :=
    Pure
      {|
        super.execution_input.ArgumentList.head :=
          super.execution_input.ArgumentListEnd.Build;
        super.execution_input.ArgumentList.rest :=
          super.execution_input.ArgumentListEnd.Build;
      |}.
  
  Global Instance AssociatedFunction_empty :
    Notation.DoubleColon Self "empty" := {
    Notation.double_colon := empty;
  }.
  
  Definition push_arg
      (self : Self)
      (arg : T)
      :
        M
          (super.execution_input.ArgumentList
            (super.execution_input.Argument T)
            Self) :=
    let* α0 := super.execution_input.Argument::["new"] arg in
    Pure
      {|
        super.execution_input.ArgumentList.head := α0;
        super.execution_input.ArgumentList.rest := self;
      |}.
  
  Global Instance Method_push_arg : Notation.Dot "push_arg" := {
    Notation.dot := push_arg;
  }.
End Implcrate.call.utils.EmptyArgumentList_3.

Module
  Implsuper.execution_input.ArgumentList
    (super.execution_input.Argument Head)
    Rest_2.
  Definition
    Self
    :=
    super.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest.
  
  Definition push_arg
      (self : Self)
      (arg : T)
      :
        M
          (super.execution_input.ArgumentList
            (super.execution_input.Argument T)
            Self) :=
    let* α0 := super.execution_input.Argument::["new"] arg in
    Pure
      {|
        super.execution_input.ArgumentList.head := α0;
        super.execution_input.ArgumentList.rest := self;
      |}.
  
  Global Instance Method_push_arg : Notation.Dot "push_arg" := {
    Notation.dot := push_arg;
  }.
End
  Implsuper.execution_input.ArgumentList
    (super.execution_input.Argument Head)
    Rest_2.

Module Impl_scale_Encode_for_super_execution_input_Argument_T.
  Definition Self := super.execution_input.Argument T.
  
  Definition size_hint (self : ref Self) : M usize :=
    scale.Encode.size_hint (addr_of self.["arg"]).
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
    scale.Encode.encode_to (addr_of self.["arg"]) output.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I T : scale.Encode.Trait Self := {
  }.
End Impl_scale_Encode_for_super_execution_input_Argument_T.

Module Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.
  Definition Self := crate.call.utils.EmptyArgumentList.
  
  Definition size_hint (self : ref Self) : M usize := Pure 0.
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (_output : mut_ref O) : M unit :=
    Pure tt.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I : scale.Encode.Trait Self := {
  }.
End Impl_scale_Encode_for_crate_call_utils_EmptyArgumentList.

Module
    Impl_scale_Encode_for_super_execution_input_ArgumentList_super_execution_input_Argument_Head_Rest.
  Definition
    Self
    :=
    super.execution_input.ArgumentList
      (super.execution_input.Argument Head)
      Rest.
  
  Definition size_hint (self : ref Self) : M usize :=
    let* α0 := scale.Encode.size_hint (addr_of self.["head"]) in
    let* α1 := scale.Encode.size_hint (addr_of self.["rest"]) in
    α0.["add"] α1.
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
    let* _ := scale.Encode.encode_to (addr_of self.["rest"]) output in
    let* _ := scale.Encode.encode_to (addr_of self.["head"]) output in
    Pure tt.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I Head Rest : scale.Encode.Trait Self := {
  }.
End
  Impl_scale_Encode_for_super_execution_input_ArgumentList_super_execution_input_Argument_Head_Rest.

Module Impl_scale_Encode_for_crate_call_ExecutionInput_Args.
  Definition Self := crate.call.ExecutionInput Args.
  
  Definition size_hint (self : ref Self) : M usize :=
    let* α0 := scale.Encode.size_hint (addr_of self.["selector"]) in
    let* α1 := scale.Encode.size_hint (addr_of self.["args"]) in
    α0.["add"] α1.
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (output : mut_ref O) : M unit :=
    let* _ := scale.Encode.encode_to (addr_of self.["selector"]) output in
    let* _ := scale.Encode.encode_to (addr_of self.["args"]) output in
    Pure tt.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I Args : scale.Encode.Trait Self := {
  }.
End Impl_scale_Encode_for_crate_call_ExecutionInput_Args.

Module selector.
  Module From := derive_more.From.
  
  Module Selector.
    Record t : Set := {
      bytes : list u8;
    }.
    
    Global Instance Get_bytes : Notation.Dot "bytes" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End Selector.
  Definition Selector : Set := Selector.t.
  
  Module Impl__crate_default_Default_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition default (_ : unit) : M crate.call.Selector :=
      let* α0 := _crate.default.Default.default tt in
      Pure {| crate.call.Selector.bytes := α0; |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_crate_call_Selector.
  
  Module Impl__crate_fmt_Debug_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field1_finish"]
        f
        "Selector"
        "bytes"
        (addr_of (addr_of self.["bytes"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_call_Selector.
  
  Module Impl__crate_marker_Copy_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_call_Selector.
  
  Module Impl__crate_clone_Clone_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition clone (self : ref Self) : M crate.call.Selector :=
      let _ := tt in
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_call_Selector.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.
  
  Module Impl__crate_cmp_PartialEq_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition eq
        (self : ref Self)
        (other : ref crate.call.Selector)
        : M bool :=
      self.["bytes"].["eq"] other.["bytes"].
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_call_Selector.
  
  Module Impl__crate_marker_StructuralEq_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_call_Selector.
  
  Module Impl__crate_cmp_Eq_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      let _ := tt in
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_call_Selector.
  
  Module Impl_Root_core_convert_From_for_crate_call_Selector.
    Definition Self := crate.call.Selector.
    
    Definition from (original : list u8) : M crate.call.Selector :=
      Pure {| crate.call.Selector.bytes := original; |}.
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : Root.core.convert.From.Trait Self list u8 := {
      Root.core.convert.From.from := from;
    }.
  End Impl_Root_core_convert_From_for_crate_call_Selector.
  
  Definition _ : unit := run (Pure tt).
  
  Definition _ : unit := run (Pure tt).
  
  Module Implcrate.call.Selector_2.
    Definition Self := crate.call.Selector.
    
    Definition new (bytes : list u8) : M Self :=
      Pure {| Self.bytes := bytes; |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
    
    Definition to_bytes (self : Self) : M list u8 := Pure self.["bytes"].
    
    Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
      Notation.dot := to_bytes;
    }.
  End Implcrate.call.Selector_2.
End selector.

Module From := derive_more.From.

Module Selector.
  Record t : Set := {
    bytes : list u8;
  }.
  
  Global Instance Get_bytes : Notation.Dot "bytes" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End Selector.
Definition Selector : Set := Selector.t.

Module Impl__crate_default_Default_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition default (_ : unit) : M crate.call.Selector :=
    let* α0 := _crate.default.Default.default tt in
    Pure {| crate.call.Selector.bytes := α0; |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_crate_call_Selector.

Module Impl__crate_fmt_Debug_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field1_finish"]
      f
      "Selector"
      "bytes"
      (addr_of (addr_of self.["bytes"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_call_Selector.

Module Impl__crate_marker_Copy_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_call_Selector.

Module Impl__crate_clone_Clone_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition clone (self : ref Self) : M crate.call.Selector :=
    let _ := tt in
    self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_call_Selector.

Module Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_call_Selector.

Module Impl__crate_cmp_PartialEq_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition eq (self : ref Self) (other : ref crate.call.Selector) : M bool :=
    self.["bytes"].["eq"] other.["bytes"].
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_call_Selector.

Module Impl__crate_marker_StructuralEq_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_call_Selector.

Module Impl__crate_cmp_Eq_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
    let _ := tt in
    Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_call_Selector.

Module Impl_Root_core_convert_From_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition from (original : list u8) : M crate.call.Selector :=
    Pure {| crate.call.Selector.bytes := original; |}.
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : Root.core.convert.From.Trait Self list u8 := {
    Root.core.convert.From.from := from;
  }.
End Impl_Root_core_convert_From_for_crate_call_Selector.

Definition _ : unit := run (Pure tt).

Module Impl_Root_scale_Decode_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition decode
      (__codec_input_edqy : mut_ref __CodecInputEdqy)
      : M (Root.core.result.Result Self Root.scale.Error) :=
    let* __codec_res_edqy := Root.scale.Decode.decode __codec_input_edqy in
    let* α0 :=
      match __codec_res_edqy with
      | Root.core.result.Result.Err e =>
        let* α0 := e.["chain"] "Could not decode `Selector::bytes`" in
        Return (Root.core.result.Result.Err α0)
      | Root.core.result.Result.Ok __codec_res_edqy => Pure __codec_res_edqy
      end in
    Pure (Root.core.result.Result.Ok {| crate.call.Selector.bytes := α0; |}).
  
  Global Instance AssociatedFunction_decode :
    Notation.DoubleColon Self "decode" := {
    Notation.double_colon := decode;
  }.
  
  Global Instance I : Root.scale.Decode.Trait Self := {
    Root.scale.Decode.decode := decode;
  }.
End Impl_Root_scale_Decode_for_crate_call_Selector.

Definition _ : unit := run (Pure tt).

Module Impl_Root_scale_Encode_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Definition encode_to
      (self : ref Self)
      (__codec_dest_edqy : mut_ref __CodecOutputEdqy)
      : M unit :=
    Root.scale.Encode.encode_to
      (addr_of (addr_of self.["bytes"]))
      __codec_dest_edqy.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Definition encode
      (self : ref Self)
      : M (Root.scale.alloc.vec.Vec Root.core.primitive.u8) :=
    Root.scale.Encode.encode (addr_of (addr_of self.["bytes"])).
  
  Global Instance Method_encode : Notation.Dot "encode" := {
    Notation.dot := encode;
  }.
  
  Definition using_encoded (self : ref Self) (f : F) : M R :=
    Root.scale.Encode.using_encoded (addr_of (addr_of self.["bytes"])) f.
  
  Global Instance Method_using_encoded : Notation.Dot "using_encoded" := {
    Notation.dot := using_encoded;
  }.
  
  Global Instance I : Root.scale.Encode.Trait Self := {
  }.
End Impl_Root_scale_Encode_for_crate_call_Selector.

Module Impl_Root_scale_EncodeLike_for_crate_call_Selector.
  Definition Self := crate.call.Selector.
  
  Global Instance I : Root.scale.EncodeLike.Trait Self :=
    Root.scale.EncodeLike.Build_Class _.
End Impl_Root_scale_EncodeLike_for_crate_call_Selector.

Module Implcrate.call.Selector_3.
  Definition Self := crate.call.Selector.
  
  Definition new (bytes : list u8) : M Self := Pure {| Self.bytes := bytes; |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
  
  Definition to_bytes (self : Self) : M list u8 := Pure self.["bytes"].
  
  Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
    Notation.dot := to_bytes;
  }.
End Implcrate.call.Selector_3.

Module utils.
  
End utils.

Module build_call := self.call_builder.build_call.

Module build_create := self.create_builder.build_create.

Module state := self.create_builder.state.

Module chain_extension.
  Module FromStatusCode.
    Class Trait (Self : Set) : Set := {
      from_status_code : u32 -> (M (crate.Result unit Self));
    }.
    
    Global Instance Method_from_status_code `(Trait)
      : Notation.Dot "from_status_code" := {
      Notation.dot := from_status_code;
    }.
  End FromStatusCode.
  
  Module ChainExtensionMethod.
    Record t : Set := {
      func_id : u32;
      state : core.marker.PhantomData ( -> (I * O * ErrorCode));
    }.
    
    Global Instance Get_func_id : Notation.Dot "func_id" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_state : Notation.Dot "state" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End ChainExtensionMethod.
  Definition ChainExtensionMethod : Set := ChainExtensionMethod.t.
  
  Module Impl__crate_fmt_Debug_for_ChainExtensionMethod_I_O_ErrorCode.
    Definition Self := ChainExtensionMethod I O ErrorCode.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field2_finish"]
        f
        "ChainExtensionMethod"
        "func_id"
        (addr_of self.["func_id"])
        "state"
        (addr_of (addr_of self.["state"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I I O ErrorCode : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_ChainExtensionMethod_I_O_ErrorCode.
  
  Module ImplChainExtensionMethod unit unit unit.
    Definition Self := ChainExtensionMethod unit unit unit.
    
    Definition build (func_id : u32) : M Self :=
      let* α0 := Default.default tt in
      Pure {| Self.func_id := func_id; Self.state := α0; |}.
    
    Global Instance AssociatedFunction_build :
      Notation.DoubleColon Self "build" := {
      Notation.double_colon := build;
    }.
  End ImplChainExtensionMethod unit unit unit.
  
  Module ImplChainExtensionMethod unit O ErrorCode.
    Definition Self := ChainExtensionMethod unit O ErrorCode.
    
    Definition input (self : Self) : M (ChainExtensionMethod I O ErrorCode) :=
      let* α0 := Default.default tt in
      Pure
        {|
          ChainExtensionMethod.func_id := self.["func_id"];
          ChainExtensionMethod.state := α0;
        |}.
    
    Global Instance Method_input : Notation.Dot "input" := {
      Notation.dot := input;
    }.
  End ImplChainExtensionMethod unit O ErrorCode.
  
  Module ImplChainExtensionMethod I unit ErrorCode.
    Definition Self := ChainExtensionMethod I unit ErrorCode.
    
    Definition output (self : Self) : M (ChainExtensionMethod I O ErrorCode) :=
      let* α0 := Default.default tt in
      Pure
        {|
          ChainExtensionMethod.func_id := self.["func_id"];
          ChainExtensionMethod.state := α0;
        |}.
    
    Global Instance Method_output : Notation.Dot "output" := {
      Notation.dot := output;
    }.
  End ImplChainExtensionMethod I unit ErrorCode.
  
  Module ImplChainExtensionMethod I O unit.
    Definition Self := ChainExtensionMethod I O unit.
    
    Definition ignore_error_code
        (self : Self)
        : M (ChainExtensionMethod I O state.IgnoreErrorCode) :=
      let* α0 := Default.default tt in
      Pure
        {|
          ChainExtensionMethod.func_id := self.["func_id"];
          ChainExtensionMethod.state := α0;
        |}.
    
    Global Instance Method_ignore_error_code :
      Notation.Dot "ignore_error_code" := {
      Notation.dot := ignore_error_code;
    }.
    
    Definition handle_error_code
        (self : Self)
        : M (ChainExtensionMethod I O (state.HandleErrorCode ErrorCode)) :=
      let* α0 := Default.default tt in
      Pure
        {|
          ChainExtensionMethod.func_id := self.["func_id"];
          ChainExtensionMethod.state := α0;
        |}.
    
    Global Instance Method_handle_error_code :
      Notation.Dot "handle_error_code" := {
      Notation.dot := handle_error_code;
    }.
  End ImplChainExtensionMethod I O unit.
  
  Module state.
    Module IgnoreErrorCode.
      Inductive t : Set :=
      .
    End IgnoreErrorCode.
    Definition IgnoreErrorCode := IgnoreErrorCode.t.
    
    Module Impl__crate_fmt_Debug_for_IgnoreErrorCode.
      Definition Self := IgnoreErrorCode.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.intrinsics.unreachable tt.
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_IgnoreErrorCode.
    
    Module HandleErrorCode.
      Record t : Set := {
        error_code : core.marker.PhantomData ( -> T);
      }.
      
      Global Instance Get_error_code : Notation.Dot "error_code" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End HandleErrorCode.
    Definition HandleErrorCode : Set := HandleErrorCode.t.
    
    Module Impl__crate_fmt_Debug_for_HandleErrorCode_T.
      Definition Self := HandleErrorCode T.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field1_finish"]
          f
          "HandleErrorCode"
          "error_code"
          (addr_of (addr_of self.["error_code"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I T : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_HandleErrorCode_T.
  End state.
  
  Module ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
    Definition
      Self
      :=
      ChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
    
    Definition call
        (self : Self)
        (input : ref I)
        : M (crate.Result IsResultType.Ok IsResultType.Err) :=
      OnInstance.on_instance
        (fun instance =>
          EnvBackend.call_chain_extension
            instance
            self.["func_id"]
            input
            ErrorCode::["from_status_code"]
            (fun output =>
              let* α0 := scale.Decode.decode (addr_of output) in
              α0.["map_err"] Into.into)).
    
    Global Instance Method_call : Notation.Dot "call" := {
      Notation.dot := call;
    }.
  End ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
  
  Module ImplChainExtensionMethod I O state.IgnoreErrorCode.
    Definition Self := ChainExtensionMethod I O state.IgnoreErrorCode.
    
    Definition call
        (self : Self)
        (input : ref I)
        : M (crate.Result IsResultType.Ok IsResultType.Err) :=
      OnInstance.on_instance
        (fun instance =>
          EnvBackend.call_chain_extension
            instance
            self.["func_id"]
            input
            (fun _status_code => Pure (Ok tt))
            (fun output =>
              let* α0 := scale.Decode.decode (addr_of output) in
              α0.["map_err"] Into.into)).
    
    Global Instance Method_call : Notation.Dot "call" := {
      Notation.dot := call;
    }.
  End ImplChainExtensionMethod I O state.IgnoreErrorCode.
  
  Module ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_2.
    Definition
      Self
      :=
      ChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
    
    Definition call
        (self : Self)
        (input : ref I)
        : M (crate.Result O ErrorCode) :=
      OnInstance.on_instance
        (fun instance =>
          EnvBackend.call_chain_extension
            instance
            self.["func_id"]
            input
            ErrorCode::["from_status_code"]
            (fun output =>
              let* decoded :=
                let* α0 := scale.Decode.decode (addr_of output) in
                α0.["expect"]
                  "encountered error while decoding chain extension method call return value" in
              Pure (Ok decoded))).
    
    Global Instance Method_call : Notation.Dot "call" := {
      Notation.dot := call;
    }.
  End ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_2.
  
  Module ImplChainExtensionMethod I O state.IgnoreErrorCode_2.
    Definition Self := ChainExtensionMethod I O state.IgnoreErrorCode.
    
    Definition call (self : Self) (input : ref I) : M O :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 :=
            EnvBackend.call_chain_extension
              instance
              self.["func_id"]
              input
              (fun _status_code => Pure (Ok tt))
              (fun output =>
                let* decoded :=
                  let* α0 := scale.Decode.decode (addr_of output) in
                  α0.["expect"]
                    "encountered error while decoding chain extension method call return value" in
                Pure (Ok decoded)) in
          α0.["expect"] "assume the chain extension method never fails").
    
    Global Instance Method_call : Notation.Dot "call" := {
      Notation.dot := call;
    }.
  End ImplChainExtensionMethod I O state.IgnoreErrorCode_2.
  
  Module IsResultType.
    Class Trait (Self : Set) : Set := {
      Ok : Set;
      Err : Set;
    }.
    
    Global Instance Method_Ok `(Trait) : Notation.Dot "Ok" := {
      Notation.dot := Ok;
    }.
    Global Instance Method_Err `(Trait) : Notation.Dot "Err" := {
      Notation.dot := Err;
    }.
  End IsResultType.
  
  Module Impl_private_IsResultTypeSealed_for_crate_Result_T_E.
    Definition Self := crate.Result T E.
    
    Global Instance I T E : private.IsResultTypeSealed.Trait Self :=
      private.IsResultTypeSealed.Build_Class _.
  End Impl_private_IsResultTypeSealed_for_crate_Result_T_E.
  
  Module Impl_IsResultType_for_crate_Result_T_E.
    Definition Self := crate.Result T E.
    
    Definition Ok : Set := T.
    
    Definition Err : Set := E.
    
    Global Instance I T E : IsResultType.Trait Self := {
    }.
  End Impl_IsResultType_for_crate_Result_T_E.
  
  Module private.
    Module IsResultTypeSealed.
      Unset Primitive Projections.
      Class Trait (Self : Set) : Set := {
      }.
      Global Set Primitive Projections.
    End IsResultTypeSealed.
  End private.
End chain_extension.

Module FromStatusCode.
  Class Trait (Self : Set) : Set := {
    from_status_code : u32 -> (M (crate.Result unit Self));
  }.
  
  Global Instance Method_from_status_code `(Trait)
    : Notation.Dot "from_status_code" := {
    Notation.dot := from_status_code;
  }.
End FromStatusCode.

Module ChainExtensionMethod.
  Record t : Set := {
    func_id : u32;
    state : core.marker.PhantomData ( -> (I * O * ErrorCode));
  }.
  
  Global Instance Get_func_id : Notation.Dot "func_id" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_state : Notation.Dot "state" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End ChainExtensionMethod.
Definition ChainExtensionMethod : Set := ChainExtensionMethod.t.

Module Impl__crate_fmt_Debug_for_ChainExtensionMethod_I_O_ErrorCode.
  Definition Self := ChainExtensionMethod I O ErrorCode.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field2_finish"]
      f
      "ChainExtensionMethod"
      "func_id"
      (addr_of self.["func_id"])
      "state"
      (addr_of (addr_of self.["state"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I I O ErrorCode : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_ChainExtensionMethod_I_O_ErrorCode.

Module ImplChainExtensionMethod unit unit unit_2.
  Definition Self := ChainExtensionMethod unit unit unit.
  
  Definition build (func_id : u32) : M Self :=
    let* α0 := Default.default tt in
    Pure {| Self.func_id := func_id; Self.state := α0; |}.
  
  Global Instance AssociatedFunction_build :
    Notation.DoubleColon Self "build" := {
    Notation.double_colon := build;
  }.
End ImplChainExtensionMethod unit unit unit_2.

Module ImplChainExtensionMethod unit O ErrorCode_2.
  Definition Self := ChainExtensionMethod unit O ErrorCode.
  
  Definition input (self : Self) : M (ChainExtensionMethod I O ErrorCode) :=
    let* α0 := Default.default tt in
    Pure
      {|
        ChainExtensionMethod.func_id := self.["func_id"];
        ChainExtensionMethod.state := α0;
      |}.
  
  Global Instance Method_input : Notation.Dot "input" := {
    Notation.dot := input;
  }.
End ImplChainExtensionMethod unit O ErrorCode_2.

Module ImplChainExtensionMethod I unit ErrorCode_2.
  Definition Self := ChainExtensionMethod I unit ErrorCode.
  
  Definition output (self : Self) : M (ChainExtensionMethod I O ErrorCode) :=
    let* α0 := Default.default tt in
    Pure
      {|
        ChainExtensionMethod.func_id := self.["func_id"];
        ChainExtensionMethod.state := α0;
      |}.
  
  Global Instance Method_output : Notation.Dot "output" := {
    Notation.dot := output;
  }.
End ImplChainExtensionMethod I unit ErrorCode_2.

Module ImplChainExtensionMethod I O unit_2.
  Definition Self := ChainExtensionMethod I O unit.
  
  Definition ignore_error_code
      (self : Self)
      : M (ChainExtensionMethod I O state.IgnoreErrorCode) :=
    let* α0 := Default.default tt in
    Pure
      {|
        ChainExtensionMethod.func_id := self.["func_id"];
        ChainExtensionMethod.state := α0;
      |}.
  
  Global Instance Method_ignore_error_code :
    Notation.Dot "ignore_error_code" := {
    Notation.dot := ignore_error_code;
  }.
  
  Definition handle_error_code
      (self : Self)
      : M (ChainExtensionMethod I O (state.HandleErrorCode ErrorCode)) :=
    let* α0 := Default.default tt in
    Pure
      {|
        ChainExtensionMethod.func_id := self.["func_id"];
        ChainExtensionMethod.state := α0;
      |}.
  
  Global Instance Method_handle_error_code :
    Notation.Dot "handle_error_code" := {
    Notation.dot := handle_error_code;
  }.
End ImplChainExtensionMethod I O unit_2.

Module state.
  Module IgnoreErrorCode.
    Inductive t : Set :=
    .
  End IgnoreErrorCode.
  Definition IgnoreErrorCode := IgnoreErrorCode.t.
  
  Module Impl__crate_fmt_Debug_for_IgnoreErrorCode.
    Definition Self := IgnoreErrorCode.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_IgnoreErrorCode.
  
  Module HandleErrorCode.
    Record t : Set := {
      error_code : core.marker.PhantomData ( -> T);
    }.
    
    Global Instance Get_error_code : Notation.Dot "error_code" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End HandleErrorCode.
  Definition HandleErrorCode : Set := HandleErrorCode.t.
  
  Module Impl__crate_fmt_Debug_for_HandleErrorCode_T.
    Definition Self := HandleErrorCode T.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field1_finish"]
        f
        "HandleErrorCode"
        "error_code"
        (addr_of (addr_of self.["error_code"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I T : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_HandleErrorCode_T.
End state.

Module IgnoreErrorCode.
  Inductive t : Set :=
  .
End IgnoreErrorCode.
Definition IgnoreErrorCode := IgnoreErrorCode.t.

Module Impl__crate_fmt_Debug_for_IgnoreErrorCode.
  Definition Self := IgnoreErrorCode.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_IgnoreErrorCode.

Module HandleErrorCode.
  Record t : Set := {
    error_code : core.marker.PhantomData ( -> T);
  }.
  
  Global Instance Get_error_code : Notation.Dot "error_code" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End HandleErrorCode.
Definition HandleErrorCode : Set := HandleErrorCode.t.

Module Impl__crate_fmt_Debug_for_HandleErrorCode_T.
  Definition Self := HandleErrorCode T.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field1_finish"]
      f
      "HandleErrorCode"
      "error_code"
      (addr_of (addr_of self.["error_code"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I T : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_HandleErrorCode_T.

Module ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_3.
  Definition Self := ChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
  
  Definition call
      (self : Self)
      (input : ref I)
      : M (crate.Result IsResultType.Ok IsResultType.Err) :=
    OnInstance.on_instance
      (fun instance =>
        EnvBackend.call_chain_extension
          instance
          self.["func_id"]
          input
          ErrorCode::["from_status_code"]
          (fun output =>
            let* α0 := scale.Decode.decode (addr_of output) in
            α0.["map_err"] Into.into)).
  
  Global Instance Method_call : Notation.Dot "call" := {
    Notation.dot := call;
  }.
End ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_3.

Module ImplChainExtensionMethod I O state.IgnoreErrorCode_3.
  Definition Self := ChainExtensionMethod I O state.IgnoreErrorCode.
  
  Definition call
      (self : Self)
      (input : ref I)
      : M (crate.Result IsResultType.Ok IsResultType.Err) :=
    OnInstance.on_instance
      (fun instance =>
        EnvBackend.call_chain_extension
          instance
          self.["func_id"]
          input
          (fun _status_code => Pure (Ok tt))
          (fun output =>
            let* α0 := scale.Decode.decode (addr_of output) in
            α0.["map_err"] Into.into)).
  
  Global Instance Method_call : Notation.Dot "call" := {
    Notation.dot := call;
  }.
End ImplChainExtensionMethod I O state.IgnoreErrorCode_3.

Module ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_4.
  Definition Self := ChainExtensionMethod I O (state.HandleErrorCode ErrorCode).
  
  Definition call
      (self : Self)
      (input : ref I)
      : M (crate.Result O ErrorCode) :=
    OnInstance.on_instance
      (fun instance =>
        EnvBackend.call_chain_extension
          instance
          self.["func_id"]
          input
          ErrorCode::["from_status_code"]
          (fun output =>
            let* decoded :=
              let* α0 := scale.Decode.decode (addr_of output) in
              α0.["expect"]
                "encountered error while decoding chain extension method call return value" in
            Pure (Ok decoded))).
  
  Global Instance Method_call : Notation.Dot "call" := {
    Notation.dot := call;
  }.
End ImplChainExtensionMethod I O (state.HandleErrorCode ErrorCode)_4.

Module ImplChainExtensionMethod I O state.IgnoreErrorCode_4.
  Definition Self := ChainExtensionMethod I O state.IgnoreErrorCode.
  
  Definition call (self : Self) (input : ref I) : M O :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 :=
          EnvBackend.call_chain_extension
            instance
            self.["func_id"]
            input
            (fun _status_code => Pure (Ok tt))
            (fun output =>
              let* decoded :=
                let* α0 := scale.Decode.decode (addr_of output) in
                α0.["expect"]
                  "encountered error while decoding chain extension method call return value" in
              Pure (Ok decoded)) in
        α0.["expect"] "assume the chain extension method never fails").
  
  Global Instance Method_call : Notation.Dot "call" := {
    Notation.dot := call;
  }.
End ImplChainExtensionMethod I O state.IgnoreErrorCode_4.

Module IsResultType.
  Class Trait (Self : Set) : Set := {
    Ok : Set;
    Err : Set;
  }.
  
  Global Instance Method_Ok `(Trait) : Notation.Dot "Ok" := {
    Notation.dot := Ok;
  }.
  Global Instance Method_Err `(Trait) : Notation.Dot "Err" := {
    Notation.dot := Err;
  }.
End IsResultType.

Module Impl_private_IsResultTypeSealed_for_crate_Result_T_E.
  Definition Self := crate.Result T E.
  
  Global Instance I T E : private.IsResultTypeSealed.Trait Self :=
    private.IsResultTypeSealed.Build_Class _.
End Impl_private_IsResultTypeSealed_for_crate_Result_T_E.

Module Impl_IsResultType_for_crate_Result_T_E.
  Definition Self := crate.Result T E.
  
  Definition Ok : Set := T.
  
  Definition Err : Set := E.
  
  Global Instance I T E : IsResultType.Trait Self := {
  }.
End Impl_IsResultType_for_crate_Result_T_E.

Module private.
  Module IsResultTypeSealed.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End IsResultTypeSealed.
End private.

Module IsResultTypeSealed.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End IsResultTypeSealed.

Module contract.
  Module ContractEnv.
    Class Trait (Self : Set) : Set := {
      Env : Set;
    }.
    
    Global Instance Method_Env `(Trait) : Notation.Dot "Env" := {
      Notation.dot := Env;
    }.
  End ContractEnv.
  
  Module ContractReference.
    Class Trait (Self : Set) : Set := {
      Type : Set;
    }.
    
    Global Instance Method_Type `(Trait) : Notation.Dot "Type" := {
      Notation.dot := Type;
    }.
  End ContractReference.
End contract.

Module ContractEnv.
  Class Trait (Self : Set) : Set := {
    Env : Set;
  }.
  
  Global Instance Method_Env `(Trait) : Notation.Dot "Env" := {
    Notation.dot := Env;
  }.
End ContractEnv.

Module ContractReference.
  Class Trait (Self : Set) : Set := {
    Type : Set;
  }.
  
  Global Instance Method_Type `(Trait) : Notation.Dot "Type" := {
    Notation.dot := Type;
  }.
End ContractReference.

Module engine.
  Module cfg_if := cfg_if.cfg_if.
  
  Module OnInstance.
    Class Trait (Self : Set) : Set := {
      on_instance : F -> (M R);
    }.
    
    Global Instance Method_on_instance `(Trait)
      : Notation.Dot "on_instance" := {
      Notation.dot := on_instance;
    }.
  End OnInstance.
  
  Module off_chain.
    Module call_data.
      Module vec := ink_prelude.vec.
      
      Module CallData.
        Record t : Set := {
          bytes : ink_prelude.vec.Vec u8;
        }.
        
        Global Instance Get_bytes : Notation.Dot "bytes" := {
          Notation.dot '(Build_t x0) := x0;
        }.
      End CallData.
      Definition CallData : Set := CallData.t.
      
      Module Impl__crate_fmt_Debug_for_CallData.
        Definition Self := CallData.
        
        Definition fmt
            (self : ref Self)
            (f : mut_ref _crate.fmt.Formatter)
            : M _crate.fmt.Result :=
          _crate.fmt.Formatter::["debug_struct_field1_finish"]
            f
            "CallData"
            "bytes"
            (addr_of (addr_of self.["bytes"])).
        
        Global Instance Method_fmt : Notation.Dot "fmt" := {
          Notation.dot := fmt;
        }.
        
        Global Instance I : _crate.fmt.Debug.Trait Self := {
          _crate.fmt.Debug.fmt := fmt;
        }.
      End Impl__crate_fmt_Debug_for_CallData.
      
      Module Impl__crate_clone_Clone_for_CallData.
        Definition Self := CallData.
        
        Definition clone (self : ref Self) : M CallData :=
          let* α0 := _crate.clone.Clone.clone (addr_of self.["bytes"]) in
          Pure {| CallData.bytes := α0; |}.
        
        Global Instance Method_clone : Notation.Dot "clone" := {
          Notation.dot := clone;
        }.
        
        Global Instance I : _crate.clone.Clone.Trait Self := {
          _crate.clone.Clone.clone := clone;
        }.
      End Impl__crate_clone_Clone_for_CallData.
      
      Module Impl__crate_marker_StructuralPartialEq_for_CallData.
        Definition Self := CallData.
        
        Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
          _crate.marker.StructuralPartialEq.Build_Class _.
      End Impl__crate_marker_StructuralPartialEq_for_CallData.
      
      Module Impl__crate_cmp_PartialEq_for_CallData.
        Definition Self := CallData.
        
        Definition eq (self : ref Self) (other : ref CallData) : M bool :=
          self.["bytes"].["eq"] other.["bytes"].
        
        Global Instance Method_eq : Notation.Dot "eq" := {
          Notation.dot := eq;
        }.
        
        Global Instance I : _crate.cmp.PartialEq.Trait Self := {
          _crate.cmp.PartialEq.eq := eq;
        }.
      End Impl__crate_cmp_PartialEq_for_CallData.
      
      Module Impl__crate_marker_StructuralEq_for_CallData.
        Definition Self := CallData.
        
        Global Instance I : _crate.marker.StructuralEq.Trait Self :=
          _crate.marker.StructuralEq.Build_Class _.
      End Impl__crate_marker_StructuralEq_for_CallData.
      
      Module Impl__crate_cmp_Eq_for_CallData.
        Definition Self := CallData.
        
        Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
          let _ := tt in
          Pure tt.
        
        Global Instance Method_assert_receiver_is_total_eq :
          Notation.Dot "assert_receiver_is_total_eq" := {
          Notation.dot := assert_receiver_is_total_eq;
        }.
        
        Global Instance I : _crate.cmp.Eq.Trait Self := {
        }.
      End Impl__crate_cmp_Eq_for_CallData.
      
      Module ImplCallData.
        Definition Self := CallData.
        
        Definition new (selector : crate.call.Selector) : M Self :=
          let* bytes := selector.["to_bytes"] in
          let* α0 :=
            _crate.boxed.Box::["new"]
              [ bytes[0]; bytes[1]; bytes[2]; bytes[3] ] in
          let* α1 := Slice::["into_vec"] α0 in
          Pure {| Self.bytes := α1; |}.
        
        Global Instance AssociatedFunction_new :
          Notation.DoubleColon Self "new" := {
          Notation.double_colon := new;
        }.
        
        Definition push_arg (self : mut_ref Self) (arg : ref A) : M unit :=
          arg.["encode_to"] (addr_of self.["bytes"]).
        
        Global Instance Method_push_arg : Notation.Dot "push_arg" := {
          Notation.dot := push_arg;
        }.
        
        Definition selector (self : ref Self) : M crate.call.Selector :=
          let* _ :=
            if (true : bool) then
              let* _ :=
                let* α0 := self.["bytes"].["len"] in
                let* α1 := α0.["ge"] 4 in
                let* α2 := α1.["not"] in
                if (α2 : bool) then
                  _crate.panicking.panic
                    "assertion failed: self.bytes.len() >= 4"
                else
                  Pure tt in
              Pure tt
            else
              Pure tt in
          let bytes :=
            [
              self.["bytes"][0];
              self.["bytes"][1];
              self.["bytes"][2];
              self.["bytes"][3]
            ] in
          bytes.["into"].
        
        Global Instance Method_selector : Notation.Dot "selector" := {
          Notation.dot := selector;
        }.
        
        Definition params (self : ref Self) : M (ref Slice) :=
          let* _ :=
            if (true : bool) then
              let* _ :=
                let* α0 := self.["bytes"].["len"] in
                let* α1 := α0.["ge"] 4 in
                let* α2 := α1.["not"] in
                if (α2 : bool) then
                  _crate.panicking.panic
                    "assertion failed: self.bytes.len() >= 4"
                else
                  Pure tt in
              Pure tt
            else
              Pure tt in
          Pure (addr_of self.["bytes"][RangeFrom {| RangeFrom.start := 4; |}]).
        
        Global Instance Method_params : Notation.Dot "params" := {
          Notation.dot := params;
        }.
        
        Definition to_bytes (self : ref Self) : M (ref Slice) :=
          Pure (addr_of self.["bytes"]).
        
        Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
          Notation.dot := to_bytes;
        }.
      End ImplCallData.
      
      Module Impl_scale_Encode_for_CallData.
        Definition Self := CallData.
        
        Definition size_hint (self : ref Self) : M usize :=
          self.["bytes"].["len"].
        
        Global Instance Method_size_hint : Notation.Dot "size_hint" := {
          Notation.dot := size_hint;
        }.
        
        Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
          let* _ :=
            let* α0 := self.["bytes"].["as_slice"] in
            dest.["write"] α0 in
          Pure tt.
        
        Global Instance Method_encode_to : Notation.Dot "encode_to" := {
          Notation.dot := encode_to;
        }.
        
        Global Instance I : scale.Encode.Trait Self := {
        }.
      End Impl_scale_Encode_for_CallData.
      
      Module Impl_scale_Decode_for_CallData.
        Definition Self := CallData.
        
        Definition decode
            (input : mut_ref I)
            : M (core.result.Result Self scale.Error) :=
          let* remaining_len :=
            let* α0 := input.["remaining_len"] in
            let* α1 := α0.["unwrap_or"] None in
            α1.["unwrap_or"] 0 in
          let* bytes := ink_prelude.vec.Vec::["with_capacity"] remaining_len in
          let* _ :=
            loop
              let* α0 := input.["read_byte"] in
              let* α1 := let_if Ok byte := α0 in
              if (α1 : bool) then
                let* _ := bytes.["push"] byte in
                Pure tt
              else
                let _ := Break in
                Pure tt
              from
              while in
          let* _ :=
            let* α0 := bytes.["len"] in
            let* α1 := α0.["lt"] 4 in
            if (α1 : bool) then
              let* α0 :=
                scale.Error::["from"]
                  "require at least 4 bytes for input data" in
              Return (Err α0)
            else
              Pure tt in
          Pure (Ok {| Self.bytes := bytes; |}).
        
        Global Instance AssociatedFunction_decode :
          Notation.DoubleColon Self "decode" := {
          Notation.double_colon := decode;
        }.
        
        Global Instance I : scale.Decode.Trait Self := {
          scale.Decode.decode := decode;
        }.
      End Impl_scale_Decode_for_CallData.
    End call_data.
    
    Module impls.
      Module ext := ink_engine.ext.
      
      Definition BUFFER_SIZE : usize := run (1.["shl"] 14).
      
      Module Impl_CryptoHash_for_crate_hash_Blake2x128.
        Definition Self := crate.hash.Blake2x128.
        
        Definition hash
            (input : ref Slice)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          let* output :=
            let offset := 0 in
            let slice :=
              addr_of
                output[Range
                    {|
                    Range.start := offset;
                    Range.end := offset.["add"] 16;
                  |}] in
            as_array slice in
          let* _ := ink_engine.ext.Engine::["hash_blake2_128"] input output in
          Pure tt.
        
        Global Instance AssociatedFunction_hash :
          Notation.DoubleColon Self "hash" := {
          Notation.double_colon := hash;
        }.
        
        Global Instance I : CryptoHash.Trait Self := {
          CryptoHash.hash := hash;
        }.
      End Impl_CryptoHash_for_crate_hash_Blake2x128.
      
      Module Impl_CryptoHash_for_crate_hash_Blake2x256.
        Definition Self := crate.hash.Blake2x256.
        
        Definition hash
            (input : ref Slice)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          let* output :=
            let offset := 0 in
            let slice :=
              addr_of
                output[Range
                    {|
                    Range.start := offset;
                    Range.end := offset.["add"] 32;
                  |}] in
            as_array slice in
          let* _ := ink_engine.ext.Engine::["hash_blake2_256"] input output in
          Pure tt.
        
        Global Instance AssociatedFunction_hash :
          Notation.DoubleColon Self "hash" := {
          Notation.double_colon := hash;
        }.
        
        Global Instance I : CryptoHash.Trait Self := {
          CryptoHash.hash := hash;
        }.
      End Impl_CryptoHash_for_crate_hash_Blake2x256.
      
      Module Impl_CryptoHash_for_crate_hash_Sha2x256.
        Definition Self := crate.hash.Sha2x256.
        
        Definition hash
            (input : ref Slice)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          let* output :=
            let offset := 0 in
            let slice :=
              addr_of
                output[Range
                    {|
                    Range.start := offset;
                    Range.end := offset.["add"] 32;
                  |}] in
            as_array slice in
          let* _ := ink_engine.ext.Engine::["hash_sha2_256"] input output in
          Pure tt.
        
        Global Instance AssociatedFunction_hash :
          Notation.DoubleColon Self "hash" := {
          Notation.double_colon := hash;
        }.
        
        Global Instance I : CryptoHash.Trait Self := {
          CryptoHash.hash := hash;
        }.
      End Impl_CryptoHash_for_crate_hash_Sha2x256.
      
      Module Impl_CryptoHash_for_crate_hash_Keccak256.
        Definition Self := crate.hash.Keccak256.
        
        Definition hash
            (input : ref Slice)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          let* output :=
            let offset := 0 in
            let slice :=
              addr_of
                output[Range
                    {|
                    Range.start := offset;
                    Range.end := offset.["add"] 32;
                  |}] in
            as_array slice in
          let* _ := ink_engine.ext.Engine::["hash_keccak_256"] input output in
          Pure tt.
        
        Global Instance AssociatedFunction_hash :
          Notation.DoubleColon Self "hash" := {
          Notation.double_colon := hash;
        }.
        
        Global Instance I : CryptoHash.Trait Self := {
          CryptoHash.hash := hash;
        }.
      End Impl_CryptoHash_for_crate_hash_Keccak256.
      
      Module Impl_From_for_crate_Error.
        Definition Self := crate.Error.
        
        Definition from (ext_error : ext.Error) : M Self :=
          match ext_error with
          | ext.Error.Unknown => Pure Self::["Unknown"]
          | ext.Error.CalleeTrapped => Pure Self::["CalleeTrapped"]
          | ext.Error.CalleeReverted => Pure Self::["CalleeReverted"]
          | ext.Error.KeyNotFound => Pure Self::["KeyNotFound"]
          | ext.Error._BelowSubsistenceThreshold =>
            Pure Self::["_BelowSubsistenceThreshold"]
          | ext.Error.TransferFailed => Pure Self::["TransferFailed"]
          | ext.Error._EndowmentTooLow => Pure Self::["_EndowmentTooLow"]
          | ext.Error.CodeNotFound => Pure Self::["CodeNotFound"]
          | ext.Error.NotCallable => Pure Self::["NotCallable"]
          | ext.Error.LoggingDisabled => Pure Self::["LoggingDisabled"]
          | ext.Error.EcdsaRecoveryFailed => Pure Self::["EcdsaRecoveryFailed"]
          end.
        
        Global Instance AssociatedFunction_from :
          Notation.DoubleColon Self "from" := {
          Notation.double_colon := from;
        }.
        
        Global Instance I : From.Trait Self ext.Error := {
          From.from := from;
        }.
      End Impl_From_for_crate_Error.
      
      Module TopicsBuilder.
        Record t : Set := {
          topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
        }.
        
        Global Instance Get_topics : Notation.Dot "topics" := {
          Notation.dot '(Build_t x0) := x0;
        }.
      End TopicsBuilder.
      Definition TopicsBuilder : Set := TopicsBuilder.t.
      
      Module Impl__crate_default_Default_for_TopicsBuilder.
        Definition Self := TopicsBuilder.
        
        Definition default (_ : unit) : M TopicsBuilder :=
          let* α0 := _crate.default.Default.default tt in
          Pure {| TopicsBuilder.topics := α0; |}.
        
        Global Instance AssociatedFunction_default :
          Notation.DoubleColon Self "default" := {
          Notation.double_colon := default;
        }.
        
        Global Instance I : _crate.default.Default.Trait Self := {
          _crate.default.Default.default := default;
        }.
      End Impl__crate_default_Default_for_TopicsBuilder.
      
      Module Impl_TopicsBuilderBackend_for_TopicsBuilder.
        Definition Self := TopicsBuilder.
        
        Definition Output : Set := ink_prelude.vec.Vec u8.
        
        Definition expect
            (self : mut_ref Self)
            (_expected_topics : usize)
            : M unit :=
          Pure tt.
        
        Global Instance Method_expect : Notation.Dot "expect" := {
          Notation.dot := expect;
        }.
        
        Definition push_topic
            (self : mut_ref Self)
            (topic_value : ref T)
            : M unit :=
          let* encoded := topic_value.["encode"] in
          let* len_encoded := encoded.["len"] in
          let result := Environment.Hash::["CLEAR_HASH"] in
          let* len_result :=
            let* α0 := result.["as_ref"] in
            α0.["len"] in
          let* _ :=
            let* α0 := len_encoded.["le"] len_result in
            if (α0 : bool) then
              let* _ :=
                let* α0 := result.["as_mut"] in
                α0[RangeTo {| RangeTo.end := len_encoded;
                    |}].["copy_from_slice"]
                  (addr_of encoded[RangeFull {|  |}]) in
              Pure tt
            else
              let* hash_output := HashOutput.Type::["default"] tt in
              let* _ :=
                CryptoHash.hash
                  (addr_of encoded[RangeFull {|  |}])
                  (addr_of hash_output) in
              let* copy_len :=
                let* α0 := hash_output.["len"] in
                core.cmp.min α0 len_result in
              let* _ :=
                let* α0 := result.["as_mut"] in
                α0[Range {| Range.start := 0; Range.end := copy_len;
                    |}].["copy_from_slice"]
                  (addr_of
                    hash_output[Range
                        {|
                        Range.start := 0;
                        Range.end := copy_len;
                      |}]) in
              Pure tt in
          let* off_hash := result.["as_ref"] in
          let* off_hash := off_hash.["to_vec"] in
          let* _ :=
            if (true : bool) then
              let* _ :=
                let* α0 := self.["topics"].["contains"] (addr_of off_hash) in
                let* α1 := α0.["not"] in
                let* α2 := α1.["not"] in
                if (α2 : bool) then
                  let* α0 :=
                    format_arguments::["new_const"]
                      (addr_of [ "duplicate topic hash discovered!" ]) in
                  _crate.panicking.panic_fmt α0
                else
                  Pure tt in
              Pure tt
            else
              Pure tt in
          let* _ := self.["topics"].["push"] off_hash in
          Pure tt.
        
        Global Instance Method_push_topic : Notation.Dot "push_topic" := {
          Notation.dot := push_topic;
        }.
        
        Definition output (self : Self) : M ImplSelf.Output :=
          let* all := ink_prelude.vec.Vec::["new"] tt in
          let* topics_len_compact :=
            let* α0 := self.["topics"].["len"] in
            Pure (addr_of (scale.Compact.Build_t (cast α0 u32))) in
          let* topics_encoded :=
            let* α0 := scale.Encode.encode (addr_of topics_len_compact) in
            Pure (addr_of α0[RangeFull {|  |}]) in
          let* _ :=
            let* α0 := topics_encoded.["to_vec"] in
            all.["append"] (addr_of α0) in
          let* _ :=
            let* α0 := self.["topics"].["into_iter"] in
            α0.["for_each"] (fun v => all.["append"] (addr_of v)) in
          Pure all.
        
        Global Instance Method_output : Notation.Dot "output" := {
          Notation.dot := output;
        }.
        
        Global Instance I E : TopicsBuilderBackend.Trait Self E := {
          TopicsBuilderBackend.expect := expect;
          TopicsBuilderBackend.push_topic := push_topic;
          TopicsBuilderBackend.output := output;
        }.
      End Impl_TopicsBuilderBackend_for_TopicsBuilder.
      
      Module Implsuper.EnvInstance.
        Definition Self := super.EnvInstance.
        
        Definition get_property
            (self : mut_ref Self)
            (ext_fn
              :
              (ref ink_engine.ext.Engine) -> (mut_ref (mut_ref Slice)) -> unit)
            : M (crate.Result T) :=
          let* full_scope := repeat 0 in
          let full_scope := addr_of (addr_of full_scope[RangeFull {|  |}]) in
          let* _ := ext_fn (addr_of self.["engine"]) full_scope in
          let* α0 :=
            scale.Decode.decode
              (addr_of (addr_of full_scope[RangeFull {|  |}])) in
          α0.["map_err"] Into.into.
        
        Global Instance Method_get_property : Notation.Dot "get_property" := {
          Notation.dot := get_property;
        }.
      End Implsuper.EnvInstance.
      
      Module Impl_EnvBackend_for_super_EnvInstance.
        Definition Self := super.EnvInstance.
        
        Definition set_contract_storage
            (self : mut_ref Self)
            (key : ref K)
            (value : ref V)
            : M (Option u32) :=
          let* v := _crate.vec.Vec::["new"] tt in
          let* _ := Storable.encode value (addr_of v) in
          let* α0 := key.["encode"] in
          self.["engine"].["set_storage"]
            (addr_of α0)
            (addr_of v[RangeFull {|  |}]).
        
        Global Instance Method_set_contract_storage :
          Notation.Dot "set_contract_storage" := {
          Notation.dot := set_contract_storage;
        }.
        
        Definition get_contract_storage
            (self : mut_ref Self)
            (key : ref K)
            : M (crate.Result (Option R)) :=
          let* output := repeat 0 in
          let* _ :=
            let* α0 := key.["encode"] in
            let* α1 :=
              self.["engine"].["get_storage"]
                (addr_of α0)
                (addr_of (addr_of output[RangeFull {|  |}])) in
            match α1 with
            | Ok _ => Pure tt
            | Err ext.Error.KeyNotFound => Return (Ok None)
            | Err _ =>
              let* α0 :=
                format_arguments::["new_const"]
                  (addr_of [ "encountered unexpected error" ]) in
              _crate.panicking.panic_fmt α0
            end in
          let* decoded :=
            let* α0 :=
              Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
            let* α1 := LangItem α0 in
            match α1 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          Pure (Ok (Some decoded)).
        
        Global Instance Method_get_contract_storage :
          Notation.Dot "get_contract_storage" := {
          Notation.dot := get_contract_storage;
        }.
        
        Definition take_contract_storage
            (self : mut_ref Self)
            (key : ref K)
            : M (crate.Result (Option R)) :=
          let* output := repeat 0 in
          let* _ :=
            let* α0 := key.["encode"] in
            let* α1 :=
              self.["engine"].["take_storage"]
                (addr_of α0)
                (addr_of (addr_of output[RangeFull {|  |}])) in
            match α1 with
            | Ok _ => Pure tt
            | Err ext.Error.KeyNotFound => Return (Ok None)
            | Err _ =>
              let* α0 :=
                format_arguments::["new_const"]
                  (addr_of [ "encountered unexpected error" ]) in
              _crate.panicking.panic_fmt α0
            end in
          let* decoded :=
            let* α0 :=
              Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
            let* α1 := LangItem α0 in
            match α1 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          Pure (Ok (Some decoded)).
        
        Global Instance Method_take_contract_storage :
          Notation.Dot "take_contract_storage" := {
          Notation.dot := take_contract_storage;
        }.
        
        Definition contains_contract_storage
            (self : mut_ref Self)
            (key : ref K)
            : M (Option u32) :=
          let* α0 := key.["encode"] in
          self.["engine"].["contains_storage"] (addr_of α0).
        
        Global Instance Method_contains_contract_storage :
          Notation.Dot "contains_contract_storage" := {
          Notation.dot := contains_contract_storage;
        }.
        
        Definition clear_contract_storage
            (self : mut_ref Self)
            (key : ref K)
            : M (Option u32) :=
          let* α0 := key.["encode"] in
          self.["engine"].["clear_storage"] (addr_of α0).
        
        Global Instance Method_clear_contract_storage :
          Notation.Dot "clear_contract_storage" := {
          Notation.dot := clear_contract_storage;
        }.
        
        Definition decode_input (self : mut_ref Self) : M (crate.Result T) :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: the off-chain env does not implement `input`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_decode_input : Notation.Dot "decode_input" := {
          Notation.dot := decode_input;
        }.
        
        Definition return_value
            (self : mut_ref Self)
            (_flags : crate.ReturnFlags)
            (_return_value : ref R)
            : M Empty_set :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: the off-chain env does not implement `return_value`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_return_value : Notation.Dot "return_value" := {
          Notation.dot := return_value;
        }.
        
        Definition debug_message
            (self : mut_ref Self)
            (message : ref str)
            : M unit :=
          self.["engine"].["debug_message"] message.
        
        Global Instance Method_debug_message : Notation.Dot "debug_message" := {
          Notation.dot := debug_message;
        }.
        
        Definition hash_bytes
            (self : mut_ref Self)
            (input : ref Slice)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          CryptoHash.hash input output.
        
        Global Instance Method_hash_bytes : Notation.Dot "hash_bytes" := {
          Notation.dot := hash_bytes;
        }.
        
        Definition hash_encoded
            (self : mut_ref Self)
            (input : ref T)
            (output : mut_ref HashOutput.Type)
            : M unit :=
          let* enc_input :=
            let* α0 := scale.Encode.encode input in
            Pure (addr_of α0[RangeFull {|  |}]) in
          CryptoHash.hash enc_input output.
        
        Global Instance Method_hash_encoded : Notation.Dot "hash_encoded" := {
          Notation.dot := hash_encoded;
        }.
        
        Definition ecdsa_recover
            (self : mut_ref Self)
            (signature : ref list u8)
            (message_hash : ref list u8)
            (output : mut_ref list u8)
            : M (crate.Result unit) :=
          let* recovery_byte :=
            let* α0 := signature[64].["gt"] 26 in
            if (α0 : bool) then
              signature[64].["sub"] 27
            else
              Pure signature[64] in
          let* recovery_id :=
            let* α0 := RecoveryId::["from_i32"] (cast recovery_byte i32) in
            α0.["unwrap_or_else"]
              (fun error =>
                let* α0 := format_argument::["new_display"] (addr_of error) in
                let* α1 :=
                  format_arguments::["new_v1"]
                    (addr_of [ "Unable to parse the recovery id: " ])
                    (addr_of [ α0 ]) in
                _crate.panicking.panic_fmt α1) in
          let* message :=
            let* α0 := Message::["from_slice"] message_hash in
            α0.["unwrap_or_else"]
              (fun error =>
                let* α0 := format_argument::["new_display"] (addr_of error) in
                let* α1 :=
                  format_arguments::["new_v1"]
                    (addr_of [ "Unable to create the message from hash: " ])
                    (addr_of [ α0 ]) in
                _crate.panicking.panic_fmt α1) in
          let* signature :=
            let* α0 :=
              RecoverableSignature::["from_compact"]
                (addr_of
                  signature[Range {| Range.start := 0; Range.end := 64; |}])
                recovery_id in
            α0.["unwrap_or_else"]
              (fun error =>
                let* α0 := format_argument::["new_display"] (addr_of error) in
                let* α1 :=
                  format_arguments::["new_v1"]
                    (addr_of [ "Unable to parse the signature: " ])
                    (addr_of [ α0 ]) in
                _crate.panicking.panic_fmt α1) in
          let* pub_key :=
            SECP256K1.["recover_ecdsa"] (addr_of message) (addr_of signature) in
          match pub_key with
          | Ok pub_key =>
            let* _ :=
              let* α0 := pub_key.["serialize"] in
              assign output.["deref"] α0 in
            Pure (Ok tt)
          | Err _ => Pure (Err Error.EcdsaRecoveryFailed)
          end.
        
        Global Instance Method_ecdsa_recover : Notation.Dot "ecdsa_recover" := {
          Notation.dot := ecdsa_recover;
        }.
        
        Definition ecdsa_to_eth_address
            (self : mut_ref Self)
            (pubkey : ref list u8)
            (output : mut_ref list u8)
            : M (crate.Result unit) :=
          let* pk :=
            let* α0 := secp256k1.PublicKey::["from_slice"] pubkey in
            let* α1 :=
              α0.["map_err"] (fun _ => Pure Error.EcdsaRecoveryFailed) in
            let* α2 := LangItem α1 in
            match α2 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          let* uncompressed := pk.["serialize_uncompressed"] in
          let* hash := HashOutput.Type::["default"] tt in
          let* _ :=
            crate.hash.Keccak256::["hash"]
              (addr_of uncompressed[RangeFrom {| RangeFrom.start := 1; |}])
              (addr_of hash) in
          let* _ :=
            let* α0 := output.["as_mut"] in
            α0.["copy_from_slice"]
              (addr_of hash[RangeFrom {| RangeFrom.start := 12; |}]) in
          Pure (Ok tt).
        
        Global Instance Method_ecdsa_to_eth_address :
          Notation.Dot "ecdsa_to_eth_address" := {
          Notation.dot := ecdsa_to_eth_address;
        }.
        
        Definition call_chain_extension
            (self : mut_ref Self)
            (func_id : u32)
            (input : ref I)
            (status_to_result : F)
            (decode_to_result : D)
            : M (Root.core.result.Result T E) :=
          let* enc_input :=
            let* α0 := scale.Encode.encode input in
            Pure (addr_of α0[RangeFull {|  |}]) in
          let* output := repeat 0 in
          let* _ :=
            self.["engine"].["call_chain_extension"]
              func_id
              enc_input
              (addr_of (addr_of output[RangeFull {|  |}])) in
          let* '(status, out) :=
            let* α0 :=
              scale.Decode.decode
                (addr_of (addr_of output[RangeFull {|  |}])) in
            α0.["unwrap_or_else"]
              (fun error =>
                let* α0 := format_argument::["new_debug"] (addr_of error) in
                let* α1 :=
                  format_arguments::["new_v1"]
                    (addr_of
                      [ "could not decode `call_chain_extension` output: " ])
                    (addr_of [ α0 ]) in
                _crate.panicking.panic_fmt α1) in
          let* _ :=
            let* α0 := status_to_result status in
            let* α1 := LangItem α0 in
            match α1 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          let* decoded :=
            let* α0 := decode_to_result (addr_of out[RangeFull {|  |}]) in
            let* α1 := LangItem α0 in
            match α1 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          Pure (Ok decoded).
        
        Global Instance Method_call_chain_extension :
          Notation.Dot "call_chain_extension" := {
          Notation.dot := call_chain_extension;
        }.
        
        Definition set_code_hash
            (self : mut_ref Self)
            (_code_hash : ref Slice)
            : M (crate.Result unit) :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support `set_code_hash`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_set_code_hash : Notation.Dot "set_code_hash" := {
          Notation.dot := set_code_hash;
        }.
        
        Global Instance I : EnvBackend.Trait Self := {
          EnvBackend.set_contract_storage := set_contract_storage;
          EnvBackend.get_contract_storage := get_contract_storage;
          EnvBackend.take_contract_storage := take_contract_storage;
          EnvBackend.contains_contract_storage := contains_contract_storage;
          EnvBackend.clear_contract_storage := clear_contract_storage;
          EnvBackend.decode_input := decode_input;
          EnvBackend.return_value := return_value;
          EnvBackend.debug_message := debug_message;
          EnvBackend.hash_bytes := hash_bytes;
          EnvBackend.hash_encoded := hash_encoded;
          EnvBackend.ecdsa_recover := ecdsa_recover;
          EnvBackend.ecdsa_to_eth_address := ecdsa_to_eth_address;
          EnvBackend.call_chain_extension := call_chain_extension;
          EnvBackend.set_code_hash := set_code_hash;
        }.
      End Impl_EnvBackend_for_super_EnvInstance.
      
      Module Impl_TypedEnvBackend_for_super_EnvInstance.
        Definition Self := super.EnvInstance.
        
        Definition caller (self : mut_ref Self) : M ImplE.AccountId :=
          let* α0 := self.["get_property"] ink_engine.ext.Engine::["caller"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `caller` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_caller : Notation.Dot "caller" := {
          Notation.dot := caller;
        }.
        
        Definition transferred_value (self : mut_ref Self) : M ImplE.Balance :=
          let* α0 :=
            self.["get_property"]
              ink_engine.ext.Engine::["value_transferred"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `transferred_value` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_transferred_value :
          Notation.Dot "transferred_value" := {
          Notation.dot := transferred_value;
        }.
        
        Definition gas_left (self : mut_ref Self) : M u64 :=
          let* α0 :=
            self.["get_property"] ink_engine.ext.Engine::["gas_left"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `gas_left` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_gas_left : Notation.Dot "gas_left" := {
          Notation.dot := gas_left;
        }.
        
        Definition block_timestamp (self : mut_ref Self) : M ImplE.Timestamp :=
          let* α0 :=
            self.["get_property"] ink_engine.ext.Engine::["block_timestamp"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `block_timestamp` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_block_timestamp :
          Notation.Dot "block_timestamp" := {
          Notation.dot := block_timestamp;
        }.
        
        Definition account_id (self : mut_ref Self) : M ImplE.AccountId :=
          let* α0 := self.["get_property"] ink_engine.ext.Engine::["address"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `account_id` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_account_id : Notation.Dot "account_id" := {
          Notation.dot := account_id;
        }.
        
        Definition balance (self : mut_ref Self) : M ImplE.Balance :=
          let* α0 := self.["get_property"] ink_engine.ext.Engine::["balance"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `balance` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_balance : Notation.Dot "balance" := {
          Notation.dot := balance;
        }.
        
        Definition block_number (self : mut_ref Self) : M ImplE.BlockNumber :=
          let* α0 :=
            self.["get_property"] ink_engine.ext.Engine::["block_number"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `block_number` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_block_number : Notation.Dot "block_number" := {
          Notation.dot := block_number;
        }.
        
        Definition minimum_balance (self : mut_ref Self) : M ImplE.Balance :=
          let* α0 :=
            self.["get_property"] ink_engine.ext.Engine::["minimum_balance"] in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `minimum_balance` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_minimum_balance :
          Notation.Dot "minimum_balance" := {
          Notation.dot := minimum_balance;
        }.
        
        Definition emit_event (self : mut_ref Self) (event : Event) : M unit :=
          let* builder := TopicsBuilder::["default"] tt in
          let* enc_topics :=
            let* α0 := builder.["into"] in
            event.["topics"] α0 in
          let* enc_data :=
            let* α0 := scale.Encode.encode (addr_of event) in
            Pure (addr_of α0[RangeFull {|  |}]) in
          let* _ :=
            self.["engine"].["deposit_event"]
              (addr_of enc_topics[RangeFull {|  |}])
              enc_data in
          Pure tt.
        
        Global Instance Method_emit_event : Notation.Dot "emit_event" := {
          Notation.dot := emit_event;
        }.
        
        Definition invoke_contract
            (self : mut_ref Self)
            (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
            : M (crate.Result (ink_primitives.MessageResult R)) :=
          let* _gas_limit := params.["gas_limit"] in
          let* _callee := params.["callee"] in
          let* _call_flags :=
            let* α0 := params.["call_flags"] in
            α0.["into_u32"] in
          let* _transferred_value := params.["transferred_value"] in
          let* _input := params.["exec_input"] in
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support contract invocation"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_invoke_contract :
          Notation.Dot "invoke_contract" := {
          Notation.dot := invoke_contract;
        }.
        
        Definition invoke_contract_delegate
            (self : mut_ref Self)
            (params
              :
              ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
            : M (crate.Result R) :=
          let* _code_hash := params.["code_hash"] in
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support delegated contract invocation"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_invoke_contract_delegate :
          Notation.Dot "invoke_contract_delegate" := {
          Notation.dot := invoke_contract_delegate;
        }.
        
        Definition instantiate_contract
            (self : mut_ref Self)
            (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
            :
              M
                (crate.Result
                  (ink_primitives.ConstructorResult
                    ConstructorReturnType.Output)) :=
          let* _code_hash := params.["code_hash"] in
          let* _gas_limit := params.["gas_limit"] in
          let* _endowment := params.["endowment"] in
          let* _input := params.["exec_input"] in
          let* _salt_bytes := params.["salt_bytes"] in
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support contract instantiation"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_instantiate_contract :
          Notation.Dot "instantiate_contract" := {
          Notation.dot := instantiate_contract;
        }.
        
        Definition terminate_contract
            (self : mut_ref Self)
            (beneficiary : ImplE.AccountId)
            : M Empty_set :=
          let* buffer := scale.Encode.encode (addr_of beneficiary) in
          self.["engine"].["terminate"] (addr_of buffer[RangeFull {|  |}]).
        
        Global Instance Method_terminate_contract :
          Notation.Dot "terminate_contract" := {
          Notation.dot := terminate_contract;
        }.
        
        Definition transfer
            (self : mut_ref Self)
            (destination : ImplE.AccountId)
            (value : ImplE.Balance)
            : M (crate.Result unit) :=
          let* enc_destination :=
            let* α0 := scale.Encode.encode (addr_of destination) in
            Pure (addr_of α0[RangeFull {|  |}]) in
          let* enc_value :=
            let* α0 := scale.Encode.encode (addr_of value) in
            Pure (addr_of α0[RangeFull {|  |}]) in
          let* α0 := self.["engine"].["transfer"] enc_destination enc_value in
          α0.["map_err"] Into.into.
        
        Global Instance Method_transfer : Notation.Dot "transfer" := {
          Notation.dot := transfer;
        }.
        
        Definition weight_to_fee
            (self : mut_ref Self)
            (gas : u64)
            : M ImplE.Balance :=
          let* output := repeat 0 in
          let* _ :=
            self.["engine"].["weight_to_fee"]
              gas
              (addr_of (addr_of output[RangeFull {|  |}])) in
          let* α0 :=
            scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "could not read `weight_to_fee` property: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1).
        
        Global Instance Method_weight_to_fee : Notation.Dot "weight_to_fee" := {
          Notation.dot := weight_to_fee;
        }.
        
        Definition is_contract
            (self : mut_ref Self)
            (account : ref ImplE.AccountId)
            : M bool :=
          let* α0 := scale.Encode.encode (addr_of account) in
          self.["engine"].["is_contract"] α0.
        
        Global Instance Method_is_contract : Notation.Dot "is_contract" := {
          Notation.dot := is_contract;
        }.
        
        Definition caller_is_origin (self : mut_ref Self) : M bool :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support cross-contract calls"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_caller_is_origin :
          Notation.Dot "caller_is_origin" := {
          Notation.dot := caller_is_origin;
        }.
        
        Definition code_hash
            (self : mut_ref Self)
            (_account : ref ImplE.AccountId)
            : M (crate.Result ImplE.Hash) :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support `code_hash`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_code_hash : Notation.Dot "code_hash" := {
          Notation.dot := code_hash;
        }.
        
        Definition own_code_hash
            (self : mut_ref Self)
            : M (crate.Result ImplE.Hash) :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support `own_code_hash`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_own_code_hash : Notation.Dot "own_code_hash" := {
          Notation.dot := own_code_hash;
        }.
        
        Definition call_runtime
            (self : mut_ref Self)
            (_call : ref crate.call.Call)
            : M (crate.Result unit) :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not support `call_runtime`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0.
        
        Global Instance Method_call_runtime : Notation.Dot "call_runtime" := {
          Notation.dot := call_runtime;
        }.
        
        Global Instance I : TypedEnvBackend.Trait Self := {
          TypedEnvBackend.caller := caller;
          TypedEnvBackend.transferred_value := transferred_value;
          TypedEnvBackend.weight_to_fee := weight_to_fee;
          TypedEnvBackend.gas_left := gas_left;
          TypedEnvBackend.block_timestamp := block_timestamp;
          TypedEnvBackend.account_id := account_id;
          TypedEnvBackend.balance := balance;
          TypedEnvBackend.block_number := block_number;
          TypedEnvBackend.minimum_balance := minimum_balance;
          TypedEnvBackend.emit_event := emit_event;
          TypedEnvBackend.invoke_contract := invoke_contract;
          TypedEnvBackend.invoke_contract_delegate := invoke_contract_delegate;
          TypedEnvBackend.instantiate_contract := instantiate_contract;
          TypedEnvBackend.terminate_contract := terminate_contract;
          TypedEnvBackend.transfer := transfer;
          TypedEnvBackend.is_contract := is_contract;
          TypedEnvBackend.caller_is_origin := caller_is_origin;
          TypedEnvBackend.code_hash := code_hash;
          TypedEnvBackend.own_code_hash := own_code_hash;
          TypedEnvBackend.call_runtime := call_runtime;
        }.
      End Impl_TypedEnvBackend_for_super_EnvInstance.
    End impls.
    
    Module test_api.
      Module EmittedEvent.
        Record t : Set := {
          topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
          data : ink_prelude.vec.Vec u8;
        }.
        
        Global Instance Get_topics : Notation.Dot "topics" := {
          Notation.dot '(Build_t x0 _) := x0;
        }.
        Global Instance Get_data : Notation.Dot "data" := {
          Notation.dot '(Build_t _ x1) := x1;
        }.
      End EmittedEvent.
      Definition EmittedEvent : Set := EmittedEvent.t.
      
      Module Impl__crate_clone_Clone_for_EmittedEvent.
        Definition Self := EmittedEvent.
        
        Definition clone (self : ref Self) : M EmittedEvent :=
          let* α0 := _crate.clone.Clone.clone (addr_of self.["topics"]) in
          let* α1 := _crate.clone.Clone.clone (addr_of self.["data"]) in
          Pure {| EmittedEvent.topics := α0; EmittedEvent.data := α1; |}.
        
        Global Instance Method_clone : Notation.Dot "clone" := {
          Notation.dot := clone;
        }.
        
        Global Instance I : _crate.clone.Clone.Trait Self := {
          _crate.clone.Clone.clone := clone;
        }.
      End Impl__crate_clone_Clone_for_EmittedEvent.
      
      Definition set_account_balance
          {T : Set}
          `{Environment.Trait T}
          (account_id : ImplT.AccountId)
          (new_balance : ImplT.Balance)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ :=
              let* α0 := scale.Encode.encode (addr_of account_id) in
              instance.["engine"].["set_balance"] α0 new_balance in
            Pure tt).
      
      Definition get_account_balance
          {T : Set}
          `{Environment.Trait T}
          (account_id : ImplT.AccountId)
          : M (crate.Result ImplT.Balance) :=
        OnInstance.on_instance
          (fun instance =>
            let* α0 := scale.Encode.encode (addr_of account_id) in
            let* α1 := instance.["engine"].["get_balance"] α0 in
            α1.["map_err"] Into.into).
      
      Definition register_chain_extension
          {E : Set}
          `{ink_engine.ChainExtension.Trait E}
          (extension : E)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ :=
              let* α0 := Box::["new"] extension in
              instance.["engine"].["chain_extension_handler"].["register"] α0 in
            Pure tt).
      
      Definition recorded_debug_messages
          (_ : unit)
          : M ink_engine.test_api.RecordedDebugMessages :=
        OnInstance.on_instance
          (fun instance => instance.["engine"].["get_emitted_debug_messages"]).
      
      Definition set_clear_storage_disabled (_disable : bool) : M unit :=
        let* _ :=
          let* α0 :=
            format_arguments::["new_v1"]
              (addr_of
                [
                  "not implemented: off-chain environment does not yet support `set_clear_storage_disabled`"
                ])
              (addr_of [ ]) in
          _crate.panicking.panic_fmt α0 in
        Pure tt.
      
      Definition advance_block
          {T : Set}
          `{Environment.Trait T}
          (_ : unit)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ := instance.["engine"].["advance_block"] in
            Pure tt).
      
      Definition set_caller
          {T : Set}
          `{Environment.Trait T}
          `{From.Trait list u8 Environment.AccountId}
          (caller : ImplT.AccountId)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ :=
              let* α0 := scale.Encode.encode (addr_of caller) in
              instance.["engine"].["set_caller"] α0 in
            Pure tt).
      
      Definition set_callee
          {T : Set}
          `{Environment.Trait T}
          `{From.Trait list u8 Environment.AccountId}
          (callee : ImplT.AccountId)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ :=
              let* α0 := scale.Encode.encode (addr_of callee) in
              instance.["engine"].["set_callee"] α0 in
            Pure tt).
      
      Definition set_contract
          {T : Set}
          `{Environment.Trait T}
          `{From.Trait list u8 Environment.AccountId}
          (contract : ImplT.AccountId)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ :=
              let* α0 := scale.Encode.encode (addr_of contract) in
              instance.["engine"].["set_contract"] α0 in
            Pure tt).
      
      Definition is_contract
          {T : Set}
          `{Environment.Trait T}
          `{From.Trait list u8 Environment.AccountId}
          (contract : ImplT.AccountId)
          : M bool :=
        OnInstance.on_instance
          (fun instance =>
            let* α0 := scale.Encode.encode (addr_of contract) in
            instance.["engine"].["is_contract"] α0).
      
      Definition callee
          {T : Set}
          `{Environment.Trait T}
          (_ : unit)
          : M ImplT.AccountId :=
        OnInstance.on_instance
          (fun instance =>
            let* callee := instance.["engine"].["get_callee"] in
            let* α0 :=
              scale.Decode.decode
                (addr_of (addr_of callee[RangeFull {|  |}])) in
            α0.["unwrap_or_else"]
              (fun err =>
                let* α0 := format_argument::["new_display"] (addr_of err) in
                let* α1 :=
                  format_arguments::["new_v1"]
                    (addr_of [ "encoding failed: " ])
                    (addr_of [ α0 ]) in
                _crate.panicking.panic_fmt α1)).
      
      Definition get_contract_storage_rw
          {T : Set}
          `{Environment.Trait T}
          (account_id : ref ImplT.AccountId)
          : M (usize * usize) :=
        OnInstance.on_instance
          (fun instance =>
            let* α0 := scale.Encode.encode (addr_of account_id) in
            instance.["engine"].["get_contract_storage_rw"] α0).
      
      Definition set_value_transferred
          {T : Set}
          `{Environment.Trait T}
          (value : ImplT.Balance)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ := instance.["engine"].["set_value_transferred"] value in
            Pure tt).
      
      Definition transfer_in
          {T : Set}
          `{Environment.Trait T}
          (value : ImplT.Balance)
          : M unit :=
        let* _ :=
          OnInstance.on_instance
            (fun instance =>
              let* caller :=
                let* α0 :=
                  instance.["engine"].["exec_context"].["caller"].["as_ref"] in
                let* α1 := α0.["expect"] "no caller has been set" in
                let* α2 := α1.["as_bytes"] in
                α2.["to_vec"] in
              let* caller_old_balance :=
                let* α0 := caller.["clone"] in
                let* α1 := instance.["engine"].["get_balance"] α0 in
                α1.["unwrap_or_default"] in
              let* callee := instance.["engine"].["get_callee"] in
              let* contract_old_balance :=
                let* α0 := callee.["clone"] in
                let* α1 := instance.["engine"].["get_balance"] α0 in
                α1.["unwrap_or_default"] in
              let* _ :=
                let* α0 := caller_old_balance.["sub"] value in
                instance.["engine"].["set_balance"] caller α0 in
              let* _ :=
                let* α0 := contract_old_balance.["add"] value in
                instance.["engine"].["set_balance"] callee α0 in
              let* _ := instance.["engine"].["set_value_transferred"] value in
              Pure tt) in
        Pure tt.
      
      Definition count_used_storage_cells
          {T : Set}
          `{Environment.Trait T}
          (account_id : ref ImplT.AccountId)
          : M (crate.Result usize) :=
        OnInstance.on_instance
          (fun instance =>
            let* α0 := scale.Encode.encode (addr_of account_id) in
            let* α1 :=
              instance.["engine"].["count_used_storage_cells"] (addr_of α0) in
            α1.["map_err"] Into.into).
      
      Definition set_block_timestamp
          {T : Set}
          `{Environment.Trait T}
          (value : ImplT.Timestamp)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ := instance.["engine"].["set_block_timestamp"] value in
            Pure tt).
      
      Definition set_block_number
          {T : Set}
          `{Environment.Trait T}
          (value : ImplT.BlockNumber)
          : M unit :=
        OnInstance.on_instance
          (fun instance =>
            let* _ := instance.["engine"].["set_block_number"] value in
            Pure tt).
      
      Definition run_test
          {T F : Set}
          `{Environment.Trait T}
          `{FnOnce.Trait ((DefaultAccounts T)) F}
          `{From.Trait list u8 Environment.AccountId}
          (f : F)
          : M (crate.Result unit) :=
        let* default_accounts := default_accounts tt in
        let* _ :=
          OnInstance.on_instance
            (fun instance =>
              let* _ := instance.["engine"].["initialize_or_reset"] in
              let* encoded_alice :=
                scale.Encode.encode (addr_of default_accounts.["alice"]) in
              let* _ :=
                let* α0 := encoded_alice.["clone"] in
                instance.["engine"].["set_caller"] α0 in
              let* _ :=
                let* α0 := encoded_alice.["clone"] in
                instance.["engine"].["set_callee"] α0 in
              let substantial := 1000000 in
              let some := 1000 in
              let* _ :=
                instance.["engine"].["set_balance"] encoded_alice substantial in
              let* _ :=
                let* α0 :=
                  scale.Encode.encode (addr_of default_accounts.["bob"]) in
                instance.["engine"].["set_balance"] α0 some in
              let* _ :=
                let* α0 :=
                  scale.Encode.encode (addr_of default_accounts.["charlie"]) in
                instance.["engine"].["set_balance"] α0 some in
              let* _ :=
                let* α0 :=
                  scale.Encode.encode (addr_of default_accounts.["django"]) in
                instance.["engine"].["set_balance"] α0 0 in
              let* _ :=
                let* α0 :=
                  scale.Encode.encode (addr_of default_accounts.["eve"]) in
                instance.["engine"].["set_balance"] α0 0 in
              let* _ :=
                let* α0 :=
                  scale.Encode.encode (addr_of default_accounts.["frank"]) in
                instance.["engine"].["set_balance"] α0 0 in
              Pure tt) in
        f default_accounts.
      
      Definition default_accounts
          {T : Set}
          `{Environment.Trait T}
          `{From.Trait list u8 Environment.AccountId}
          (_ : unit)
          : M (DefaultAccounts T) :=
        let* α0 := repeat 1 in
        let* α1 := ImplT.AccountId::["from"] α0 in
        let* α2 := repeat 2 in
        let* α3 := ImplT.AccountId::["from"] α2 in
        let* α4 := repeat 3 in
        let* α5 := ImplT.AccountId::["from"] α4 in
        let* α6 := repeat 4 in
        let* α7 := ImplT.AccountId::["from"] α6 in
        let* α8 := repeat 5 in
        let* α9 := ImplT.AccountId::["from"] α8 in
        let* α10 := repeat 6 in
        let* α11 := ImplT.AccountId::["from"] α10 in
        Pure
          {|
            DefaultAccounts.alice := α1;
            DefaultAccounts.bob := α3;
            DefaultAccounts.charlie := α5;
            DefaultAccounts.django := α7;
            DefaultAccounts.eve := α9;
            DefaultAccounts.frank := α11;
          |}.
      
      Module DefaultAccounts.
        Record t : Set := {
          alice : ImplT.AccountId;
          bob : ImplT.AccountId;
          charlie : ImplT.AccountId;
          django : ImplT.AccountId;
          eve : ImplT.AccountId;
          frank : ImplT.AccountId;
        }.
        
        Global Instance Get_alice : Notation.Dot "alice" := {
          Notation.dot '(Build_t x0 _ _ _ _ _) := x0;
        }.
        Global Instance Get_bob : Notation.Dot "bob" := {
          Notation.dot '(Build_t _ x1 _ _ _ _) := x1;
        }.
        Global Instance Get_charlie : Notation.Dot "charlie" := {
          Notation.dot '(Build_t _ _ x2 _ _ _) := x2;
        }.
        Global Instance Get_django : Notation.Dot "django" := {
          Notation.dot '(Build_t _ _ _ x3 _ _) := x3;
        }.
        Global Instance Get_eve : Notation.Dot "eve" := {
          Notation.dot '(Build_t _ _ _ _ x4 _) := x4;
        }.
        Global Instance Get_frank : Notation.Dot "frank" := {
          Notation.dot '(Build_t _ _ _ _ _ x5) := x5;
        }.
      End DefaultAccounts.
      Definition DefaultAccounts : Set := DefaultAccounts.t.
      
      Definition recorded_events (_ : unit) : M OpaqueDef :=
        OnInstance.on_instance
          (fun instance =>
            let* α0 := instance.["engine"].["get_emitted_events"] in
            α0.["map"] (fun evt => evt.["into"])).
      
      Definition assert_contract_termination
          {T F : Set}
          `{Environment.Trait T}
          `{FnMut.Trait unit F}
          `{UnwindSafe.Trait F}
          `{Debug.Trait Environment.AccountId}
          `{Debug.Trait Environment.Balance}
          (should_terminate : F)
          (expected_beneficiary : ImplT.AccountId)
          (expected_value_transferred_to_beneficiary : ImplT.Balance)
          : M unit :=
        let* value_any :=
          let* α0 := Root.std.panic.catch_unwind should_terminate in
          α0.["expect_err"] "contract did not terminate" in
        let* encoded_input :=
          let* α0 := value_any.["downcast_ref"] in
          α0.["expect"] "panic object can not be cast" in
        let* '(value_transferred, encoded_beneficiary) :=
          let* α0 :=
            scale.Decode.decode
              (addr_of (addr_of encoded_input[RangeFull {|  |}])) in
          α0.["unwrap_or_else"]
            (fun err =>
              let* α0 := format_argument::["new_display"] (addr_of err) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "input can not be decoded: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* beneficiary :=
          let* α0 :=
            scale.Decode.decode
              (addr_of (addr_of encoded_beneficiary[RangeFull {|  |}])) in
          α0.["unwrap_or_else"]
            (fun err =>
              let* α0 := format_argument::["new_display"] (addr_of err) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "input can not be decoded: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* _ :=
          match
            (addr_of value_transferred,
              addr_of expected_value_transferred_to_beneficiary)
          with
          | (left_val, right_val) =>
            let* α0 := left_val.["deref"] in
            let* α1 := right_val.["deref"] in
            let* α2 := α0.["eq"] α1 in
            let* α3 := α2.["not"] in
            if (α3 : bool) then
              let kind := _crate.panicking.AssertKind.Eq in
              let* _ :=
                let* α0 := left_val.["deref"] in
                let* α1 := right_val.["deref"] in
                _crate.panicking.assert_failed
                  kind
                  (addr_of α0)
                  (addr_of α1)
                  _crate.option.Option.None in
              Pure tt
            else
              Pure tt
          end in
        let* _ :=
          match (addr_of beneficiary, addr_of expected_beneficiary) with
          | (left_val, right_val) =>
            let* α0 := left_val.["deref"] in
            let* α1 := right_val.["deref"] in
            let* α2 := α0.["eq"] α1 in
            let* α3 := α2.["not"] in
            if (α3 : bool) then
              let kind := _crate.panicking.AssertKind.Eq in
              let* _ :=
                let* α0 := left_val.["deref"] in
                let* α1 := right_val.["deref"] in
                _crate.panicking.assert_failed
                  kind
                  (addr_of α0)
                  (addr_of α1)
                  _crate.option.Option.None in
              Pure tt
            else
              Pure tt
          end in
        Pure tt.
    End test_api.
    
    Module types.
      Module Impl_From_for_super_test_api_EmittedEvent.
        Definition Self := super.test_api.EmittedEvent.
        
        Definition from (evt : ink_engine.test_api.EmittedEvent) : M Self :=
          Pure
            {|
              super.test_api.EmittedEvent.topics := evt.["topics"];
              super.test_api.EmittedEvent.data := evt.["data"];
            |}.
        
        Global Instance AssociatedFunction_from :
          Notation.DoubleColon Self "from" := {
          Notation.double_colon := from;
        }.
        
        Global Instance I : From.Trait Self ink_engine.test_api.EmittedEvent :=
          {
          From.from := from;
        }.
      End Impl_From_for_super_test_api_EmittedEvent.
      
      Module Impl_From_for_super_Error.
        Definition Self := super.Error.
        
        Definition from (err : ink_engine.Error) : M Self :=
          let* e :=
            match err with
            | ink_engine.Error.Account acc =>
              let* α0 := acc.["into"] in
              Pure (OffChainError.Account α0)
            | ink_engine.Error.UninitializedBlocks =>
              Pure OffChainError.UninitializedBlocks
            | ink_engine.Error.UninitializedExecutionContext =>
              Pure OffChainError.UninitializedExecutionContext
            | ink_engine.Error.UnregisteredChainExtension =>
              Pure OffChainError.UnregisteredChainExtension
            end in
          Pure (Error.OffChain e).
        
        Global Instance AssociatedFunction_from :
          Notation.DoubleColon Self "from" := {
          Notation.double_colon := from;
        }.
        
        Global Instance I : From.Trait Self ink_engine.Error := {
          From.from := from;
        }.
      End Impl_From_for_super_Error.
      
      Module Impl_From_for_super_AccountError.
        Definition Self := super.AccountError.
        
        Definition from (err : ink_engine.AccountError) : M Self :=
          match err with
          | ink_engine.AccountError.Decoding e => Pure (AccountError.Decoding e)
          | ink_engine.AccountError.UnexpectedUserAccount =>
            Pure AccountError.UnexpectedUserAccount
          | ink_engine.AccountError.NoAccountForId acc =>
            Pure (AccountError.NoAccountForId acc)
          end.
        
        Global Instance AssociatedFunction_from :
          Notation.DoubleColon Self "from" := {
          Notation.double_colon := from;
        }.
        
        Global Instance I : From.Trait Self ink_engine.AccountError := {
          From.from := from;
        }.
      End Impl_From_for_super_AccountError.
      
      Module Impl_From_for_super_Error.
        Definition Self := super.Error.
        
        Definition from (account_error : ink_engine.AccountError) : M Self :=
          let* α0 := account_error.["into"] in
          Pure (Error.OffChain (OffChainError.Account α0)).
        
        Global Instance AssociatedFunction_from :
          Notation.DoubleColon Self "from" := {
          Notation.double_colon := from;
        }.
        
        Global Instance I : From.Trait Self ink_engine.AccountError := {
          From.from := from;
        }.
      End Impl_From_for_super_Error.
    End types.
    
    Module From := derive_more.From.
    
    Module EnvInstance.
      Record t : Set := {
        engine : ink_engine.ext.Engine;
      }.
      
      Global Instance Get_engine : Notation.Dot "engine" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End EnvInstance.
    Definition EnvInstance : Set := EnvInstance.t.
    
    Module Impl_OnInstance_for_super_EnvInstance.
      Definition Self := super.EnvInstance.
      
      Definition on_instance (f : F) : M R :=
        INSTANCE.["with"]
          (fun instance =>
            let* α0 := instance.["borrow_mut"] in
            f (addr_of α0)).
      
      Global Instance AssociatedFunction_on_instance :
        Notation.DoubleColon Self "on_instance" := {
        Notation.double_colon := on_instance;
      }.
      
      Global Instance I : OnInstance.Trait Self := {
        OnInstance.on_instance := on_instance;
      }.
    End Impl_OnInstance_for_super_EnvInstance.
    
    Module OffChainError.
      Inductive t : Set :=
      | Account (_ : super.AccountError)
      | UninitializedBlocks
      | UninitializedExecutionContext
      | UnregisteredChainExtension.
    End OffChainError.
    Definition OffChainError := OffChainError.t.
    
    Module Impl__crate_fmt_Debug_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        match self with
        | OffChainError.Account __self_0 =>
          _crate.fmt.Formatter::["debug_tuple_field1_finish"]
            f
            "Account"
            (addr_of __self_0)
        | OffChainError.UninitializedBlocks =>
          _crate.fmt.Formatter::["write_str"] f "UninitializedBlocks"
        | OffChainError.UninitializedExecutionContext =>
          _crate.fmt.Formatter::["write_str"] f "UninitializedExecutionContext"
        | OffChainError.UnregisteredChainExtension =>
          _crate.fmt.Formatter::["write_str"] f "UnregisteredChainExtension"
        end.
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_super_OffChainError.
    
    Module Impl_Root_core_convert_From_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Definition from (original : super.AccountError) : M super.OffChainError :=
        Pure (OffChainError.Account original).
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I
          :
          Root.core.convert.From.Trait
          Self
          super.AccountError :=
        {
        Root.core.convert.From.from := from;
      }.
    End Impl_Root_core_convert_From_for_super_OffChainError.
    
    Module Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
        _crate.marker.StructuralPartialEq.Build_Class _.
    End Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.
    
    Module Impl__crate_cmp_PartialEq_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Definition eq
          (self : ref Self)
          (other : ref super.OffChainError)
          : M bool :=
        let* __self_tag := _crate.intrinsics.discriminant_value self in
        let* __arg1_tag := _crate.intrinsics.discriminant_value other in
        let* α0 := __self_tag.["eq"] __arg1_tag in
        let* α1 :=
          match (self, other) with
          | (OffChainError.Account __self_0, OffChainError.Account __arg1_0) =>
            let* α0 := __self_0.["deref"] in
            let* α1 := __arg1_0.["deref"] in
            α0.["eq"] α1
          | _ => Pure true
          end in
        α0.["andb"] α1.
      
      Global Instance Method_eq : Notation.Dot "eq" := {
        Notation.dot := eq;
      }.
      
      Global Instance I : _crate.cmp.PartialEq.Trait Self := {
        _crate.cmp.PartialEq.eq := eq;
      }.
    End Impl__crate_cmp_PartialEq_for_super_OffChainError.
    
    Module Impl__crate_marker_StructuralEq_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Global Instance I : _crate.marker.StructuralEq.Trait Self :=
        _crate.marker.StructuralEq.Build_Class _.
    End Impl__crate_marker_StructuralEq_for_super_OffChainError.
    
    Module Impl__crate_cmp_Eq_for_super_OffChainError.
      Definition Self := super.OffChainError.
      
      Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
        let _ := tt in
        Pure tt.
      
      Global Instance Method_assert_receiver_is_total_eq :
        Notation.Dot "assert_receiver_is_total_eq" := {
        Notation.dot := assert_receiver_is_total_eq;
      }.
      
      Global Instance I : _crate.cmp.Eq.Trait Self := {
      }.
    End Impl__crate_cmp_Eq_for_super_OffChainError.
    
    Module AccountError.
      Inductive t : Set :=
      | Decoding (_ : scale.Error)
      | UnexpectedUserAccount
      | NoAccountForId (_ : ink_prelude.vec.Vec u8).
    End AccountError.
    Definition AccountError := AccountError.t.
    
    Module Impl__crate_fmt_Debug_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        match self with
        | AccountError.Decoding __self_0 =>
          _crate.fmt.Formatter::["debug_tuple_field1_finish"]
            f
            "Decoding"
            (addr_of __self_0)
        | AccountError.UnexpectedUserAccount =>
          _crate.fmt.Formatter::["write_str"] f "UnexpectedUserAccount"
        | AccountError.NoAccountForId __self_0 =>
          _crate.fmt.Formatter::["debug_tuple_field1_finish"]
            f
            "NoAccountForId"
            (addr_of __self_0)
        end.
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_super_AccountError.
    
    Module Impl_Root_core_convert_From_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Definition from (original : scale.Error) : M super.AccountError :=
        Pure (AccountError.Decoding original).
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : Root.core.convert.From.Trait Self scale.Error := {
        Root.core.convert.From.from := from;
      }.
    End Impl_Root_core_convert_From_for_super_AccountError.
    
    Module Impl__crate_marker_StructuralPartialEq_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
        _crate.marker.StructuralPartialEq.Build_Class _.
    End Impl__crate_marker_StructuralPartialEq_for_super_AccountError.
    
    Module Impl__crate_cmp_PartialEq_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Definition eq
          (self : ref Self)
          (other : ref super.AccountError)
          : M bool :=
        let* __self_tag := _crate.intrinsics.discriminant_value self in
        let* __arg1_tag := _crate.intrinsics.discriminant_value other in
        let* α0 := __self_tag.["eq"] __arg1_tag in
        let* α1 :=
          match (self, other) with
          | (AccountError.Decoding __self_0, AccountError.Decoding __arg1_0) =>
            let* α0 := __self_0.["deref"] in
            let* α1 := __arg1_0.["deref"] in
            α0.["eq"] α1
          |
              (AccountError.NoAccountForId __self_0,
                AccountError.NoAccountForId __arg1_0)
              =>
            let* α0 := __self_0.["deref"] in
            let* α1 := __arg1_0.["deref"] in
            α0.["eq"] α1
          | _ => Pure true
          end in
        α0.["andb"] α1.
      
      Global Instance Method_eq : Notation.Dot "eq" := {
        Notation.dot := eq;
      }.
      
      Global Instance I : _crate.cmp.PartialEq.Trait Self := {
        _crate.cmp.PartialEq.eq := eq;
      }.
    End Impl__crate_cmp_PartialEq_for_super_AccountError.
    
    Module Impl__crate_marker_StructuralEq_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Global Instance I : _crate.marker.StructuralEq.Trait Self :=
        _crate.marker.StructuralEq.Build_Class _.
    End Impl__crate_marker_StructuralEq_for_super_AccountError.
    
    Module Impl__crate_cmp_Eq_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
        let _ := tt in
        let _ := tt in
        Pure tt.
      
      Global Instance Method_assert_receiver_is_total_eq :
        Notation.Dot "assert_receiver_is_total_eq" := {
        Notation.dot := assert_receiver_is_total_eq;
      }.
      
      Global Instance I : _crate.cmp.Eq.Trait Self := {
      }.
    End Impl__crate_cmp_Eq_for_super_AccountError.
  End off_chain.
  
  (* #[allow(dead_code)] - function was ignored by the compiler *)
  Definition decode_instantiate_result
      {I E ContractRef R : Set}
      `{scale.Input.Trait I}
      `{crate.Environment.Trait E}
      `{FromAccountId.Trait E ContractRef}
      `{ConstructorReturnType.Trait ContractRef R}
      (instantiate_result : crate.Result unit)
      (out_address : mut_ref I)
      (out_return_value : mut_ref I)
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
    match instantiate_result with
    | Ok () =>
      let* account_id :=
        let* α0 := scale.Decode.decode out_address in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      let* contract_ref := FromAccountId.from_account_id account_id in
      let* output := ConstructorReturnType.ok contract_ref in
      Pure (Ok (Ok output))
    | Err EnvError.CalleeReverted => decode_instantiate_err out_return_value
    | Err actual_error => Pure (Err actual_error)
    end.
  
  (* #[allow(dead_code)] - function was ignored by the compiler *)
  Definition decode_instantiate_err
      {I E ContractRef R : Set}
      `{scale.Input.Trait I}
      `{crate.Environment.Trait E}
      `{FromAccountId.Trait E ContractRef}
      `{ConstructorReturnType.Trait ContractRef R}
      (out_return_value : mut_ref I)
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
    let* constructor_result_variant :=
      let* α0 := out_return_value.["read_byte"] in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    match constructor_result_variant with
    | 0 =>
      if (ConstructorReturnType.IS_RESULT : bool) then
        let* result_variant :=
          let* α0 := out_return_value.["read_byte"] in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        match result_variant with
        | 0 =>
          let* α0 :=
            format_arguments::["new_const"]
              (addr_of
                [
                  "The callee reverted, but did not encode an error in the output buffer."
                ]) in
          _crate.panicking.panic_fmt α0
        | 1 =>
          let* contract_err :=
            let* α0 := scale.Decode.decode out_return_value in
            let* α1 := LangItem α0 in
            match α1 with
            | Break {| Break.0 := residual; |} =>
              let* α0 := LangItem residual in
              Return α0
            | Continue {| Continue.0 := val; |} => Pure val
            end in
          let* err :=
            let* α0 := ConstructorReturnType.err contract_err in
            α0.["unwrap_or_else"]
              (fun  =>
                let* α0 :=
                  format_arguments::["new_const"]
                    (addr_of
                      [
                        "Expected an error instance for return type where IS_RESULT == true"
                      ]) in
                _crate.panicking.panic_fmt α0) in
          Pure (Ok (Ok err))
        | _ =>
          let* α0 :=
            "Invalid inner constructor Result encoding, expected 0 or 1 as the first byte".["into"] in
          Pure (Err (Error.Decode α0))
        end
      else
        let* α0 :=
          format_arguments::["new_const"]
            (addr_of
              [
                "The callee reverted, but did not encode an error in the output buffer."
              ]) in
        _crate.panicking.panic_fmt α0
    | 1 =>
      let* lang_err :=
        let* α0 := scale.Decode.decode out_return_value in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      Pure (Ok (Err lang_err))
    | _ =>
      let* α0 :=
        "Invalid outer constructor Result encoding, expected 0 or 1 as the first byte".["into"] in
      Pure (Err (Error.Decode α0))
    end.
End engine.

Module cfg_if := cfg_if.cfg_if.

Module OnInstance.
  Class Trait (Self : Set) : Set := {
    on_instance : F -> (M R);
  }.
  
  Global Instance Method_on_instance `(Trait) : Notation.Dot "on_instance" := {
    Notation.dot := on_instance;
  }.
End OnInstance.

Module off_chain.
  Module call_data.
    Module vec := ink_prelude.vec.
    
    Module CallData.
      Record t : Set := {
        bytes : ink_prelude.vec.Vec u8;
      }.
      
      Global Instance Get_bytes : Notation.Dot "bytes" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End CallData.
    Definition CallData : Set := CallData.t.
    
    Module Impl__crate_fmt_Debug_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition fmt
          (self : ref Self)
          (f : mut_ref _crate.fmt.Formatter)
          : M _crate.fmt.Result :=
        _crate.fmt.Formatter::["debug_struct_field1_finish"]
          f
          "CallData"
          "bytes"
          (addr_of (addr_of self.["bytes"])).
      
      Global Instance Method_fmt : Notation.Dot "fmt" := {
        Notation.dot := fmt;
      }.
      
      Global Instance I : _crate.fmt.Debug.Trait Self := {
        _crate.fmt.Debug.fmt := fmt;
      }.
    End Impl__crate_fmt_Debug_for_call_data_CallData.
    
    Module Impl__crate_clone_Clone_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition clone (self : ref Self) : M call_data.CallData :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["bytes"]) in
        Pure {| call_data.CallData.bytes := α0; |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_call_data_CallData.
    
    Module Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
        _crate.marker.StructuralPartialEq.Build_Class _.
    End Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.
    
    Module Impl__crate_cmp_PartialEq_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition eq
          (self : ref Self)
          (other : ref call_data.CallData)
          : M bool :=
        self.["bytes"].["eq"] other.["bytes"].
      
      Global Instance Method_eq : Notation.Dot "eq" := {
        Notation.dot := eq;
      }.
      
      Global Instance I : _crate.cmp.PartialEq.Trait Self := {
        _crate.cmp.PartialEq.eq := eq;
      }.
    End Impl__crate_cmp_PartialEq_for_call_data_CallData.
    
    Module Impl__crate_marker_StructuralEq_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Global Instance I : _crate.marker.StructuralEq.Trait Self :=
        _crate.marker.StructuralEq.Build_Class _.
    End Impl__crate_marker_StructuralEq_for_call_data_CallData.
    
    Module Impl__crate_cmp_Eq_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
        let _ := tt in
        Pure tt.
      
      Global Instance Method_assert_receiver_is_total_eq :
        Notation.Dot "assert_receiver_is_total_eq" := {
        Notation.dot := assert_receiver_is_total_eq;
      }.
      
      Global Instance I : _crate.cmp.Eq.Trait Self := {
      }.
    End Impl__crate_cmp_Eq_for_call_data_CallData.
    
    Module Implcall_data.CallData.
      Definition Self := call_data.CallData.
      
      Definition new (selector : crate.call.Selector) : M Self :=
        let* bytes := selector.["to_bytes"] in
        let* α0 :=
          _crate.boxed.Box::["new"]
            [ bytes[0]; bytes[1]; bytes[2]; bytes[3] ] in
        let* α1 := Slice::["into_vec"] α0 in
        Pure {| Self.bytes := α1; |}.
      
      Global Instance AssociatedFunction_new :
        Notation.DoubleColon Self "new" := {
        Notation.double_colon := new;
      }.
      
      Definition push_arg (self : mut_ref Self) (arg : ref A) : M unit :=
        arg.["encode_to"] (addr_of self.["bytes"]).
      
      Global Instance Method_push_arg : Notation.Dot "push_arg" := {
        Notation.dot := push_arg;
      }.
      
      Definition selector (self : ref Self) : M crate.call.Selector :=
        let* _ :=
          if (true : bool) then
            let* _ :=
              let* α0 := self.["bytes"].["len"] in
              let* α1 := α0.["ge"] 4 in
              let* α2 := α1.["not"] in
              if (α2 : bool) then
                _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
              else
                Pure tt in
            Pure tt
          else
            Pure tt in
        let bytes :=
          [
            self.["bytes"][0];
            self.["bytes"][1];
            self.["bytes"][2];
            self.["bytes"][3]
          ] in
        bytes.["into"].
      
      Global Instance Method_selector : Notation.Dot "selector" := {
        Notation.dot := selector;
      }.
      
      Definition params (self : ref Self) : M (ref Slice) :=
        let* _ :=
          if (true : bool) then
            let* _ :=
              let* α0 := self.["bytes"].["len"] in
              let* α1 := α0.["ge"] 4 in
              let* α2 := α1.["not"] in
              if (α2 : bool) then
                _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
              else
                Pure tt in
            Pure tt
          else
            Pure tt in
        Pure (addr_of self.["bytes"][RangeFrom {| RangeFrom.start := 4; |}]).
      
      Global Instance Method_params : Notation.Dot "params" := {
        Notation.dot := params;
      }.
      
      Definition to_bytes (self : ref Self) : M (ref Slice) :=
        Pure (addr_of self.["bytes"]).
      
      Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
        Notation.dot := to_bytes;
      }.
    End Implcall_data.CallData.
    
    Module Impl_scale_Encode_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition size_hint (self : ref Self) : M usize :=
        self.["bytes"].["len"].
      
      Global Instance Method_size_hint : Notation.Dot "size_hint" := {
        Notation.dot := size_hint;
      }.
      
      Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
        let* _ :=
          let* α0 := self.["bytes"].["as_slice"] in
          dest.["write"] α0 in
        Pure tt.
      
      Global Instance Method_encode_to : Notation.Dot "encode_to" := {
        Notation.dot := encode_to;
      }.
      
      Global Instance I : scale.Encode.Trait Self := {
      }.
    End Impl_scale_Encode_for_call_data_CallData.
    
    Module Impl_scale_Decode_for_call_data_CallData.
      Definition Self := call_data.CallData.
      
      Definition decode
          (input : mut_ref I)
          : M (core.result.Result Self scale.Error) :=
        let* remaining_len :=
          let* α0 := input.["remaining_len"] in
          let* α1 := α0.["unwrap_or"] None in
          α1.["unwrap_or"] 0 in
        let* bytes := ink_prelude.vec.Vec::["with_capacity"] remaining_len in
        let* _ :=
          loop
            let* α0 := input.["read_byte"] in
            let* α1 := let_if Ok byte := α0 in
            if (α1 : bool) then
              let* _ := bytes.["push"] byte in
              Pure tt
            else
              let _ := Break in
              Pure tt
            from
            while in
        let* _ :=
          let* α0 := bytes.["len"] in
          let* α1 := α0.["lt"] 4 in
          if (α1 : bool) then
            let* α0 :=
              scale.Error::["from"] "require at least 4 bytes for input data" in
            Return (Err α0)
          else
            Pure tt in
        Pure (Ok {| Self.bytes := bytes; |}).
      
      Global Instance AssociatedFunction_decode :
        Notation.DoubleColon Self "decode" := {
        Notation.double_colon := decode;
      }.
      
      Global Instance I : scale.Decode.Trait Self := {
        scale.Decode.decode := decode;
      }.
    End Impl_scale_Decode_for_call_data_CallData.
  End call_data.
  
  Module impls.
    Module ext := ink_engine.ext.
    
    Definition BUFFER_SIZE : usize := run (1.["shl"] 14).
    
    Module Impl_CryptoHash_for_crate_hash_Blake2x128.
      Definition Self := crate.hash.Blake2x128.
      
      Definition hash
          (input : ref Slice)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        let* output :=
          let offset := 0 in
          let slice :=
            addr_of
              output[Range
                  {|
                  Range.start := offset;
                  Range.end := offset.["add"] 16;
                |}] in
          as_array slice in
        let* _ := ink_engine.ext.Engine::["hash_blake2_128"] input output in
        Pure tt.
      
      Global Instance AssociatedFunction_hash :
        Notation.DoubleColon Self "hash" := {
        Notation.double_colon := hash;
      }.
      
      Global Instance I : CryptoHash.Trait Self := {
        CryptoHash.hash := hash;
      }.
    End Impl_CryptoHash_for_crate_hash_Blake2x128.
    
    Module Impl_CryptoHash_for_crate_hash_Blake2x256.
      Definition Self := crate.hash.Blake2x256.
      
      Definition hash
          (input : ref Slice)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        let* output :=
          let offset := 0 in
          let slice :=
            addr_of
              output[Range
                  {|
                  Range.start := offset;
                  Range.end := offset.["add"] 32;
                |}] in
          as_array slice in
        let* _ := ink_engine.ext.Engine::["hash_blake2_256"] input output in
        Pure tt.
      
      Global Instance AssociatedFunction_hash :
        Notation.DoubleColon Self "hash" := {
        Notation.double_colon := hash;
      }.
      
      Global Instance I : CryptoHash.Trait Self := {
        CryptoHash.hash := hash;
      }.
    End Impl_CryptoHash_for_crate_hash_Blake2x256.
    
    Module Impl_CryptoHash_for_crate_hash_Sha2x256.
      Definition Self := crate.hash.Sha2x256.
      
      Definition hash
          (input : ref Slice)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        let* output :=
          let offset := 0 in
          let slice :=
            addr_of
              output[Range
                  {|
                  Range.start := offset;
                  Range.end := offset.["add"] 32;
                |}] in
          as_array slice in
        let* _ := ink_engine.ext.Engine::["hash_sha2_256"] input output in
        Pure tt.
      
      Global Instance AssociatedFunction_hash :
        Notation.DoubleColon Self "hash" := {
        Notation.double_colon := hash;
      }.
      
      Global Instance I : CryptoHash.Trait Self := {
        CryptoHash.hash := hash;
      }.
    End Impl_CryptoHash_for_crate_hash_Sha2x256.
    
    Module Impl_CryptoHash_for_crate_hash_Keccak256.
      Definition Self := crate.hash.Keccak256.
      
      Definition hash
          (input : ref Slice)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        let* output :=
          let offset := 0 in
          let slice :=
            addr_of
              output[Range
                  {|
                  Range.start := offset;
                  Range.end := offset.["add"] 32;
                |}] in
          as_array slice in
        let* _ := ink_engine.ext.Engine::["hash_keccak_256"] input output in
        Pure tt.
      
      Global Instance AssociatedFunction_hash :
        Notation.DoubleColon Self "hash" := {
        Notation.double_colon := hash;
      }.
      
      Global Instance I : CryptoHash.Trait Self := {
        CryptoHash.hash := hash;
      }.
    End Impl_CryptoHash_for_crate_hash_Keccak256.
    
    Module Impl_From_for_crate_Error.
      Definition Self := crate.Error.
      
      Definition from (ext_error : ext.Error) : M Self :=
        match ext_error with
        | ext.Error.Unknown => Pure Self::["Unknown"]
        | ext.Error.CalleeTrapped => Pure Self::["CalleeTrapped"]
        | ext.Error.CalleeReverted => Pure Self::["CalleeReverted"]
        | ext.Error.KeyNotFound => Pure Self::["KeyNotFound"]
        | ext.Error._BelowSubsistenceThreshold =>
          Pure Self::["_BelowSubsistenceThreshold"]
        | ext.Error.TransferFailed => Pure Self::["TransferFailed"]
        | ext.Error._EndowmentTooLow => Pure Self::["_EndowmentTooLow"]
        | ext.Error.CodeNotFound => Pure Self::["CodeNotFound"]
        | ext.Error.NotCallable => Pure Self::["NotCallable"]
        | ext.Error.LoggingDisabled => Pure Self::["LoggingDisabled"]
        | ext.Error.EcdsaRecoveryFailed => Pure Self::["EcdsaRecoveryFailed"]
        end.
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : From.Trait Self ext.Error := {
        From.from := from;
      }.
    End Impl_From_for_crate_Error.
    
    Module TopicsBuilder.
      Record t : Set := {
        topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
      }.
      
      Global Instance Get_topics : Notation.Dot "topics" := {
        Notation.dot '(Build_t x0) := x0;
      }.
    End TopicsBuilder.
    Definition TopicsBuilder : Set := TopicsBuilder.t.
    
    Module Impl__crate_default_Default_for_TopicsBuilder.
      Definition Self := TopicsBuilder.
      
      Definition default (_ : unit) : M TopicsBuilder :=
        let* α0 := _crate.default.Default.default tt in
        Pure {| TopicsBuilder.topics := α0; |}.
      
      Global Instance AssociatedFunction_default :
        Notation.DoubleColon Self "default" := {
        Notation.double_colon := default;
      }.
      
      Global Instance I : _crate.default.Default.Trait Self := {
        _crate.default.Default.default := default;
      }.
    End Impl__crate_default_Default_for_TopicsBuilder.
    
    Module Impl_TopicsBuilderBackend_for_TopicsBuilder.
      Definition Self := TopicsBuilder.
      
      Definition Output : Set := ink_prelude.vec.Vec u8.
      
      Definition expect
          (self : mut_ref Self)
          (_expected_topics : usize)
          : M unit :=
        Pure tt.
      
      Global Instance Method_expect : Notation.Dot "expect" := {
        Notation.dot := expect;
      }.
      
      Definition push_topic
          (self : mut_ref Self)
          (topic_value : ref T)
          : M unit :=
        let* encoded := topic_value.["encode"] in
        let* len_encoded := encoded.["len"] in
        let result := Environment.Hash::["CLEAR_HASH"] in
        let* len_result :=
          let* α0 := result.["as_ref"] in
          α0.["len"] in
        let* _ :=
          let* α0 := len_encoded.["le"] len_result in
          if (α0 : bool) then
            let* _ :=
              let* α0 := result.["as_mut"] in
              α0[RangeTo {| RangeTo.end := len_encoded; |}].["copy_from_slice"]
                (addr_of encoded[RangeFull {|  |}]) in
            Pure tt
          else
            let* hash_output := HashOutput.Type::["default"] tt in
            let* _ :=
              CryptoHash.hash
                (addr_of encoded[RangeFull {|  |}])
                (addr_of hash_output) in
            let* copy_len :=
              let* α0 := hash_output.["len"] in
              core.cmp.min α0 len_result in
            let* _ :=
              let* α0 := result.["as_mut"] in
              α0[Range {| Range.start := 0; Range.end := copy_len;
                  |}].["copy_from_slice"]
                (addr_of
                  hash_output[Range {| Range.start := 0; Range.end := copy_len;
                    |}]) in
            Pure tt in
        let* off_hash := result.["as_ref"] in
        let* off_hash := off_hash.["to_vec"] in
        let* _ :=
          if (true : bool) then
            let* _ :=
              let* α0 := self.["topics"].["contains"] (addr_of off_hash) in
              let* α1 := α0.["not"] in
              let* α2 := α1.["not"] in
              if (α2 : bool) then
                let* α0 :=
                  format_arguments::["new_const"]
                    (addr_of [ "duplicate topic hash discovered!" ]) in
                _crate.panicking.panic_fmt α0
              else
                Pure tt in
            Pure tt
          else
            Pure tt in
        let* _ := self.["topics"].["push"] off_hash in
        Pure tt.
      
      Global Instance Method_push_topic : Notation.Dot "push_topic" := {
        Notation.dot := push_topic;
      }.
      
      Definition output (self : Self) : M ImplSelf.Output :=
        let* all := ink_prelude.vec.Vec::["new"] tt in
        let* topics_len_compact :=
          let* α0 := self.["topics"].["len"] in
          Pure (addr_of (scale.Compact.Build_t (cast α0 u32))) in
        let* topics_encoded :=
          let* α0 := scale.Encode.encode (addr_of topics_len_compact) in
          Pure (addr_of α0[RangeFull {|  |}]) in
        let* _ :=
          let* α0 := topics_encoded.["to_vec"] in
          all.["append"] (addr_of α0) in
        let* _ :=
          let* α0 := self.["topics"].["into_iter"] in
          α0.["for_each"] (fun v => all.["append"] (addr_of v)) in
        Pure all.
      
      Global Instance Method_output : Notation.Dot "output" := {
        Notation.dot := output;
      }.
      
      Global Instance I E : TopicsBuilderBackend.Trait Self E := {
        TopicsBuilderBackend.expect := expect;
        TopicsBuilderBackend.push_topic := push_topic;
        TopicsBuilderBackend.output := output;
      }.
    End Impl_TopicsBuilderBackend_for_TopicsBuilder.
    
    Module Implsuper.EnvInstance_2.
      Definition Self := super.EnvInstance.
      
      Definition get_property
          (self : mut_ref Self)
          (ext_fn
            :
            (ref ink_engine.ext.Engine) -> (mut_ref (mut_ref Slice)) -> unit)
          : M (crate.Result T) :=
        let* full_scope := repeat 0 in
        let full_scope := addr_of (addr_of full_scope[RangeFull {|  |}]) in
        let* _ := ext_fn (addr_of self.["engine"]) full_scope in
        let* α0 :=
          scale.Decode.decode
            (addr_of (addr_of full_scope[RangeFull {|  |}])) in
        α0.["map_err"] Into.into.
      
      Global Instance Method_get_property : Notation.Dot "get_property" := {
        Notation.dot := get_property;
      }.
    End Implsuper.EnvInstance_2.
    
    Module Impl_EnvBackend_for_super_EnvInstance.
      Definition Self := super.EnvInstance.
      
      Definition set_contract_storage
          (self : mut_ref Self)
          (key : ref K)
          (value : ref V)
          : M (Option u32) :=
        let* v := _crate.vec.Vec::["new"] tt in
        let* _ := Storable.encode value (addr_of v) in
        let* α0 := key.["encode"] in
        self.["engine"].["set_storage"]
          (addr_of α0)
          (addr_of v[RangeFull {|  |}]).
      
      Global Instance Method_set_contract_storage :
        Notation.Dot "set_contract_storage" := {
        Notation.dot := set_contract_storage;
      }.
      
      Definition get_contract_storage
          (self : mut_ref Self)
          (key : ref K)
          : M (crate.Result (Option R)) :=
        let* output := repeat 0 in
        let* _ :=
          let* α0 := key.["encode"] in
          let* α1 :=
            self.["engine"].["get_storage"]
              (addr_of α0)
              (addr_of (addr_of output[RangeFull {|  |}])) in
          match α1 with
          | Ok _ => Pure tt
          | Err ext.Error.KeyNotFound => Return (Ok None)
          | Err _ =>
            let* α0 :=
              format_arguments::["new_const"]
                (addr_of [ "encountered unexpected error" ]) in
            _crate.panicking.panic_fmt α0
          end in
        let* decoded :=
          let* α0 :=
            Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        Pure (Ok (Some decoded)).
      
      Global Instance Method_get_contract_storage :
        Notation.Dot "get_contract_storage" := {
        Notation.dot := get_contract_storage;
      }.
      
      Definition take_contract_storage
          (self : mut_ref Self)
          (key : ref K)
          : M (crate.Result (Option R)) :=
        let* output := repeat 0 in
        let* _ :=
          let* α0 := key.["encode"] in
          let* α1 :=
            self.["engine"].["take_storage"]
              (addr_of α0)
              (addr_of (addr_of output[RangeFull {|  |}])) in
          match α1 with
          | Ok _ => Pure tt
          | Err ext.Error.KeyNotFound => Return (Ok None)
          | Err _ =>
            let* α0 :=
              format_arguments::["new_const"]
                (addr_of [ "encountered unexpected error" ]) in
            _crate.panicking.panic_fmt α0
          end in
        let* decoded :=
          let* α0 :=
            Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        Pure (Ok (Some decoded)).
      
      Global Instance Method_take_contract_storage :
        Notation.Dot "take_contract_storage" := {
        Notation.dot := take_contract_storage;
      }.
      
      Definition contains_contract_storage
          (self : mut_ref Self)
          (key : ref K)
          : M (Option u32) :=
        let* α0 := key.["encode"] in
        self.["engine"].["contains_storage"] (addr_of α0).
      
      Global Instance Method_contains_contract_storage :
        Notation.Dot "contains_contract_storage" := {
        Notation.dot := contains_contract_storage;
      }.
      
      Definition clear_contract_storage
          (self : mut_ref Self)
          (key : ref K)
          : M (Option u32) :=
        let* α0 := key.["encode"] in
        self.["engine"].["clear_storage"] (addr_of α0).
      
      Global Instance Method_clear_contract_storage :
        Notation.Dot "clear_contract_storage" := {
        Notation.dot := clear_contract_storage;
      }.
      
      Definition decode_input (self : mut_ref Self) : M (crate.Result T) :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [ "not implemented: the off-chain env does not implement `input`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_decode_input : Notation.Dot "decode_input" := {
        Notation.dot := decode_input;
      }.
      
      Definition return_value
          (self : mut_ref Self)
          (_flags : crate.ReturnFlags)
          (_return_value : ref R)
          : M Empty_set :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: the off-chain env does not implement `return_value`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_return_value : Notation.Dot "return_value" := {
        Notation.dot := return_value;
      }.
      
      Definition debug_message
          (self : mut_ref Self)
          (message : ref str)
          : M unit :=
        self.["engine"].["debug_message"] message.
      
      Global Instance Method_debug_message : Notation.Dot "debug_message" := {
        Notation.dot := debug_message;
      }.
      
      Definition hash_bytes
          (self : mut_ref Self)
          (input : ref Slice)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        CryptoHash.hash input output.
      
      Global Instance Method_hash_bytes : Notation.Dot "hash_bytes" := {
        Notation.dot := hash_bytes;
      }.
      
      Definition hash_encoded
          (self : mut_ref Self)
          (input : ref T)
          (output : mut_ref HashOutput.Type)
          : M unit :=
        let* enc_input :=
          let* α0 := scale.Encode.encode input in
          Pure (addr_of α0[RangeFull {|  |}]) in
        CryptoHash.hash enc_input output.
      
      Global Instance Method_hash_encoded : Notation.Dot "hash_encoded" := {
        Notation.dot := hash_encoded;
      }.
      
      Definition ecdsa_recover
          (self : mut_ref Self)
          (signature : ref list u8)
          (message_hash : ref list u8)
          (output : mut_ref list u8)
          : M (crate.Result unit) :=
        let* recovery_byte :=
          let* α0 := signature[64].["gt"] 26 in
          if (α0 : bool) then
            signature[64].["sub"] 27
          else
            Pure signature[64] in
        let* recovery_id :=
          let* α0 := RecoveryId::["from_i32"] (cast recovery_byte i32) in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_display"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "Unable to parse the recovery id: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* message :=
          let* α0 := Message::["from_slice"] message_hash in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_display"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "Unable to create the message from hash: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* signature :=
          let* α0 :=
            RecoverableSignature::["from_compact"]
              (addr_of
                signature[Range {| Range.start := 0; Range.end := 64; |}])
              recovery_id in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_display"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "Unable to parse the signature: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* pub_key :=
          SECP256K1.["recover_ecdsa"] (addr_of message) (addr_of signature) in
        match pub_key with
        | Ok pub_key =>
          let* _ :=
            let* α0 := pub_key.["serialize"] in
            assign output.["deref"] α0 in
          Pure (Ok tt)
        | Err _ => Pure (Err Error.EcdsaRecoveryFailed)
        end.
      
      Global Instance Method_ecdsa_recover : Notation.Dot "ecdsa_recover" := {
        Notation.dot := ecdsa_recover;
      }.
      
      Definition ecdsa_to_eth_address
          (self : mut_ref Self)
          (pubkey : ref list u8)
          (output : mut_ref list u8)
          : M (crate.Result unit) :=
        let* pk :=
          let* α0 := secp256k1.PublicKey::["from_slice"] pubkey in
          let* α1 := α0.["map_err"] (fun _ => Pure Error.EcdsaRecoveryFailed) in
          let* α2 := LangItem α1 in
          match α2 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        let* uncompressed := pk.["serialize_uncompressed"] in
        let* hash := HashOutput.Type::["default"] tt in
        let* _ :=
          crate.hash.Keccak256::["hash"]
            (addr_of uncompressed[RangeFrom {| RangeFrom.start := 1; |}])
            (addr_of hash) in
        let* _ :=
          let* α0 := output.["as_mut"] in
          α0.["copy_from_slice"]
            (addr_of hash[RangeFrom {| RangeFrom.start := 12; |}]) in
        Pure (Ok tt).
      
      Global Instance Method_ecdsa_to_eth_address :
        Notation.Dot "ecdsa_to_eth_address" := {
        Notation.dot := ecdsa_to_eth_address;
      }.
      
      Definition call_chain_extension
          (self : mut_ref Self)
          (func_id : u32)
          (input : ref I)
          (status_to_result : F)
          (decode_to_result : D)
          : M (Root.core.result.Result T E) :=
        let* enc_input :=
          let* α0 := scale.Encode.encode input in
          Pure (addr_of α0[RangeFull {|  |}]) in
        let* output := repeat 0 in
        let* _ :=
          self.["engine"].["call_chain_extension"]
            func_id
            enc_input
            (addr_of (addr_of output[RangeFull {|  |}])) in
        let* '(status, out) :=
          let* α0 :=
            scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
          α0.["unwrap_or_else"]
            (fun error =>
              let* α0 := format_argument::["new_debug"] (addr_of error) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of
                    [ "could not decode `call_chain_extension` output: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1) in
        let* _ :=
          let* α0 := status_to_result status in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        let* decoded :=
          let* α0 := decode_to_result (addr_of out[RangeFull {|  |}]) in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        Pure (Ok decoded).
      
      Global Instance Method_call_chain_extension :
        Notation.Dot "call_chain_extension" := {
        Notation.dot := call_chain_extension;
      }.
      
      Definition set_code_hash
          (self : mut_ref Self)
          (_code_hash : ref Slice)
          : M (crate.Result unit) :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support `set_code_hash`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_set_code_hash : Notation.Dot "set_code_hash" := {
        Notation.dot := set_code_hash;
      }.
      
      Global Instance I : EnvBackend.Trait Self := {
        EnvBackend.set_contract_storage := set_contract_storage;
        EnvBackend.get_contract_storage := get_contract_storage;
        EnvBackend.take_contract_storage := take_contract_storage;
        EnvBackend.contains_contract_storage := contains_contract_storage;
        EnvBackend.clear_contract_storage := clear_contract_storage;
        EnvBackend.decode_input := decode_input;
        EnvBackend.return_value := return_value;
        EnvBackend.debug_message := debug_message;
        EnvBackend.hash_bytes := hash_bytes;
        EnvBackend.hash_encoded := hash_encoded;
        EnvBackend.ecdsa_recover := ecdsa_recover;
        EnvBackend.ecdsa_to_eth_address := ecdsa_to_eth_address;
        EnvBackend.call_chain_extension := call_chain_extension;
        EnvBackend.set_code_hash := set_code_hash;
      }.
    End Impl_EnvBackend_for_super_EnvInstance.
    
    Module Impl_TypedEnvBackend_for_super_EnvInstance.
      Definition Self := super.EnvInstance.
      
      Definition caller (self : mut_ref Self) : M ImplE.AccountId :=
        let* α0 := self.["get_property"] ink_engine.ext.Engine::["caller"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `caller` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_caller : Notation.Dot "caller" := {
        Notation.dot := caller;
      }.
      
      Definition transferred_value (self : mut_ref Self) : M ImplE.Balance :=
        let* α0 :=
          self.["get_property"] ink_engine.ext.Engine::["value_transferred"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `transferred_value` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_transferred_value :
        Notation.Dot "transferred_value" := {
        Notation.dot := transferred_value;
      }.
      
      Definition gas_left (self : mut_ref Self) : M u64 :=
        let* α0 := self.["get_property"] ink_engine.ext.Engine::["gas_left"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `gas_left` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_gas_left : Notation.Dot "gas_left" := {
        Notation.dot := gas_left;
      }.
      
      Definition block_timestamp (self : mut_ref Self) : M ImplE.Timestamp :=
        let* α0 :=
          self.["get_property"] ink_engine.ext.Engine::["block_timestamp"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `block_timestamp` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_block_timestamp :
        Notation.Dot "block_timestamp" := {
        Notation.dot := block_timestamp;
      }.
      
      Definition account_id (self : mut_ref Self) : M ImplE.AccountId :=
        let* α0 := self.["get_property"] ink_engine.ext.Engine::["address"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `account_id` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_account_id : Notation.Dot "account_id" := {
        Notation.dot := account_id;
      }.
      
      Definition balance (self : mut_ref Self) : M ImplE.Balance :=
        let* α0 := self.["get_property"] ink_engine.ext.Engine::["balance"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `balance` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_balance : Notation.Dot "balance" := {
        Notation.dot := balance;
      }.
      
      Definition block_number (self : mut_ref Self) : M ImplE.BlockNumber :=
        let* α0 :=
          self.["get_property"] ink_engine.ext.Engine::["block_number"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `block_number` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_block_number : Notation.Dot "block_number" := {
        Notation.dot := block_number;
      }.
      
      Definition minimum_balance (self : mut_ref Self) : M ImplE.Balance :=
        let* α0 :=
          self.["get_property"] ink_engine.ext.Engine::["minimum_balance"] in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `minimum_balance` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_minimum_balance :
        Notation.Dot "minimum_balance" := {
        Notation.dot := minimum_balance;
      }.
      
      Definition emit_event (self : mut_ref Self) (event : Event) : M unit :=
        let* builder := TopicsBuilder::["default"] tt in
        let* enc_topics :=
          let* α0 := builder.["into"] in
          event.["topics"] α0 in
        let* enc_data :=
          let* α0 := scale.Encode.encode (addr_of event) in
          Pure (addr_of α0[RangeFull {|  |}]) in
        let* _ :=
          self.["engine"].["deposit_event"]
            (addr_of enc_topics[RangeFull {|  |}])
            enc_data in
        Pure tt.
      
      Global Instance Method_emit_event : Notation.Dot "emit_event" := {
        Notation.dot := emit_event;
      }.
      
      Definition invoke_contract
          (self : mut_ref Self)
          (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
          : M (crate.Result (ink_primitives.MessageResult R)) :=
        let* _gas_limit := params.["gas_limit"] in
        let* _callee := params.["callee"] in
        let* _call_flags :=
          let* α0 := params.["call_flags"] in
          α0.["into_u32"] in
        let* _transferred_value := params.["transferred_value"] in
        let* _input := params.["exec_input"] in
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support contract invocation"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_invoke_contract :
        Notation.Dot "invoke_contract" := {
        Notation.dot := invoke_contract;
      }.
      
      Definition invoke_contract_delegate
          (self : mut_ref Self)
          (params
            :
            ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
          : M (crate.Result R) :=
        let* _code_hash := params.["code_hash"] in
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support delegated contract invocation"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_invoke_contract_delegate :
        Notation.Dot "invoke_contract_delegate" := {
        Notation.dot := invoke_contract_delegate;
      }.
      
      Definition instantiate_contract
          (self : mut_ref Self)
          (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
          :
            M
              (crate.Result
                (ink_primitives.ConstructorResult
                  ConstructorReturnType.Output)) :=
        let* _code_hash := params.["code_hash"] in
        let* _gas_limit := params.["gas_limit"] in
        let* _endowment := params.["endowment"] in
        let* _input := params.["exec_input"] in
        let* _salt_bytes := params.["salt_bytes"] in
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support contract instantiation"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_instantiate_contract :
        Notation.Dot "instantiate_contract" := {
        Notation.dot := instantiate_contract;
      }.
      
      Definition terminate_contract
          (self : mut_ref Self)
          (beneficiary : ImplE.AccountId)
          : M Empty_set :=
        let* buffer := scale.Encode.encode (addr_of beneficiary) in
        self.["engine"].["terminate"] (addr_of buffer[RangeFull {|  |}]).
      
      Global Instance Method_terminate_contract :
        Notation.Dot "terminate_contract" := {
        Notation.dot := terminate_contract;
      }.
      
      Definition transfer
          (self : mut_ref Self)
          (destination : ImplE.AccountId)
          (value : ImplE.Balance)
          : M (crate.Result unit) :=
        let* enc_destination :=
          let* α0 := scale.Encode.encode (addr_of destination) in
          Pure (addr_of α0[RangeFull {|  |}]) in
        let* enc_value :=
          let* α0 := scale.Encode.encode (addr_of value) in
          Pure (addr_of α0[RangeFull {|  |}]) in
        let* α0 := self.["engine"].["transfer"] enc_destination enc_value in
        α0.["map_err"] Into.into.
      
      Global Instance Method_transfer : Notation.Dot "transfer" := {
        Notation.dot := transfer;
      }.
      
      Definition weight_to_fee
          (self : mut_ref Self)
          (gas : u64)
          : M ImplE.Balance :=
        let* output := repeat 0 in
        let* _ :=
          self.["engine"].["weight_to_fee"]
            gas
            (addr_of (addr_of output[RangeFull {|  |}])) in
        let* α0 :=
          scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not read `weight_to_fee` property: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1).
      
      Global Instance Method_weight_to_fee : Notation.Dot "weight_to_fee" := {
        Notation.dot := weight_to_fee;
      }.
      
      Definition is_contract
          (self : mut_ref Self)
          (account : ref ImplE.AccountId)
          : M bool :=
        let* α0 := scale.Encode.encode (addr_of account) in
        self.["engine"].["is_contract"] α0.
      
      Global Instance Method_is_contract : Notation.Dot "is_contract" := {
        Notation.dot := is_contract;
      }.
      
      Definition caller_is_origin (self : mut_ref Self) : M bool :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support cross-contract calls"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_caller_is_origin :
        Notation.Dot "caller_is_origin" := {
        Notation.dot := caller_is_origin;
      }.
      
      Definition code_hash
          (self : mut_ref Self)
          (_account : ref ImplE.AccountId)
          : M (crate.Result ImplE.Hash) :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support `code_hash`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_code_hash : Notation.Dot "code_hash" := {
        Notation.dot := code_hash;
      }.
      
      Definition own_code_hash
          (self : mut_ref Self)
          : M (crate.Result ImplE.Hash) :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support `own_code_hash`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_own_code_hash : Notation.Dot "own_code_hash" := {
        Notation.dot := own_code_hash;
      }.
      
      Definition call_runtime
          (self : mut_ref Self)
          (_call : ref crate.call.Call)
          : M (crate.Result unit) :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not support `call_runtime`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0.
      
      Global Instance Method_call_runtime : Notation.Dot "call_runtime" := {
        Notation.dot := call_runtime;
      }.
      
      Global Instance I : TypedEnvBackend.Trait Self := {
        TypedEnvBackend.caller := caller;
        TypedEnvBackend.transferred_value := transferred_value;
        TypedEnvBackend.weight_to_fee := weight_to_fee;
        TypedEnvBackend.gas_left := gas_left;
        TypedEnvBackend.block_timestamp := block_timestamp;
        TypedEnvBackend.account_id := account_id;
        TypedEnvBackend.balance := balance;
        TypedEnvBackend.block_number := block_number;
        TypedEnvBackend.minimum_balance := minimum_balance;
        TypedEnvBackend.emit_event := emit_event;
        TypedEnvBackend.invoke_contract := invoke_contract;
        TypedEnvBackend.invoke_contract_delegate := invoke_contract_delegate;
        TypedEnvBackend.instantiate_contract := instantiate_contract;
        TypedEnvBackend.terminate_contract := terminate_contract;
        TypedEnvBackend.transfer := transfer;
        TypedEnvBackend.is_contract := is_contract;
        TypedEnvBackend.caller_is_origin := caller_is_origin;
        TypedEnvBackend.code_hash := code_hash;
        TypedEnvBackend.own_code_hash := own_code_hash;
        TypedEnvBackend.call_runtime := call_runtime;
      }.
    End Impl_TypedEnvBackend_for_super_EnvInstance.
  End impls.
  
  Module test_api.
    Module EmittedEvent.
      Record t : Set := {
        topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
        data : ink_prelude.vec.Vec u8;
      }.
      
      Global Instance Get_topics : Notation.Dot "topics" := {
        Notation.dot '(Build_t x0 _) := x0;
      }.
      Global Instance Get_data : Notation.Dot "data" := {
        Notation.dot '(Build_t _ x1) := x1;
      }.
    End EmittedEvent.
    Definition EmittedEvent : Set := EmittedEvent.t.
    
    Module Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.
      Definition Self := super.test_api.EmittedEvent.
      
      Definition clone (self : ref Self) : M super.test_api.EmittedEvent :=
        let* α0 := _crate.clone.Clone.clone (addr_of self.["topics"]) in
        let* α1 := _crate.clone.Clone.clone (addr_of self.["data"]) in
        Pure
          {|
            super.test_api.EmittedEvent.topics := α0;
            super.test_api.EmittedEvent.data := α1;
          |}.
      
      Global Instance Method_clone : Notation.Dot "clone" := {
        Notation.dot := clone;
      }.
      
      Global Instance I : _crate.clone.Clone.Trait Self := {
        _crate.clone.Clone.clone := clone;
      }.
    End Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.
    
    Definition set_account_balance
        {T : Set}
        `{Environment.Trait T}
        (account_id : ImplT.AccountId)
        (new_balance : ImplT.Balance)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of account_id) in
            instance.["engine"].["set_balance"] α0 new_balance in
          Pure tt).
    
    Definition get_account_balance
        {T : Set}
        `{Environment.Trait T}
        (account_id : ImplT.AccountId)
        : M (crate.Result ImplT.Balance) :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 := scale.Encode.encode (addr_of account_id) in
          let* α1 := instance.["engine"].["get_balance"] α0 in
          α1.["map_err"] Into.into).
    
    Definition register_chain_extension
        {E : Set}
        `{ink_engine.ChainExtension.Trait E}
        (extension : E)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ :=
            let* α0 := Box::["new"] extension in
            instance.["engine"].["chain_extension_handler"].["register"] α0 in
          Pure tt).
    
    Definition recorded_debug_messages
        (_ : unit)
        : M ink_engine.test_api.RecordedDebugMessages :=
      OnInstance.on_instance
        (fun instance => instance.["engine"].["get_emitted_debug_messages"]).
    
    Definition set_clear_storage_disabled (_disable : bool) : M unit :=
      let* _ :=
        let* α0 :=
          format_arguments::["new_v1"]
            (addr_of
              [
                "not implemented: off-chain environment does not yet support `set_clear_storage_disabled`"
              ])
            (addr_of [ ]) in
        _crate.panicking.panic_fmt α0 in
      Pure tt.
    
    Definition advance_block
        {T : Set}
        `{Environment.Trait T}
        (_ : unit)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ := instance.["engine"].["advance_block"] in
          Pure tt).
    
    Definition set_caller
        {T : Set}
        `{Environment.Trait T}
        `{From.Trait list u8 Environment.AccountId}
        (caller : ImplT.AccountId)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of caller) in
            instance.["engine"].["set_caller"] α0 in
          Pure tt).
    
    Definition set_callee
        {T : Set}
        `{Environment.Trait T}
        `{From.Trait list u8 Environment.AccountId}
        (callee : ImplT.AccountId)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of callee) in
            instance.["engine"].["set_callee"] α0 in
          Pure tt).
    
    Definition set_contract
        {T : Set}
        `{Environment.Trait T}
        `{From.Trait list u8 Environment.AccountId}
        (contract : ImplT.AccountId)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of contract) in
            instance.["engine"].["set_contract"] α0 in
          Pure tt).
    
    Definition is_contract
        {T : Set}
        `{Environment.Trait T}
        `{From.Trait list u8 Environment.AccountId}
        (contract : ImplT.AccountId)
        : M bool :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 := scale.Encode.encode (addr_of contract) in
          instance.["engine"].["is_contract"] α0).
    
    Definition callee
        {T : Set}
        `{Environment.Trait T}
        (_ : unit)
        : M ImplT.AccountId :=
      OnInstance.on_instance
        (fun instance =>
          let* callee := instance.["engine"].["get_callee"] in
          let* α0 :=
            scale.Decode.decode (addr_of (addr_of callee[RangeFull {|  |}])) in
          α0.["unwrap_or_else"]
            (fun err =>
              let* α0 := format_argument::["new_display"] (addr_of err) in
              let* α1 :=
                format_arguments::["new_v1"]
                  (addr_of [ "encoding failed: " ])
                  (addr_of [ α0 ]) in
              _crate.panicking.panic_fmt α1)).
    
    Definition get_contract_storage_rw
        {T : Set}
        `{Environment.Trait T}
        (account_id : ref ImplT.AccountId)
        : M (usize * usize) :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 := scale.Encode.encode (addr_of account_id) in
          instance.["engine"].["get_contract_storage_rw"] α0).
    
    Definition set_value_transferred
        {T : Set}
        `{Environment.Trait T}
        (value : ImplT.Balance)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ := instance.["engine"].["set_value_transferred"] value in
          Pure tt).
    
    Definition transfer_in
        {T : Set}
        `{Environment.Trait T}
        (value : ImplT.Balance)
        : M unit :=
      let* _ :=
        OnInstance.on_instance
          (fun instance =>
            let* caller :=
              let* α0 :=
                instance.["engine"].["exec_context"].["caller"].["as_ref"] in
              let* α1 := α0.["expect"] "no caller has been set" in
              let* α2 := α1.["as_bytes"] in
              α2.["to_vec"] in
            let* caller_old_balance :=
              let* α0 := caller.["clone"] in
              let* α1 := instance.["engine"].["get_balance"] α0 in
              α1.["unwrap_or_default"] in
            let* callee := instance.["engine"].["get_callee"] in
            let* contract_old_balance :=
              let* α0 := callee.["clone"] in
              let* α1 := instance.["engine"].["get_balance"] α0 in
              α1.["unwrap_or_default"] in
            let* _ :=
              let* α0 := caller_old_balance.["sub"] value in
              instance.["engine"].["set_balance"] caller α0 in
            let* _ :=
              let* α0 := contract_old_balance.["add"] value in
              instance.["engine"].["set_balance"] callee α0 in
            let* _ := instance.["engine"].["set_value_transferred"] value in
            Pure tt) in
      Pure tt.
    
    Definition count_used_storage_cells
        {T : Set}
        `{Environment.Trait T}
        (account_id : ref ImplT.AccountId)
        : M (crate.Result usize) :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 := scale.Encode.encode (addr_of account_id) in
          let* α1 :=
            instance.["engine"].["count_used_storage_cells"] (addr_of α0) in
          α1.["map_err"] Into.into).
    
    Definition set_block_timestamp
        {T : Set}
        `{Environment.Trait T}
        (value : ImplT.Timestamp)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ := instance.["engine"].["set_block_timestamp"] value in
          Pure tt).
    
    Definition set_block_number
        {T : Set}
        `{Environment.Trait T}
        (value : ImplT.BlockNumber)
        : M unit :=
      OnInstance.on_instance
        (fun instance =>
          let* _ := instance.["engine"].["set_block_number"] value in
          Pure tt).
    
    Definition run_test
        {T F : Set}
        `{Environment.Trait T}
        `{FnOnce.Trait ((DefaultAccounts T)) F}
        `{From.Trait list u8 Environment.AccountId}
        (f : F)
        : M (crate.Result unit) :=
      let* default_accounts := default_accounts tt in
      let* _ :=
        OnInstance.on_instance
          (fun instance =>
            let* _ := instance.["engine"].["initialize_or_reset"] in
            let* encoded_alice :=
              scale.Encode.encode (addr_of default_accounts.["alice"]) in
            let* _ :=
              let* α0 := encoded_alice.["clone"] in
              instance.["engine"].["set_caller"] α0 in
            let* _ :=
              let* α0 := encoded_alice.["clone"] in
              instance.["engine"].["set_callee"] α0 in
            let substantial := 1000000 in
            let some := 1000 in
            let* _ :=
              instance.["engine"].["set_balance"] encoded_alice substantial in
            let* _ :=
              let* α0 :=
                scale.Encode.encode (addr_of default_accounts.["bob"]) in
              instance.["engine"].["set_balance"] α0 some in
            let* _ :=
              let* α0 :=
                scale.Encode.encode (addr_of default_accounts.["charlie"]) in
              instance.["engine"].["set_balance"] α0 some in
            let* _ :=
              let* α0 :=
                scale.Encode.encode (addr_of default_accounts.["django"]) in
              instance.["engine"].["set_balance"] α0 0 in
            let* _ :=
              let* α0 :=
                scale.Encode.encode (addr_of default_accounts.["eve"]) in
              instance.["engine"].["set_balance"] α0 0 in
            let* _ :=
              let* α0 :=
                scale.Encode.encode (addr_of default_accounts.["frank"]) in
              instance.["engine"].["set_balance"] α0 0 in
            Pure tt) in
      f default_accounts.
    
    Definition default_accounts
        {T : Set}
        `{Environment.Trait T}
        `{From.Trait list u8 Environment.AccountId}
        (_ : unit)
        : M (DefaultAccounts T) :=
      let* α0 := repeat 1 in
      let* α1 := ImplT.AccountId::["from"] α0 in
      let* α2 := repeat 2 in
      let* α3 := ImplT.AccountId::["from"] α2 in
      let* α4 := repeat 3 in
      let* α5 := ImplT.AccountId::["from"] α4 in
      let* α6 := repeat 4 in
      let* α7 := ImplT.AccountId::["from"] α6 in
      let* α8 := repeat 5 in
      let* α9 := ImplT.AccountId::["from"] α8 in
      let* α10 := repeat 6 in
      let* α11 := ImplT.AccountId::["from"] α10 in
      Pure
        {|
          DefaultAccounts.alice := α1;
          DefaultAccounts.bob := α3;
          DefaultAccounts.charlie := α5;
          DefaultAccounts.django := α7;
          DefaultAccounts.eve := α9;
          DefaultAccounts.frank := α11;
        |}.
    
    Module DefaultAccounts.
      Record t : Set := {
        alice : ImplT.AccountId;
        bob : ImplT.AccountId;
        charlie : ImplT.AccountId;
        django : ImplT.AccountId;
        eve : ImplT.AccountId;
        frank : ImplT.AccountId;
      }.
      
      Global Instance Get_alice : Notation.Dot "alice" := {
        Notation.dot '(Build_t x0 _ _ _ _ _) := x0;
      }.
      Global Instance Get_bob : Notation.Dot "bob" := {
        Notation.dot '(Build_t _ x1 _ _ _ _) := x1;
      }.
      Global Instance Get_charlie : Notation.Dot "charlie" := {
        Notation.dot '(Build_t _ _ x2 _ _ _) := x2;
      }.
      Global Instance Get_django : Notation.Dot "django" := {
        Notation.dot '(Build_t _ _ _ x3 _ _) := x3;
      }.
      Global Instance Get_eve : Notation.Dot "eve" := {
        Notation.dot '(Build_t _ _ _ _ x4 _) := x4;
      }.
      Global Instance Get_frank : Notation.Dot "frank" := {
        Notation.dot '(Build_t _ _ _ _ _ x5) := x5;
      }.
    End DefaultAccounts.
    Definition DefaultAccounts : Set := DefaultAccounts.t.
    
    Definition recorded_events (_ : unit) : M OpaqueDef :=
      OnInstance.on_instance
        (fun instance =>
          let* α0 := instance.["engine"].["get_emitted_events"] in
          α0.["map"] (fun evt => evt.["into"])).
    
    Definition assert_contract_termination
        {T F : Set}
        `{Environment.Trait T}
        `{FnMut.Trait unit F}
        `{UnwindSafe.Trait F}
        `{Debug.Trait Environment.AccountId}
        `{Debug.Trait Environment.Balance}
        (should_terminate : F)
        (expected_beneficiary : ImplT.AccountId)
        (expected_value_transferred_to_beneficiary : ImplT.Balance)
        : M unit :=
      let* value_any :=
        let* α0 := Root.std.panic.catch_unwind should_terminate in
        α0.["expect_err"] "contract did not terminate" in
      let* encoded_input :=
        let* α0 := value_any.["downcast_ref"] in
        α0.["expect"] "panic object can not be cast" in
      let* '(value_transferred, encoded_beneficiary) :=
        let* α0 :=
          scale.Decode.decode
            (addr_of (addr_of encoded_input[RangeFull {|  |}])) in
        α0.["unwrap_or_else"]
          (fun err =>
            let* α0 := format_argument::["new_display"] (addr_of err) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "input can not be decoded: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* beneficiary :=
        let* α0 :=
          scale.Decode.decode
            (addr_of (addr_of encoded_beneficiary[RangeFull {|  |}])) in
        α0.["unwrap_or_else"]
          (fun err =>
            let* α0 := format_argument::["new_display"] (addr_of err) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "input can not be decoded: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* _ :=
        match
          (addr_of value_transferred,
            addr_of expected_value_transferred_to_beneficiary)
        with
        | (left_val, right_val) =>
          let* α0 := left_val.["deref"] in
          let* α1 := right_val.["deref"] in
          let* α2 := α0.["eq"] α1 in
          let* α3 := α2.["not"] in
          if (α3 : bool) then
            let kind := _crate.panicking.AssertKind.Eq in
            let* _ :=
              let* α0 := left_val.["deref"] in
              let* α1 := right_val.["deref"] in
              _crate.panicking.assert_failed
                kind
                (addr_of α0)
                (addr_of α1)
                _crate.option.Option.None in
            Pure tt
          else
            Pure tt
        end in
      let* _ :=
        match (addr_of beneficiary, addr_of expected_beneficiary) with
        | (left_val, right_val) =>
          let* α0 := left_val.["deref"] in
          let* α1 := right_val.["deref"] in
          let* α2 := α0.["eq"] α1 in
          let* α3 := α2.["not"] in
          if (α3 : bool) then
            let kind := _crate.panicking.AssertKind.Eq in
            let* _ :=
              let* α0 := left_val.["deref"] in
              let* α1 := right_val.["deref"] in
              _crate.panicking.assert_failed
                kind
                (addr_of α0)
                (addr_of α1)
                _crate.option.Option.None in
            Pure tt
          else
            Pure tt
        end in
      Pure tt.
  End test_api.
  
  Module types.
    Module Impl_From_for_super_test_api_EmittedEvent.
      Definition Self := super.test_api.EmittedEvent.
      
      Definition from (evt : ink_engine.test_api.EmittedEvent) : M Self :=
        Pure
          {|
            super.test_api.EmittedEvent.topics := evt.["topics"];
            super.test_api.EmittedEvent.data := evt.["data"];
          |}.
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : From.Trait Self ink_engine.test_api.EmittedEvent := {
        From.from := from;
      }.
    End Impl_From_for_super_test_api_EmittedEvent.
    
    Module Impl_From_for_super_Error.
      Definition Self := super.Error.
      
      Definition from (err : ink_engine.Error) : M Self :=
        let* e :=
          match err with
          | ink_engine.Error.Account acc =>
            let* α0 := acc.["into"] in
            Pure (OffChainError.Account α0)
          | ink_engine.Error.UninitializedBlocks =>
            Pure OffChainError.UninitializedBlocks
          | ink_engine.Error.UninitializedExecutionContext =>
            Pure OffChainError.UninitializedExecutionContext
          | ink_engine.Error.UnregisteredChainExtension =>
            Pure OffChainError.UnregisteredChainExtension
          end in
        Pure (Error.OffChain e).
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : From.Trait Self ink_engine.Error := {
        From.from := from;
      }.
    End Impl_From_for_super_Error.
    
    Module Impl_From_for_super_AccountError.
      Definition Self := super.AccountError.
      
      Definition from (err : ink_engine.AccountError) : M Self :=
        match err with
        | ink_engine.AccountError.Decoding e => Pure (AccountError.Decoding e)
        | ink_engine.AccountError.UnexpectedUserAccount =>
          Pure AccountError.UnexpectedUserAccount
        | ink_engine.AccountError.NoAccountForId acc =>
          Pure (AccountError.NoAccountForId acc)
        end.
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : From.Trait Self ink_engine.AccountError := {
        From.from := from;
      }.
    End Impl_From_for_super_AccountError.
    
    Module Impl_From_for_super_Error.
      Definition Self := super.Error.
      
      Definition from (account_error : ink_engine.AccountError) : M Self :=
        let* α0 := account_error.["into"] in
        Pure (Error.OffChain (OffChainError.Account α0)).
      
      Global Instance AssociatedFunction_from :
        Notation.DoubleColon Self "from" := {
        Notation.double_colon := from;
      }.
      
      Global Instance I : From.Trait Self ink_engine.AccountError := {
        From.from := from;
      }.
    End Impl_From_for_super_Error.
  End types.
  
  Module From := derive_more.From.
  
  Module EnvInstance.
    Record t : Set := {
      engine : ink_engine.ext.Engine;
    }.
    
    Global Instance Get_engine : Notation.Dot "engine" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End EnvInstance.
  Definition EnvInstance : Set := EnvInstance.t.
  
  Module Impl_OnInstance_for_super_EnvInstance.
    Definition Self := super.EnvInstance.
    
    Definition on_instance (f : F) : M R :=
      INSTANCE.["with"]
        (fun instance =>
          let* α0 := instance.["borrow_mut"] in
          f (addr_of α0)).
    
    Global Instance AssociatedFunction_on_instance :
      Notation.DoubleColon Self "on_instance" := {
      Notation.double_colon := on_instance;
    }.
    
    Global Instance I : OnInstance.Trait Self := {
      OnInstance.on_instance := on_instance;
    }.
  End Impl_OnInstance_for_super_EnvInstance.
  
  Module OffChainError.
    Inductive t : Set :=
    | Account (_ : super.AccountError)
    | UninitializedBlocks
    | UninitializedExecutionContext
    | UnregisteredChainExtension.
  End OffChainError.
  Definition OffChainError := OffChainError.t.
  
  Module Impl__crate_fmt_Debug_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      match self with
      | OffChainError.Account __self_0 =>
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "Account"
          (addr_of __self_0)
      | OffChainError.UninitializedBlocks =>
        _crate.fmt.Formatter::["write_str"] f "UninitializedBlocks"
      | OffChainError.UninitializedExecutionContext =>
        _crate.fmt.Formatter::["write_str"] f "UninitializedExecutionContext"
      | OffChainError.UnregisteredChainExtension =>
        _crate.fmt.Formatter::["write_str"] f "UnregisteredChainExtension"
      end.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_super_OffChainError.
  
  Module Impl_Root_core_convert_From_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Definition from (original : super.AccountError) : M super.OffChainError :=
      Pure (OffChainError.Account original).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : Root.core.convert.From.Trait Self super.AccountError :=
      {
      Root.core.convert.From.from := from;
    }.
  End Impl_Root_core_convert_From_for_super_OffChainError.
  
  Module Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.
  
  Module Impl__crate_cmp_PartialEq_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Definition eq
        (self : ref Self)
        (other : ref super.OffChainError)
        : M bool :=
      let* __self_tag := _crate.intrinsics.discriminant_value self in
      let* __arg1_tag := _crate.intrinsics.discriminant_value other in
      let* α0 := __self_tag.["eq"] __arg1_tag in
      let* α1 :=
        match (self, other) with
        | (OffChainError.Account __self_0, OffChainError.Account __arg1_0) =>
          let* α0 := __self_0.["deref"] in
          let* α1 := __arg1_0.["deref"] in
          α0.["eq"] α1
        | _ => Pure true
        end in
      α0.["andb"] α1.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_super_OffChainError.
  
  Module Impl__crate_marker_StructuralEq_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_super_OffChainError.
  
  Module Impl__crate_cmp_Eq_for_super_OffChainError.
    Definition Self := super.OffChainError.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      let _ := tt in
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_super_OffChainError.
  
  Module AccountError.
    Inductive t : Set :=
    | Decoding (_ : scale.Error)
    | UnexpectedUserAccount
    | NoAccountForId (_ : ink_prelude.vec.Vec u8).
  End AccountError.
  Definition AccountError := AccountError.t.
  
  Module Impl__crate_fmt_Debug_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      match self with
      | AccountError.Decoding __self_0 =>
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "Decoding"
          (addr_of __self_0)
      | AccountError.UnexpectedUserAccount =>
        _crate.fmt.Formatter::["write_str"] f "UnexpectedUserAccount"
      | AccountError.NoAccountForId __self_0 =>
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "NoAccountForId"
          (addr_of __self_0)
      end.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_super_AccountError.
  
  Module Impl_Root_core_convert_From_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Definition from (original : scale.Error) : M super.AccountError :=
      Pure (AccountError.Decoding original).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : Root.core.convert.From.Trait Self scale.Error := {
      Root.core.convert.From.from := from;
    }.
  End Impl_Root_core_convert_From_for_super_AccountError.
  
  Module Impl__crate_marker_StructuralPartialEq_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_super_AccountError.
  
  Module Impl__crate_cmp_PartialEq_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Definition eq (self : ref Self) (other : ref super.AccountError) : M bool :=
      let* __self_tag := _crate.intrinsics.discriminant_value self in
      let* __arg1_tag := _crate.intrinsics.discriminant_value other in
      let* α0 := __self_tag.["eq"] __arg1_tag in
      let* α1 :=
        match (self, other) with
        | (AccountError.Decoding __self_0, AccountError.Decoding __arg1_0) =>
          let* α0 := __self_0.["deref"] in
          let* α1 := __arg1_0.["deref"] in
          α0.["eq"] α1
        |
            (AccountError.NoAccountForId __self_0,
              AccountError.NoAccountForId __arg1_0)
            =>
          let* α0 := __self_0.["deref"] in
          let* α1 := __arg1_0.["deref"] in
          α0.["eq"] α1
        | _ => Pure true
        end in
      α0.["andb"] α1.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_super_AccountError.
  
  Module Impl__crate_marker_StructuralEq_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_super_AccountError.
  
  Module Impl__crate_cmp_Eq_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      let _ := tt in
      let _ := tt in
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_super_AccountError.
End off_chain.

Module call_data.
  Module vec := ink_prelude.vec.
  
  Module CallData.
    Record t : Set := {
      bytes : ink_prelude.vec.Vec u8;
    }.
    
    Global Instance Get_bytes : Notation.Dot "bytes" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End CallData.
  Definition CallData : Set := CallData.t.
  
  Module Impl__crate_fmt_Debug_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.fmt.Formatter::["debug_struct_field1_finish"]
        f
        "CallData"
        "bytes"
        (addr_of (addr_of self.["bytes"])).
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_call_data_CallData.
  
  Module Impl__crate_clone_Clone_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition clone (self : ref Self) : M call_data.CallData :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["bytes"]) in
      Pure {| call_data.CallData.bytes := α0; |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_call_data_CallData.
  
  Module Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.
  
  Module Impl__crate_cmp_PartialEq_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition eq (self : ref Self) (other : ref call_data.CallData) : M bool :=
      self.["bytes"].["eq"] other.["bytes"].
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_call_data_CallData.
  
  Module Impl__crate_marker_StructuralEq_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_call_data_CallData.
  
  Module Impl__crate_cmp_Eq_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      let _ := tt in
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_call_data_CallData.
  
  Module Implcall_data.CallData_2.
    Definition Self := call_data.CallData.
    
    Definition new (selector : crate.call.Selector) : M Self :=
      let* bytes := selector.["to_bytes"] in
      let* α0 :=
        _crate.boxed.Box::["new"] [ bytes[0]; bytes[1]; bytes[2]; bytes[3] ] in
      let* α1 := Slice::["into_vec"] α0 in
      Pure {| Self.bytes := α1; |}.
    
    Global Instance AssociatedFunction_new :
      Notation.DoubleColon Self "new" := {
      Notation.double_colon := new;
    }.
    
    Definition push_arg (self : mut_ref Self) (arg : ref A) : M unit :=
      arg.["encode_to"] (addr_of self.["bytes"]).
    
    Global Instance Method_push_arg : Notation.Dot "push_arg" := {
      Notation.dot := push_arg;
    }.
    
    Definition selector (self : ref Self) : M crate.call.Selector :=
      let* _ :=
        if (true : bool) then
          let* _ :=
            let* α0 := self.["bytes"].["len"] in
            let* α1 := α0.["ge"] 4 in
            let* α2 := α1.["not"] in
            if (α2 : bool) then
              _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
            else
              Pure tt in
          Pure tt
        else
          Pure tt in
      let bytes :=
        [
          self.["bytes"][0];
          self.["bytes"][1];
          self.["bytes"][2];
          self.["bytes"][3]
        ] in
      bytes.["into"].
    
    Global Instance Method_selector : Notation.Dot "selector" := {
      Notation.dot := selector;
    }.
    
    Definition params (self : ref Self) : M (ref Slice) :=
      let* _ :=
        if (true : bool) then
          let* _ :=
            let* α0 := self.["bytes"].["len"] in
            let* α1 := α0.["ge"] 4 in
            let* α2 := α1.["not"] in
            if (α2 : bool) then
              _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
            else
              Pure tt in
          Pure tt
        else
          Pure tt in
      Pure (addr_of self.["bytes"][RangeFrom {| RangeFrom.start := 4; |}]).
    
    Global Instance Method_params : Notation.Dot "params" := {
      Notation.dot := params;
    }.
    
    Definition to_bytes (self : ref Self) : M (ref Slice) :=
      Pure (addr_of self.["bytes"]).
    
    Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
      Notation.dot := to_bytes;
    }.
  End Implcall_data.CallData_2.
  
  Module Impl_scale_Encode_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition size_hint (self : ref Self) : M usize := self.["bytes"].["len"].
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
      let* _ :=
        let* α0 := self.["bytes"].["as_slice"] in
        dest.["write"] α0 in
      Pure tt.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I : scale.Encode.Trait Self := {
    }.
  End Impl_scale_Encode_for_call_data_CallData.
  
  Module Impl_scale_Decode_for_call_data_CallData.
    Definition Self := call_data.CallData.
    
    Definition decode
        (input : mut_ref I)
        : M (core.result.Result Self scale.Error) :=
      let* remaining_len :=
        let* α0 := input.["remaining_len"] in
        let* α1 := α0.["unwrap_or"] None in
        α1.["unwrap_or"] 0 in
      let* bytes := ink_prelude.vec.Vec::["with_capacity"] remaining_len in
      let* _ :=
        loop
          let* α0 := input.["read_byte"] in
          let* α1 := let_if Ok byte := α0 in
          if (α1 : bool) then
            let* _ := bytes.["push"] byte in
            Pure tt
          else
            let _ := Break in
            Pure tt
          from
          while in
      let* _ :=
        let* α0 := bytes.["len"] in
        let* α1 := α0.["lt"] 4 in
        if (α1 : bool) then
          let* α0 :=
            scale.Error::["from"] "require at least 4 bytes for input data" in
          Return (Err α0)
        else
          Pure tt in
      Pure (Ok {| Self.bytes := bytes; |}).
    
    Global Instance AssociatedFunction_decode :
      Notation.DoubleColon Self "decode" := {
      Notation.double_colon := decode;
    }.
    
    Global Instance I : scale.Decode.Trait Self := {
      scale.Decode.decode := decode;
    }.
  End Impl_scale_Decode_for_call_data_CallData.
End call_data.

Module vec := ink_prelude.vec.

Module CallData.
  Record t : Set := {
    bytes : ink_prelude.vec.Vec u8;
  }.
  
  Global Instance Get_bytes : Notation.Dot "bytes" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End CallData.
Definition CallData : Set := CallData.t.

Module Impl__crate_fmt_Debug_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.fmt.Formatter::["debug_struct_field1_finish"]
      f
      "CallData"
      "bytes"
      (addr_of (addr_of self.["bytes"])).
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_call_data_CallData.

Module Impl__crate_clone_Clone_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition clone (self : ref Self) : M call_data.CallData :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["bytes"]) in
    Pure {| call_data.CallData.bytes := α0; |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_call_data_CallData.

Module Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_call_data_CallData.

Module Impl__crate_cmp_PartialEq_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition eq (self : ref Self) (other : ref call_data.CallData) : M bool :=
    self.["bytes"].["eq"] other.["bytes"].
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_call_data_CallData.

Module Impl__crate_marker_StructuralEq_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_call_data_CallData.

Module Impl__crate_cmp_Eq_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
    let _ := tt in
    Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_call_data_CallData.

Module Implcall_data.CallData_3.
  Definition Self := call_data.CallData.
  
  Definition new (selector : crate.call.Selector) : M Self :=
    let* bytes := selector.["to_bytes"] in
    let* α0 :=
      _crate.boxed.Box::["new"] [ bytes[0]; bytes[1]; bytes[2]; bytes[3] ] in
    let* α1 := Slice::["into_vec"] α0 in
    Pure {| Self.bytes := α1; |}.
  
  Global Instance AssociatedFunction_new : Notation.DoubleColon Self "new" := {
    Notation.double_colon := new;
  }.
  
  Definition push_arg (self : mut_ref Self) (arg : ref A) : M unit :=
    arg.["encode_to"] (addr_of self.["bytes"]).
  
  Global Instance Method_push_arg : Notation.Dot "push_arg" := {
    Notation.dot := push_arg;
  }.
  
  Definition selector (self : ref Self) : M crate.call.Selector :=
    let* _ :=
      if (true : bool) then
        let* _ :=
          let* α0 := self.["bytes"].["len"] in
          let* α1 := α0.["ge"] 4 in
          let* α2 := α1.["not"] in
          if (α2 : bool) then
            _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
          else
            Pure tt in
        Pure tt
      else
        Pure tt in
    let bytes :=
      [
        self.["bytes"][0];
        self.["bytes"][1];
        self.["bytes"][2];
        self.["bytes"][3]
      ] in
    bytes.["into"].
  
  Global Instance Method_selector : Notation.Dot "selector" := {
    Notation.dot := selector;
  }.
  
  Definition params (self : ref Self) : M (ref Slice) :=
    let* _ :=
      if (true : bool) then
        let* _ :=
          let* α0 := self.["bytes"].["len"] in
          let* α1 := α0.["ge"] 4 in
          let* α2 := α1.["not"] in
          if (α2 : bool) then
            _crate.panicking.panic "assertion failed: self.bytes.len() >= 4"
          else
            Pure tt in
        Pure tt
      else
        Pure tt in
    Pure (addr_of self.["bytes"][RangeFrom {| RangeFrom.start := 4; |}]).
  
  Global Instance Method_params : Notation.Dot "params" := {
    Notation.dot := params;
  }.
  
  Definition to_bytes (self : ref Self) : M (ref Slice) :=
    Pure (addr_of self.["bytes"]).
  
  Global Instance Method_to_bytes : Notation.Dot "to_bytes" := {
    Notation.dot := to_bytes;
  }.
End Implcall_data.CallData_3.

Module Impl_scale_Encode_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition size_hint (self : ref Self) : M usize := self.["bytes"].["len"].
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
    let* _ :=
      let* α0 := self.["bytes"].["as_slice"] in
      dest.["write"] α0 in
    Pure tt.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I : scale.Encode.Trait Self := {
  }.
End Impl_scale_Encode_for_call_data_CallData.

Module Impl_scale_Decode_for_call_data_CallData.
  Definition Self := call_data.CallData.
  
  Definition decode
      (input : mut_ref I)
      : M (core.result.Result Self scale.Error) :=
    let* remaining_len :=
      let* α0 := input.["remaining_len"] in
      let* α1 := α0.["unwrap_or"] None in
      α1.["unwrap_or"] 0 in
    let* bytes := ink_prelude.vec.Vec::["with_capacity"] remaining_len in
    let* _ :=
      loop
        let* α0 := input.["read_byte"] in
        let* α1 := let_if Ok byte := α0 in
        if (α1 : bool) then
          let* _ := bytes.["push"] byte in
          Pure tt
        else
          let _ := Break in
          Pure tt
        from
        while in
    let* _ :=
      let* α0 := bytes.["len"] in
      let* α1 := α0.["lt"] 4 in
      if (α1 : bool) then
        let* α0 :=
          scale.Error::["from"] "require at least 4 bytes for input data" in
        Return (Err α0)
      else
        Pure tt in
    Pure (Ok {| Self.bytes := bytes; |}).
  
  Global Instance AssociatedFunction_decode :
    Notation.DoubleColon Self "decode" := {
    Notation.double_colon := decode;
  }.
  
  Global Instance I : scale.Decode.Trait Self := {
    scale.Decode.decode := decode;
  }.
End Impl_scale_Decode_for_call_data_CallData.

Module impls.
  Module ext := ink_engine.ext.
  
  Definition BUFFER_SIZE : usize := run (1.["shl"] 14).
  
  Module Impl_CryptoHash_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition hash
        (input : ref Slice)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      let* output :=
        let offset := 0 in
        let slice :=
          addr_of
            output[Range
                {|
                Range.start := offset;
                Range.end := offset.["add"] 16;
              |}] in
        as_array slice in
      let* _ := ink_engine.ext.Engine::["hash_blake2_128"] input output in
      Pure tt.
    
    Global Instance AssociatedFunction_hash :
      Notation.DoubleColon Self "hash" := {
      Notation.double_colon := hash;
    }.
    
    Global Instance I : CryptoHash.Trait Self := {
      CryptoHash.hash := hash;
    }.
  End Impl_CryptoHash_for_crate_hash_Blake2x128.
  
  Module Impl_CryptoHash_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition hash
        (input : ref Slice)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      let* output :=
        let offset := 0 in
        let slice :=
          addr_of
            output[Range
                {|
                Range.start := offset;
                Range.end := offset.["add"] 32;
              |}] in
        as_array slice in
      let* _ := ink_engine.ext.Engine::["hash_blake2_256"] input output in
      Pure tt.
    
    Global Instance AssociatedFunction_hash :
      Notation.DoubleColon Self "hash" := {
      Notation.double_colon := hash;
    }.
    
    Global Instance I : CryptoHash.Trait Self := {
      CryptoHash.hash := hash;
    }.
  End Impl_CryptoHash_for_crate_hash_Blake2x256.
  
  Module Impl_CryptoHash_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition hash
        (input : ref Slice)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      let* output :=
        let offset := 0 in
        let slice :=
          addr_of
            output[Range
                {|
                Range.start := offset;
                Range.end := offset.["add"] 32;
              |}] in
        as_array slice in
      let* _ := ink_engine.ext.Engine::["hash_sha2_256"] input output in
      Pure tt.
    
    Global Instance AssociatedFunction_hash :
      Notation.DoubleColon Self "hash" := {
      Notation.double_colon := hash;
    }.
    
    Global Instance I : CryptoHash.Trait Self := {
      CryptoHash.hash := hash;
    }.
  End Impl_CryptoHash_for_crate_hash_Sha2x256.
  
  Module Impl_CryptoHash_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition hash
        (input : ref Slice)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      let* output :=
        let offset := 0 in
        let slice :=
          addr_of
            output[Range
                {|
                Range.start := offset;
                Range.end := offset.["add"] 32;
              |}] in
        as_array slice in
      let* _ := ink_engine.ext.Engine::["hash_keccak_256"] input output in
      Pure tt.
    
    Global Instance AssociatedFunction_hash :
      Notation.DoubleColon Self "hash" := {
      Notation.double_colon := hash;
    }.
    
    Global Instance I : CryptoHash.Trait Self := {
      CryptoHash.hash := hash;
    }.
  End Impl_CryptoHash_for_crate_hash_Keccak256.
  
  Module Impl_From_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition from (ext_error : ext.Error) : M Self :=
      match ext_error with
      | ext.Error.Unknown => Pure Self::["Unknown"]
      | ext.Error.CalleeTrapped => Pure Self::["CalleeTrapped"]
      | ext.Error.CalleeReverted => Pure Self::["CalleeReverted"]
      | ext.Error.KeyNotFound => Pure Self::["KeyNotFound"]
      | ext.Error._BelowSubsistenceThreshold =>
        Pure Self::["_BelowSubsistenceThreshold"]
      | ext.Error.TransferFailed => Pure Self::["TransferFailed"]
      | ext.Error._EndowmentTooLow => Pure Self::["_EndowmentTooLow"]
      | ext.Error.CodeNotFound => Pure Self::["CodeNotFound"]
      | ext.Error.NotCallable => Pure Self::["NotCallable"]
      | ext.Error.LoggingDisabled => Pure Self::["LoggingDisabled"]
      | ext.Error.EcdsaRecoveryFailed => Pure Self::["EcdsaRecoveryFailed"]
      end.
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : From.Trait Self ext.Error := {
      From.from := from;
    }.
  End Impl_From_for_crate_Error.
  
  Module TopicsBuilder.
    Record t : Set := {
      topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
    }.
    
    Global Instance Get_topics : Notation.Dot "topics" := {
      Notation.dot '(Build_t x0) := x0;
    }.
  End TopicsBuilder.
  Definition TopicsBuilder : Set := TopicsBuilder.t.
  
  Module Impl__crate_default_Default_for_TopicsBuilder.
    Definition Self := TopicsBuilder.
    
    Definition default (_ : unit) : M TopicsBuilder :=
      let* α0 := _crate.default.Default.default tt in
      Pure {| TopicsBuilder.topics := α0; |}.
    
    Global Instance AssociatedFunction_default :
      Notation.DoubleColon Self "default" := {
      Notation.double_colon := default;
    }.
    
    Global Instance I : _crate.default.Default.Trait Self := {
      _crate.default.Default.default := default;
    }.
  End Impl__crate_default_Default_for_TopicsBuilder.
  
  Module Impl_TopicsBuilderBackend_for_TopicsBuilder.
    Definition Self := TopicsBuilder.
    
    Definition Output : Set := ink_prelude.vec.Vec u8.
    
    Definition expect
        (self : mut_ref Self)
        (_expected_topics : usize)
        : M unit :=
      Pure tt.
    
    Global Instance Method_expect : Notation.Dot "expect" := {
      Notation.dot := expect;
    }.
    
    Definition push_topic
        (self : mut_ref Self)
        (topic_value : ref T)
        : M unit :=
      let* encoded := topic_value.["encode"] in
      let* len_encoded := encoded.["len"] in
      let result := Environment.Hash::["CLEAR_HASH"] in
      let* len_result :=
        let* α0 := result.["as_ref"] in
        α0.["len"] in
      let* _ :=
        let* α0 := len_encoded.["le"] len_result in
        if (α0 : bool) then
          let* _ :=
            let* α0 := result.["as_mut"] in
            α0[RangeTo {| RangeTo.end := len_encoded; |}].["copy_from_slice"]
              (addr_of encoded[RangeFull {|  |}]) in
          Pure tt
        else
          let* hash_output := HashOutput.Type::["default"] tt in
          let* _ :=
            CryptoHash.hash
              (addr_of encoded[RangeFull {|  |}])
              (addr_of hash_output) in
          let* copy_len :=
            let* α0 := hash_output.["len"] in
            core.cmp.min α0 len_result in
          let* _ :=
            let* α0 := result.["as_mut"] in
            α0[Range {| Range.start := 0; Range.end := copy_len;
                |}].["copy_from_slice"]
              (addr_of
                hash_output[Range {| Range.start := 0; Range.end := copy_len;
                  |}]) in
          Pure tt in
      let* off_hash := result.["as_ref"] in
      let* off_hash := off_hash.["to_vec"] in
      let* _ :=
        if (true : bool) then
          let* _ :=
            let* α0 := self.["topics"].["contains"] (addr_of off_hash) in
            let* α1 := α0.["not"] in
            let* α2 := α1.["not"] in
            if (α2 : bool) then
              let* α0 :=
                format_arguments::["new_const"]
                  (addr_of [ "duplicate topic hash discovered!" ]) in
              _crate.panicking.panic_fmt α0
            else
              Pure tt in
          Pure tt
        else
          Pure tt in
      let* _ := self.["topics"].["push"] off_hash in
      Pure tt.
    
    Global Instance Method_push_topic : Notation.Dot "push_topic" := {
      Notation.dot := push_topic;
    }.
    
    Definition output (self : Self) : M ImplSelf.Output :=
      let* all := ink_prelude.vec.Vec::["new"] tt in
      let* topics_len_compact :=
        let* α0 := self.["topics"].["len"] in
        Pure (addr_of (scale.Compact.Build_t (cast α0 u32))) in
      let* topics_encoded :=
        let* α0 := scale.Encode.encode (addr_of topics_len_compact) in
        Pure (addr_of α0[RangeFull {|  |}]) in
      let* _ :=
        let* α0 := topics_encoded.["to_vec"] in
        all.["append"] (addr_of α0) in
      let* _ :=
        let* α0 := self.["topics"].["into_iter"] in
        α0.["for_each"] (fun v => all.["append"] (addr_of v)) in
      Pure all.
    
    Global Instance Method_output : Notation.Dot "output" := {
      Notation.dot := output;
    }.
    
    Global Instance I E : TopicsBuilderBackend.Trait Self E := {
      TopicsBuilderBackend.expect := expect;
      TopicsBuilderBackend.push_topic := push_topic;
      TopicsBuilderBackend.output := output;
    }.
  End Impl_TopicsBuilderBackend_for_TopicsBuilder.
  
  Module Implsuper.EnvInstance_3.
    Definition Self := super.EnvInstance.
    
    Definition get_property
        (self : mut_ref Self)
        (ext_fn
          :
          (ref ink_engine.ext.Engine) -> (mut_ref (mut_ref Slice)) -> unit)
        : M (crate.Result T) :=
      let* full_scope := repeat 0 in
      let full_scope := addr_of (addr_of full_scope[RangeFull {|  |}]) in
      let* _ := ext_fn (addr_of self.["engine"]) full_scope in
      let* α0 :=
        scale.Decode.decode (addr_of (addr_of full_scope[RangeFull {|  |}])) in
      α0.["map_err"] Into.into.
    
    Global Instance Method_get_property : Notation.Dot "get_property" := {
      Notation.dot := get_property;
    }.
  End Implsuper.EnvInstance_3.
  
  Module Impl_EnvBackend_for_super_EnvInstance.
    Definition Self := super.EnvInstance.
    
    Definition set_contract_storage
        (self : mut_ref Self)
        (key : ref K)
        (value : ref V)
        : M (Option u32) :=
      let* v := _crate.vec.Vec::["new"] tt in
      let* _ := Storable.encode value (addr_of v) in
      let* α0 := key.["encode"] in
      self.["engine"].["set_storage"]
        (addr_of α0)
        (addr_of v[RangeFull {|  |}]).
    
    Global Instance Method_set_contract_storage :
      Notation.Dot "set_contract_storage" := {
      Notation.dot := set_contract_storage;
    }.
    
    Definition get_contract_storage
        (self : mut_ref Self)
        (key : ref K)
        : M (crate.Result (Option R)) :=
      let* output := repeat 0 in
      let* _ :=
        let* α0 := key.["encode"] in
        let* α1 :=
          self.["engine"].["get_storage"]
            (addr_of α0)
            (addr_of (addr_of output[RangeFull {|  |}])) in
        match α1 with
        | Ok _ => Pure tt
        | Err ext.Error.KeyNotFound => Return (Ok None)
        | Err _ =>
          let* α0 :=
            format_arguments::["new_const"]
              (addr_of [ "encountered unexpected error" ]) in
          _crate.panicking.panic_fmt α0
        end in
      let* decoded :=
        let* α0 :=
          Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      Pure (Ok (Some decoded)).
    
    Global Instance Method_get_contract_storage :
      Notation.Dot "get_contract_storage" := {
      Notation.dot := get_contract_storage;
    }.
    
    Definition take_contract_storage
        (self : mut_ref Self)
        (key : ref K)
        : M (crate.Result (Option R)) :=
      let* output := repeat 0 in
      let* _ :=
        let* α0 := key.["encode"] in
        let* α1 :=
          self.["engine"].["take_storage"]
            (addr_of α0)
            (addr_of (addr_of output[RangeFull {|  |}])) in
        match α1 with
        | Ok _ => Pure tt
        | Err ext.Error.KeyNotFound => Return (Ok None)
        | Err _ =>
          let* α0 :=
            format_arguments::["new_const"]
              (addr_of [ "encountered unexpected error" ]) in
          _crate.panicking.panic_fmt α0
        end in
      let* decoded :=
        let* α0 :=
          Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      Pure (Ok (Some decoded)).
    
    Global Instance Method_take_contract_storage :
      Notation.Dot "take_contract_storage" := {
      Notation.dot := take_contract_storage;
    }.
    
    Definition contains_contract_storage
        (self : mut_ref Self)
        (key : ref K)
        : M (Option u32) :=
      let* α0 := key.["encode"] in
      self.["engine"].["contains_storage"] (addr_of α0).
    
    Global Instance Method_contains_contract_storage :
      Notation.Dot "contains_contract_storage" := {
      Notation.dot := contains_contract_storage;
    }.
    
    Definition clear_contract_storage
        (self : mut_ref Self)
        (key : ref K)
        : M (Option u32) :=
      let* α0 := key.["encode"] in
      self.["engine"].["clear_storage"] (addr_of α0).
    
    Global Instance Method_clear_contract_storage :
      Notation.Dot "clear_contract_storage" := {
      Notation.dot := clear_contract_storage;
    }.
    
    Definition decode_input (self : mut_ref Self) : M (crate.Result T) :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [ "not implemented: the off-chain env does not implement `input`" ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_decode_input : Notation.Dot "decode_input" := {
      Notation.dot := decode_input;
    }.
    
    Definition return_value
        (self : mut_ref Self)
        (_flags : crate.ReturnFlags)
        (_return_value : ref R)
        : M Empty_set :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: the off-chain env does not implement `return_value`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_return_value : Notation.Dot "return_value" := {
      Notation.dot := return_value;
    }.
    
    Definition debug_message
        (self : mut_ref Self)
        (message : ref str)
        : M unit :=
      self.["engine"].["debug_message"] message.
    
    Global Instance Method_debug_message : Notation.Dot "debug_message" := {
      Notation.dot := debug_message;
    }.
    
    Definition hash_bytes
        (self : mut_ref Self)
        (input : ref Slice)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      CryptoHash.hash input output.
    
    Global Instance Method_hash_bytes : Notation.Dot "hash_bytes" := {
      Notation.dot := hash_bytes;
    }.
    
    Definition hash_encoded
        (self : mut_ref Self)
        (input : ref T)
        (output : mut_ref HashOutput.Type)
        : M unit :=
      let* enc_input :=
        let* α0 := scale.Encode.encode input in
        Pure (addr_of α0[RangeFull {|  |}]) in
      CryptoHash.hash enc_input output.
    
    Global Instance Method_hash_encoded : Notation.Dot "hash_encoded" := {
      Notation.dot := hash_encoded;
    }.
    
    Definition ecdsa_recover
        (self : mut_ref Self)
        (signature : ref list u8)
        (message_hash : ref list u8)
        (output : mut_ref list u8)
        : M (crate.Result unit) :=
      let* recovery_byte :=
        let* α0 := signature[64].["gt"] 26 in
        if (α0 : bool) then
          signature[64].["sub"] 27
        else
          Pure signature[64] in
      let* recovery_id :=
        let* α0 := RecoveryId::["from_i32"] (cast recovery_byte i32) in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_display"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Unable to parse the recovery id: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* message :=
        let* α0 := Message::["from_slice"] message_hash in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_display"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Unable to create the message from hash: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* signature :=
        let* α0 :=
          RecoverableSignature::["from_compact"]
            (addr_of signature[Range {| Range.start := 0; Range.end := 64; |}])
            recovery_id in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_display"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "Unable to parse the signature: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* pub_key :=
        SECP256K1.["recover_ecdsa"] (addr_of message) (addr_of signature) in
      match pub_key with
      | Ok pub_key =>
        let* _ :=
          let* α0 := pub_key.["serialize"] in
          assign output.["deref"] α0 in
        Pure (Ok tt)
      | Err _ => Pure (Err Error.EcdsaRecoveryFailed)
      end.
    
    Global Instance Method_ecdsa_recover : Notation.Dot "ecdsa_recover" := {
      Notation.dot := ecdsa_recover;
    }.
    
    Definition ecdsa_to_eth_address
        (self : mut_ref Self)
        (pubkey : ref list u8)
        (output : mut_ref list u8)
        : M (crate.Result unit) :=
      let* pk :=
        let* α0 := secp256k1.PublicKey::["from_slice"] pubkey in
        let* α1 := α0.["map_err"] (fun _ => Pure Error.EcdsaRecoveryFailed) in
        let* α2 := LangItem α1 in
        match α2 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      let* uncompressed := pk.["serialize_uncompressed"] in
      let* hash := HashOutput.Type::["default"] tt in
      let* _ :=
        crate.hash.Keccak256::["hash"]
          (addr_of uncompressed[RangeFrom {| RangeFrom.start := 1; |}])
          (addr_of hash) in
      let* _ :=
        let* α0 := output.["as_mut"] in
        α0.["copy_from_slice"]
          (addr_of hash[RangeFrom {| RangeFrom.start := 12; |}]) in
      Pure (Ok tt).
    
    Global Instance Method_ecdsa_to_eth_address :
      Notation.Dot "ecdsa_to_eth_address" := {
      Notation.dot := ecdsa_to_eth_address;
    }.
    
    Definition call_chain_extension
        (self : mut_ref Self)
        (func_id : u32)
        (input : ref I)
        (status_to_result : F)
        (decode_to_result : D)
        : M (Root.core.result.Result T E) :=
      let* enc_input :=
        let* α0 := scale.Encode.encode input in
        Pure (addr_of α0[RangeFull {|  |}]) in
      let* output := repeat 0 in
      let* _ :=
        self.["engine"].["call_chain_extension"]
          func_id
          enc_input
          (addr_of (addr_of output[RangeFull {|  |}])) in
      let* '(status, out) :=
        let* α0 :=
          scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
        α0.["unwrap_or_else"]
          (fun error =>
            let* α0 := format_argument::["new_debug"] (addr_of error) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "could not decode `call_chain_extension` output: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1) in
      let* _ :=
        let* α0 := status_to_result status in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      let* decoded :=
        let* α0 := decode_to_result (addr_of out[RangeFull {|  |}]) in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      Pure (Ok decoded).
    
    Global Instance Method_call_chain_extension :
      Notation.Dot "call_chain_extension" := {
      Notation.dot := call_chain_extension;
    }.
    
    Definition set_code_hash
        (self : mut_ref Self)
        (_code_hash : ref Slice)
        : M (crate.Result unit) :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support `set_code_hash`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_set_code_hash : Notation.Dot "set_code_hash" := {
      Notation.dot := set_code_hash;
    }.
    
    Global Instance I : EnvBackend.Trait Self := {
      EnvBackend.set_contract_storage := set_contract_storage;
      EnvBackend.get_contract_storage := get_contract_storage;
      EnvBackend.take_contract_storage := take_contract_storage;
      EnvBackend.contains_contract_storage := contains_contract_storage;
      EnvBackend.clear_contract_storage := clear_contract_storage;
      EnvBackend.decode_input := decode_input;
      EnvBackend.return_value := return_value;
      EnvBackend.debug_message := debug_message;
      EnvBackend.hash_bytes := hash_bytes;
      EnvBackend.hash_encoded := hash_encoded;
      EnvBackend.ecdsa_recover := ecdsa_recover;
      EnvBackend.ecdsa_to_eth_address := ecdsa_to_eth_address;
      EnvBackend.call_chain_extension := call_chain_extension;
      EnvBackend.set_code_hash := set_code_hash;
    }.
  End Impl_EnvBackend_for_super_EnvInstance.
  
  Module Impl_TypedEnvBackend_for_super_EnvInstance.
    Definition Self := super.EnvInstance.
    
    Definition caller (self : mut_ref Self) : M ImplE.AccountId :=
      let* α0 := self.["get_property"] ink_engine.ext.Engine::["caller"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `caller` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_caller : Notation.Dot "caller" := {
      Notation.dot := caller;
    }.
    
    Definition transferred_value (self : mut_ref Self) : M ImplE.Balance :=
      let* α0 :=
        self.["get_property"] ink_engine.ext.Engine::["value_transferred"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `transferred_value` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_transferred_value :
      Notation.Dot "transferred_value" := {
      Notation.dot := transferred_value;
    }.
    
    Definition gas_left (self : mut_ref Self) : M u64 :=
      let* α0 := self.["get_property"] ink_engine.ext.Engine::["gas_left"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `gas_left` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_gas_left : Notation.Dot "gas_left" := {
      Notation.dot := gas_left;
    }.
    
    Definition block_timestamp (self : mut_ref Self) : M ImplE.Timestamp :=
      let* α0 :=
        self.["get_property"] ink_engine.ext.Engine::["block_timestamp"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `block_timestamp` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_block_timestamp : Notation.Dot "block_timestamp" := {
      Notation.dot := block_timestamp;
    }.
    
    Definition account_id (self : mut_ref Self) : M ImplE.AccountId :=
      let* α0 := self.["get_property"] ink_engine.ext.Engine::["address"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `account_id` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_account_id : Notation.Dot "account_id" := {
      Notation.dot := account_id;
    }.
    
    Definition balance (self : mut_ref Self) : M ImplE.Balance :=
      let* α0 := self.["get_property"] ink_engine.ext.Engine::["balance"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `balance` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_balance : Notation.Dot "balance" := {
      Notation.dot := balance;
    }.
    
    Definition block_number (self : mut_ref Self) : M ImplE.BlockNumber :=
      let* α0 :=
        self.["get_property"] ink_engine.ext.Engine::["block_number"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `block_number` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_block_number : Notation.Dot "block_number" := {
      Notation.dot := block_number;
    }.
    
    Definition minimum_balance (self : mut_ref Self) : M ImplE.Balance :=
      let* α0 :=
        self.["get_property"] ink_engine.ext.Engine::["minimum_balance"] in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `minimum_balance` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_minimum_balance : Notation.Dot "minimum_balance" := {
      Notation.dot := minimum_balance;
    }.
    
    Definition emit_event (self : mut_ref Self) (event : Event) : M unit :=
      let* builder := TopicsBuilder::["default"] tt in
      let* enc_topics :=
        let* α0 := builder.["into"] in
        event.["topics"] α0 in
      let* enc_data :=
        let* α0 := scale.Encode.encode (addr_of event) in
        Pure (addr_of α0[RangeFull {|  |}]) in
      let* _ :=
        self.["engine"].["deposit_event"]
          (addr_of enc_topics[RangeFull {|  |}])
          enc_data in
      Pure tt.
    
    Global Instance Method_emit_event : Notation.Dot "emit_event" := {
      Notation.dot := emit_event;
    }.
    
    Definition invoke_contract
        (self : mut_ref Self)
        (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
        : M (crate.Result (ink_primitives.MessageResult R)) :=
      let* _gas_limit := params.["gas_limit"] in
      let* _callee := params.["callee"] in
      let* _call_flags :=
        let* α0 := params.["call_flags"] in
        α0.["into_u32"] in
      let* _transferred_value := params.["transferred_value"] in
      let* _input := params.["exec_input"] in
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support contract invocation"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_invoke_contract : Notation.Dot "invoke_contract" := {
      Notation.dot := invoke_contract;
    }.
    
    Definition invoke_contract_delegate
        (self : mut_ref Self)
        (params
          :
          ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
        : M (crate.Result R) :=
      let* _code_hash := params.["code_hash"] in
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support delegated contract invocation"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_invoke_contract_delegate :
      Notation.Dot "invoke_contract_delegate" := {
      Notation.dot := invoke_contract_delegate;
    }.
    
    Definition instantiate_contract
        (self : mut_ref Self)
        (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
        :
          M
            (crate.Result
              (ink_primitives.ConstructorResult
                ConstructorReturnType.Output)) :=
      let* _code_hash := params.["code_hash"] in
      let* _gas_limit := params.["gas_limit"] in
      let* _endowment := params.["endowment"] in
      let* _input := params.["exec_input"] in
      let* _salt_bytes := params.["salt_bytes"] in
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support contract instantiation"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_instantiate_contract :
      Notation.Dot "instantiate_contract" := {
      Notation.dot := instantiate_contract;
    }.
    
    Definition terminate_contract
        (self : mut_ref Self)
        (beneficiary : ImplE.AccountId)
        : M Empty_set :=
      let* buffer := scale.Encode.encode (addr_of beneficiary) in
      self.["engine"].["terminate"] (addr_of buffer[RangeFull {|  |}]).
    
    Global Instance Method_terminate_contract :
      Notation.Dot "terminate_contract" := {
      Notation.dot := terminate_contract;
    }.
    
    Definition transfer
        (self : mut_ref Self)
        (destination : ImplE.AccountId)
        (value : ImplE.Balance)
        : M (crate.Result unit) :=
      let* enc_destination :=
        let* α0 := scale.Encode.encode (addr_of destination) in
        Pure (addr_of α0[RangeFull {|  |}]) in
      let* enc_value :=
        let* α0 := scale.Encode.encode (addr_of value) in
        Pure (addr_of α0[RangeFull {|  |}]) in
      let* α0 := self.["engine"].["transfer"] enc_destination enc_value in
      α0.["map_err"] Into.into.
    
    Global Instance Method_transfer : Notation.Dot "transfer" := {
      Notation.dot := transfer;
    }.
    
    Definition weight_to_fee
        (self : mut_ref Self)
        (gas : u64)
        : M ImplE.Balance :=
      let* output := repeat 0 in
      let* _ :=
        self.["engine"].["weight_to_fee"]
          gas
          (addr_of (addr_of output[RangeFull {|  |}])) in
      let* α0 :=
        scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not read `weight_to_fee` property: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1).
    
    Global Instance Method_weight_to_fee : Notation.Dot "weight_to_fee" := {
      Notation.dot := weight_to_fee;
    }.
    
    Definition is_contract
        (self : mut_ref Self)
        (account : ref ImplE.AccountId)
        : M bool :=
      let* α0 := scale.Encode.encode (addr_of account) in
      self.["engine"].["is_contract"] α0.
    
    Global Instance Method_is_contract : Notation.Dot "is_contract" := {
      Notation.dot := is_contract;
    }.
    
    Definition caller_is_origin (self : mut_ref Self) : M bool :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support cross-contract calls"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_caller_is_origin :
      Notation.Dot "caller_is_origin" := {
      Notation.dot := caller_is_origin;
    }.
    
    Definition code_hash
        (self : mut_ref Self)
        (_account : ref ImplE.AccountId)
        : M (crate.Result ImplE.Hash) :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support `code_hash`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_code_hash : Notation.Dot "code_hash" := {
      Notation.dot := code_hash;
    }.
    
    Definition own_code_hash
        (self : mut_ref Self)
        : M (crate.Result ImplE.Hash) :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support `own_code_hash`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_own_code_hash : Notation.Dot "own_code_hash" := {
      Notation.dot := own_code_hash;
    }.
    
    Definition call_runtime
        (self : mut_ref Self)
        (_call : ref crate.call.Call)
        : M (crate.Result unit) :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not support `call_runtime`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0.
    
    Global Instance Method_call_runtime : Notation.Dot "call_runtime" := {
      Notation.dot := call_runtime;
    }.
    
    Global Instance I : TypedEnvBackend.Trait Self := {
      TypedEnvBackend.caller := caller;
      TypedEnvBackend.transferred_value := transferred_value;
      TypedEnvBackend.weight_to_fee := weight_to_fee;
      TypedEnvBackend.gas_left := gas_left;
      TypedEnvBackend.block_timestamp := block_timestamp;
      TypedEnvBackend.account_id := account_id;
      TypedEnvBackend.balance := balance;
      TypedEnvBackend.block_number := block_number;
      TypedEnvBackend.minimum_balance := minimum_balance;
      TypedEnvBackend.emit_event := emit_event;
      TypedEnvBackend.invoke_contract := invoke_contract;
      TypedEnvBackend.invoke_contract_delegate := invoke_contract_delegate;
      TypedEnvBackend.instantiate_contract := instantiate_contract;
      TypedEnvBackend.terminate_contract := terminate_contract;
      TypedEnvBackend.transfer := transfer;
      TypedEnvBackend.is_contract := is_contract;
      TypedEnvBackend.caller_is_origin := caller_is_origin;
      TypedEnvBackend.code_hash := code_hash;
      TypedEnvBackend.own_code_hash := own_code_hash;
      TypedEnvBackend.call_runtime := call_runtime;
    }.
  End Impl_TypedEnvBackend_for_super_EnvInstance.
End impls.

Module ext := ink_engine.ext.

Definition BUFFER_SIZE : usize := run (1.["shl"] 14).

Module Impl_CryptoHash_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition hash
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    let* output :=
      let offset := 0 in
      let slice :=
        addr_of
          output[Range {| Range.start := offset; Range.end := offset.["add"] 16;
            |}] in
      as_array slice in
    let* _ := ink_engine.ext.Engine::["hash_blake2_128"] input output in
    Pure tt.
  
  Global Instance AssociatedFunction_hash :
    Notation.DoubleColon Self "hash" := {
    Notation.double_colon := hash;
  }.
  
  Global Instance I : CryptoHash.Trait Self := {
    CryptoHash.hash := hash;
  }.
End Impl_CryptoHash_for_crate_hash_Blake2x128.

Definition OutputType : Set := list u8.

Definition _ :  -> unit :=
  run
    (Pure
      (fun  =>
        let* _ := assert_type_eq_all tt in
        Pure tt)).

Module TypeEq.
  Class Trait (Self : Set) : Set := {
    This : Set;
  }.
  
  Global Instance Method_This `(Trait) : Notation.Dot "This" := {
    Notation.dot := This;
  }.
End TypeEq.

Module Impl_TypeEq_for_T.
  Definition Self := T.
  
  Definition This : Set := Self.
  
  Global Instance I T : TypeEq.Trait Self := {
  }.
End Impl_TypeEq_for_T.

Definition assert_type_eq_all
    {T U : Set}
    `{Sized.Trait T}
    `{TypeEq.Trait T}
    `{Sized.Trait U}
    (_ : unit)
    : M unit :=
  Pure tt.

Definition as_array {T : Set} (slice : mut_ref Slice) : M (mut_ref list T) :=
  let* α0 := slice.["as_mut_ptr"] in
  let* α1 := (cast α0 (mut_ref list _)).["deref"] in
  Pure (addr_of α1).

Module Impl_CryptoHash_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition hash
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    let* output :=
      let offset := 0 in
      let slice :=
        addr_of
          output[Range {| Range.start := offset; Range.end := offset.["add"] 32;
            |}] in
      as_array slice in
    let* _ := ink_engine.ext.Engine::["hash_blake2_256"] input output in
    Pure tt.
  
  Global Instance AssociatedFunction_hash :
    Notation.DoubleColon Self "hash" := {
    Notation.double_colon := hash;
  }.
  
  Global Instance I : CryptoHash.Trait Self := {
    CryptoHash.hash := hash;
  }.
End Impl_CryptoHash_for_crate_hash_Blake2x256.

Definition OutputType : Set := list u8.

Definition _ :  -> unit :=
  run
    (Pure
      (fun  =>
        let* _ := assert_type_eq_all tt in
        Pure tt)).

Module TypeEq.
  Class Trait (Self : Set) : Set := {
    This : Set;
  }.
  
  Global Instance Method_This `(Trait) : Notation.Dot "This" := {
    Notation.dot := This;
  }.
End TypeEq.

Module Impl_TypeEq_for_T.
  Definition Self := T.
  
  Definition This : Set := Self.
  
  Global Instance I T : TypeEq.Trait Self := {
  }.
End Impl_TypeEq_for_T.

Definition assert_type_eq_all
    {T U : Set}
    `{Sized.Trait T}
    `{TypeEq.Trait T}
    `{Sized.Trait U}
    (_ : unit)
    : M unit :=
  Pure tt.

Definition as_array {T : Set} (slice : mut_ref Slice) : M (mut_ref list T) :=
  let* α0 := slice.["as_mut_ptr"] in
  let* α1 := (cast α0 (mut_ref list _)).["deref"] in
  Pure (addr_of α1).

Module Impl_CryptoHash_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition hash
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    let* output :=
      let offset := 0 in
      let slice :=
        addr_of
          output[Range {| Range.start := offset; Range.end := offset.["add"] 32;
            |}] in
      as_array slice in
    let* _ := ink_engine.ext.Engine::["hash_sha2_256"] input output in
    Pure tt.
  
  Global Instance AssociatedFunction_hash :
    Notation.DoubleColon Self "hash" := {
    Notation.double_colon := hash;
  }.
  
  Global Instance I : CryptoHash.Trait Self := {
    CryptoHash.hash := hash;
  }.
End Impl_CryptoHash_for_crate_hash_Sha2x256.

Definition OutputType : Set := list u8.

Definition _ :  -> unit :=
  run
    (Pure
      (fun  =>
        let* _ := assert_type_eq_all tt in
        Pure tt)).

Module TypeEq.
  Class Trait (Self : Set) : Set := {
    This : Set;
  }.
  
  Global Instance Method_This `(Trait) : Notation.Dot "This" := {
    Notation.dot := This;
  }.
End TypeEq.

Module Impl_TypeEq_for_T.
  Definition Self := T.
  
  Definition This : Set := Self.
  
  Global Instance I T : TypeEq.Trait Self := {
  }.
End Impl_TypeEq_for_T.

Definition assert_type_eq_all
    {T U : Set}
    `{Sized.Trait T}
    `{TypeEq.Trait T}
    `{Sized.Trait U}
    (_ : unit)
    : M unit :=
  Pure tt.

Definition as_array {T : Set} (slice : mut_ref Slice) : M (mut_ref list T) :=
  let* α0 := slice.["as_mut_ptr"] in
  let* α1 := (cast α0 (mut_ref list _)).["deref"] in
  Pure (addr_of α1).

Module Impl_CryptoHash_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition hash
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    let* output :=
      let offset := 0 in
      let slice :=
        addr_of
          output[Range {| Range.start := offset; Range.end := offset.["add"] 32;
            |}] in
      as_array slice in
    let* _ := ink_engine.ext.Engine::["hash_keccak_256"] input output in
    Pure tt.
  
  Global Instance AssociatedFunction_hash :
    Notation.DoubleColon Self "hash" := {
    Notation.double_colon := hash;
  }.
  
  Global Instance I : CryptoHash.Trait Self := {
    CryptoHash.hash := hash;
  }.
End Impl_CryptoHash_for_crate_hash_Keccak256.

Definition OutputType : Set := list u8.

Definition _ :  -> unit :=
  run
    (Pure
      (fun  =>
        let* _ := assert_type_eq_all tt in
        Pure tt)).

Module TypeEq.
  Class Trait (Self : Set) : Set := {
    This : Set;
  }.
  
  Global Instance Method_This `(Trait) : Notation.Dot "This" := {
    Notation.dot := This;
  }.
End TypeEq.

Module Impl_TypeEq_for_T.
  Definition Self := T.
  
  Definition This : Set := Self.
  
  Global Instance I T : TypeEq.Trait Self := {
  }.
End Impl_TypeEq_for_T.

Definition assert_type_eq_all
    {T U : Set}
    `{Sized.Trait T}
    `{TypeEq.Trait T}
    `{Sized.Trait U}
    (_ : unit)
    : M unit :=
  Pure tt.

Definition as_array {T : Set} (slice : mut_ref Slice) : M (mut_ref list T) :=
  let* α0 := slice.["as_mut_ptr"] in
  let* α1 := (cast α0 (mut_ref list _)).["deref"] in
  Pure (addr_of α1).

Module Impl_From_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition from (ext_error : ext.Error) : M Self :=
    match ext_error with
    | ext.Error.Unknown => Pure Self::["Unknown"]
    | ext.Error.CalleeTrapped => Pure Self::["CalleeTrapped"]
    | ext.Error.CalleeReverted => Pure Self::["CalleeReverted"]
    | ext.Error.KeyNotFound => Pure Self::["KeyNotFound"]
    | ext.Error._BelowSubsistenceThreshold =>
      Pure Self::["_BelowSubsistenceThreshold"]
    | ext.Error.TransferFailed => Pure Self::["TransferFailed"]
    | ext.Error._EndowmentTooLow => Pure Self::["_EndowmentTooLow"]
    | ext.Error.CodeNotFound => Pure Self::["CodeNotFound"]
    | ext.Error.NotCallable => Pure Self::["NotCallable"]
    | ext.Error.LoggingDisabled => Pure Self::["LoggingDisabled"]
    | ext.Error.EcdsaRecoveryFailed => Pure Self::["EcdsaRecoveryFailed"]
    end.
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : From.Trait Self ext.Error := {
    From.from := from;
  }.
End Impl_From_for_crate_Error.

Module TopicsBuilder.
  Record t : Set := {
    topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
  }.
  
  Global Instance Get_topics : Notation.Dot "topics" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End TopicsBuilder.
Definition TopicsBuilder : Set := TopicsBuilder.t.

Module Impl__crate_default_Default_for_TopicsBuilder.
  Definition Self := TopicsBuilder.
  
  Definition default (_ : unit) : M TopicsBuilder :=
    let* α0 := _crate.default.Default.default tt in
    Pure {| TopicsBuilder.topics := α0; |}.
  
  Global Instance AssociatedFunction_default :
    Notation.DoubleColon Self "default" := {
    Notation.double_colon := default;
  }.
  
  Global Instance I : _crate.default.Default.Trait Self := {
    _crate.default.Default.default := default;
  }.
End Impl__crate_default_Default_for_TopicsBuilder.

Module Impl_TopicsBuilderBackend_for_TopicsBuilder.
  Definition Self := TopicsBuilder.
  
  Definition Output : Set := ink_prelude.vec.Vec u8.
  
  Definition expect (self : mut_ref Self) (_expected_topics : usize) : M unit :=
    Pure tt.
  
  Global Instance Method_expect : Notation.Dot "expect" := {
    Notation.dot := expect;
  }.
  
  Definition push_topic (self : mut_ref Self) (topic_value : ref T) : M unit :=
    let* encoded := topic_value.["encode"] in
    let* len_encoded := encoded.["len"] in
    let result := Environment.Hash::["CLEAR_HASH"] in
    let* len_result :=
      let* α0 := result.["as_ref"] in
      α0.["len"] in
    let* _ :=
      let* α0 := len_encoded.["le"] len_result in
      if (α0 : bool) then
        let* _ :=
          let* α0 := result.["as_mut"] in
          α0[RangeTo {| RangeTo.end := len_encoded; |}].["copy_from_slice"]
            (addr_of encoded[RangeFull {|  |}]) in
        Pure tt
      else
        let* hash_output := HashOutput.Type::["default"] tt in
        let* _ :=
          CryptoHash.hash
            (addr_of encoded[RangeFull {|  |}])
            (addr_of hash_output) in
        let* copy_len :=
          let* α0 := hash_output.["len"] in
          core.cmp.min α0 len_result in
        let* _ :=
          let* α0 := result.["as_mut"] in
          α0[Range {| Range.start := 0; Range.end := copy_len;
              |}].["copy_from_slice"]
            (addr_of
              hash_output[Range {| Range.start := 0; Range.end := copy_len;
                |}]) in
        Pure tt in
    let* off_hash := result.["as_ref"] in
    let* off_hash := off_hash.["to_vec"] in
    let* _ :=
      if (true : bool) then
        let* _ :=
          let* α0 := self.["topics"].["contains"] (addr_of off_hash) in
          let* α1 := α0.["not"] in
          let* α2 := α1.["not"] in
          if (α2 : bool) then
            let* α0 :=
              format_arguments::["new_const"]
                (addr_of [ "duplicate topic hash discovered!" ]) in
            _crate.panicking.panic_fmt α0
          else
            Pure tt in
        Pure tt
      else
        Pure tt in
    let* _ := self.["topics"].["push"] off_hash in
    Pure tt.
  
  Global Instance Method_push_topic : Notation.Dot "push_topic" := {
    Notation.dot := push_topic;
  }.
  
  Definition output (self : Self) : M ImplSelf.Output :=
    let* all := ink_prelude.vec.Vec::["new"] tt in
    let* topics_len_compact :=
      let* α0 := self.["topics"].["len"] in
      Pure (addr_of (scale.Compact.Build_t (cast α0 u32))) in
    let* topics_encoded :=
      let* α0 := scale.Encode.encode (addr_of topics_len_compact) in
      Pure (addr_of α0[RangeFull {|  |}]) in
    let* _ :=
      let* α0 := topics_encoded.["to_vec"] in
      all.["append"] (addr_of α0) in
    let* _ :=
      let* α0 := self.["topics"].["into_iter"] in
      α0.["for_each"] (fun v => all.["append"] (addr_of v)) in
    Pure all.
  
  Global Instance Method_output : Notation.Dot "output" := {
    Notation.dot := output;
  }.
  
  Global Instance I E : TopicsBuilderBackend.Trait Self E := {
    TopicsBuilderBackend.expect := expect;
    TopicsBuilderBackend.push_topic := push_topic;
    TopicsBuilderBackend.output := output;
  }.
End Impl_TopicsBuilderBackend_for_TopicsBuilder.

Module Implsuper.EnvInstance_4.
  Definition Self := super.EnvInstance.
  
  Definition get_property
      (self : mut_ref Self)
      (ext_fn
        :
        (ref ink_engine.ext.Engine) -> (mut_ref (mut_ref Slice)) -> unit)
      : M (crate.Result T) :=
    let* full_scope := repeat 0 in
    let full_scope := addr_of (addr_of full_scope[RangeFull {|  |}]) in
    let* _ := ext_fn (addr_of self.["engine"]) full_scope in
    let* α0 :=
      scale.Decode.decode (addr_of (addr_of full_scope[RangeFull {|  |}])) in
    α0.["map_err"] Into.into.
  
  Global Instance Method_get_property : Notation.Dot "get_property" := {
    Notation.dot := get_property;
  }.
End Implsuper.EnvInstance_4.

Module Impl_EnvBackend_for_super_EnvInstance.
  Definition Self := super.EnvInstance.
  
  Definition set_contract_storage
      (self : mut_ref Self)
      (key : ref K)
      (value : ref V)
      : M (Option u32) :=
    let* v := _crate.vec.Vec::["new"] tt in
    let* _ := Storable.encode value (addr_of v) in
    let* α0 := key.["encode"] in
    self.["engine"].["set_storage"] (addr_of α0) (addr_of v[RangeFull {|  |}]).
  
  Global Instance Method_set_contract_storage :
    Notation.Dot "set_contract_storage" := {
    Notation.dot := set_contract_storage;
  }.
  
  Definition get_contract_storage
      (self : mut_ref Self)
      (key : ref K)
      : M (crate.Result (Option R)) :=
    let* output := repeat 0 in
    let* _ :=
      let* α0 := key.["encode"] in
      let* α1 :=
        self.["engine"].["get_storage"]
          (addr_of α0)
          (addr_of (addr_of output[RangeFull {|  |}])) in
      match α1 with
      | Ok _ => Pure tt
      | Err ext.Error.KeyNotFound => Return (Ok None)
      | Err _ =>
        let* α0 :=
          format_arguments::["new_const"]
            (addr_of [ "encountered unexpected error" ]) in
        _crate.panicking.panic_fmt α0
      end in
    let* decoded :=
      let* α0 := Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    Pure (Ok (Some decoded)).
  
  Global Instance Method_get_contract_storage :
    Notation.Dot "get_contract_storage" := {
    Notation.dot := get_contract_storage;
  }.
  
  Definition take_contract_storage
      (self : mut_ref Self)
      (key : ref K)
      : M (crate.Result (Option R)) :=
    let* output := repeat 0 in
    let* _ :=
      let* α0 := key.["encode"] in
      let* α1 :=
        self.["engine"].["take_storage"]
          (addr_of α0)
          (addr_of (addr_of output[RangeFull {|  |}])) in
      match α1 with
      | Ok _ => Pure tt
      | Err ext.Error.KeyNotFound => Return (Ok None)
      | Err _ =>
        let* α0 :=
          format_arguments::["new_const"]
            (addr_of [ "encountered unexpected error" ]) in
        _crate.panicking.panic_fmt α0
      end in
    let* decoded :=
      let* α0 := Storable.decode (addr_of (addr_of output[RangeFull {|  |}])) in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    Pure (Ok (Some decoded)).
  
  Global Instance Method_take_contract_storage :
    Notation.Dot "take_contract_storage" := {
    Notation.dot := take_contract_storage;
  }.
  
  Definition contains_contract_storage
      (self : mut_ref Self)
      (key : ref K)
      : M (Option u32) :=
    let* α0 := key.["encode"] in
    self.["engine"].["contains_storage"] (addr_of α0).
  
  Global Instance Method_contains_contract_storage :
    Notation.Dot "contains_contract_storage" := {
    Notation.dot := contains_contract_storage;
  }.
  
  Definition clear_contract_storage
      (self : mut_ref Self)
      (key : ref K)
      : M (Option u32) :=
    let* α0 := key.["encode"] in
    self.["engine"].["clear_storage"] (addr_of α0).
  
  Global Instance Method_clear_contract_storage :
    Notation.Dot "clear_contract_storage" := {
    Notation.dot := clear_contract_storage;
  }.
  
  Definition decode_input (self : mut_ref Self) : M (crate.Result T) :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [ "not implemented: the off-chain env does not implement `input`" ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_decode_input : Notation.Dot "decode_input" := {
    Notation.dot := decode_input;
  }.
  
  Definition return_value
      (self : mut_ref Self)
      (_flags : crate.ReturnFlags)
      (_return_value : ref R)
      : M Empty_set :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: the off-chain env does not implement `return_value`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_return_value : Notation.Dot "return_value" := {
    Notation.dot := return_value;
  }.
  
  Definition debug_message (self : mut_ref Self) (message : ref str) : M unit :=
    self.["engine"].["debug_message"] message.
  
  Global Instance Method_debug_message : Notation.Dot "debug_message" := {
    Notation.dot := debug_message;
  }.
  
  Definition hash_bytes
      (self : mut_ref Self)
      (input : ref Slice)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    CryptoHash.hash input output.
  
  Global Instance Method_hash_bytes : Notation.Dot "hash_bytes" := {
    Notation.dot := hash_bytes;
  }.
  
  Definition hash_encoded
      (self : mut_ref Self)
      (input : ref T)
      (output : mut_ref HashOutput.Type)
      : M unit :=
    let* enc_input :=
      let* α0 := scale.Encode.encode input in
      Pure (addr_of α0[RangeFull {|  |}]) in
    CryptoHash.hash enc_input output.
  
  Global Instance Method_hash_encoded : Notation.Dot "hash_encoded" := {
    Notation.dot := hash_encoded;
  }.
  
  Definition ecdsa_recover
      (self : mut_ref Self)
      (signature : ref list u8)
      (message_hash : ref list u8)
      (output : mut_ref list u8)
      : M (crate.Result unit) :=
    let* recovery_byte :=
      let* α0 := signature[64].["gt"] 26 in
      if (α0 : bool) then
        signature[64].["sub"] 27
      else
        Pure signature[64] in
    let* recovery_id :=
      let* α0 := RecoveryId::["from_i32"] (cast recovery_byte i32) in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_display"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Unable to parse the recovery id: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* message :=
      let* α0 := Message::["from_slice"] message_hash in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_display"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Unable to create the message from hash: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* signature :=
      let* α0 :=
        RecoverableSignature::["from_compact"]
          (addr_of signature[Range {| Range.start := 0; Range.end := 64; |}])
          recovery_id in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_display"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "Unable to parse the signature: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* pub_key :=
      SECP256K1.["recover_ecdsa"] (addr_of message) (addr_of signature) in
    match pub_key with
    | Ok pub_key =>
      let* _ :=
        let* α0 := pub_key.["serialize"] in
        assign output.["deref"] α0 in
      Pure (Ok tt)
    | Err _ => Pure (Err Error.EcdsaRecoveryFailed)
    end.
  
  Global Instance Method_ecdsa_recover : Notation.Dot "ecdsa_recover" := {
    Notation.dot := ecdsa_recover;
  }.
  
  Definition ecdsa_to_eth_address
      (self : mut_ref Self)
      (pubkey : ref list u8)
      (output : mut_ref list u8)
      : M (crate.Result unit) :=
    let* pk :=
      let* α0 := secp256k1.PublicKey::["from_slice"] pubkey in
      let* α1 := α0.["map_err"] (fun _ => Pure Error.EcdsaRecoveryFailed) in
      let* α2 := LangItem α1 in
      match α2 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    let* uncompressed := pk.["serialize_uncompressed"] in
    let* hash := HashOutput.Type::["default"] tt in
    let* _ :=
      crate.hash.Keccak256::["hash"]
        (addr_of uncompressed[RangeFrom {| RangeFrom.start := 1; |}])
        (addr_of hash) in
    let* _ :=
      let* α0 := output.["as_mut"] in
      α0.["copy_from_slice"]
        (addr_of hash[RangeFrom {| RangeFrom.start := 12; |}]) in
    Pure (Ok tt).
  
  Global Instance Method_ecdsa_to_eth_address :
    Notation.Dot "ecdsa_to_eth_address" := {
    Notation.dot := ecdsa_to_eth_address;
  }.
  
  Definition call_chain_extension
      (self : mut_ref Self)
      (func_id : u32)
      (input : ref I)
      (status_to_result : F)
      (decode_to_result : D)
      : M (Root.core.result.Result T E) :=
    let* enc_input :=
      let* α0 := scale.Encode.encode input in
      Pure (addr_of α0[RangeFull {|  |}]) in
    let* output := repeat 0 in
    let* _ :=
      self.["engine"].["call_chain_extension"]
        func_id
        enc_input
        (addr_of (addr_of output[RangeFull {|  |}])) in
    let* '(status, out) :=
      let* α0 :=
        scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
      α0.["unwrap_or_else"]
        (fun error =>
          let* α0 := format_argument::["new_debug"] (addr_of error) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "could not decode `call_chain_extension` output: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* _ :=
      let* α0 := status_to_result status in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    let* decoded :=
      let* α0 := decode_to_result (addr_of out[RangeFull {|  |}]) in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    Pure (Ok decoded).
  
  Global Instance Method_call_chain_extension :
    Notation.Dot "call_chain_extension" := {
    Notation.dot := call_chain_extension;
  }.
  
  Definition set_code_hash
      (self : mut_ref Self)
      (_code_hash : ref Slice)
      : M (crate.Result unit) :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support `set_code_hash`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_set_code_hash : Notation.Dot "set_code_hash" := {
    Notation.dot := set_code_hash;
  }.
  
  Global Instance I : EnvBackend.Trait Self := {
    EnvBackend.set_contract_storage := set_contract_storage;
    EnvBackend.get_contract_storage := get_contract_storage;
    EnvBackend.take_contract_storage := take_contract_storage;
    EnvBackend.contains_contract_storage := contains_contract_storage;
    EnvBackend.clear_contract_storage := clear_contract_storage;
    EnvBackend.decode_input := decode_input;
    EnvBackend.return_value := return_value;
    EnvBackend.debug_message := debug_message;
    EnvBackend.hash_bytes := hash_bytes;
    EnvBackend.hash_encoded := hash_encoded;
    EnvBackend.ecdsa_recover := ecdsa_recover;
    EnvBackend.ecdsa_to_eth_address := ecdsa_to_eth_address;
    EnvBackend.call_chain_extension := call_chain_extension;
    EnvBackend.set_code_hash := set_code_hash;
  }.
End Impl_EnvBackend_for_super_EnvInstance.

Module SECP256K1 := secp256k1.SECP256K1.

Module Impl_TypedEnvBackend_for_super_EnvInstance.
  Definition Self := super.EnvInstance.
  
  Definition caller (self : mut_ref Self) : M ImplE.AccountId :=
    let* α0 := self.["get_property"] ink_engine.ext.Engine::["caller"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `caller` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_caller : Notation.Dot "caller" := {
    Notation.dot := caller;
  }.
  
  Definition transferred_value (self : mut_ref Self) : M ImplE.Balance :=
    let* α0 :=
      self.["get_property"] ink_engine.ext.Engine::["value_transferred"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `transferred_value` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_transferred_value :
    Notation.Dot "transferred_value" := {
    Notation.dot := transferred_value;
  }.
  
  Definition gas_left (self : mut_ref Self) : M u64 :=
    let* α0 := self.["get_property"] ink_engine.ext.Engine::["gas_left"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `gas_left` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_gas_left : Notation.Dot "gas_left" := {
    Notation.dot := gas_left;
  }.
  
  Definition block_timestamp (self : mut_ref Self) : M ImplE.Timestamp :=
    let* α0 :=
      self.["get_property"] ink_engine.ext.Engine::["block_timestamp"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `block_timestamp` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_block_timestamp : Notation.Dot "block_timestamp" := {
    Notation.dot := block_timestamp;
  }.
  
  Definition account_id (self : mut_ref Self) : M ImplE.AccountId :=
    let* α0 := self.["get_property"] ink_engine.ext.Engine::["address"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `account_id` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_account_id : Notation.Dot "account_id" := {
    Notation.dot := account_id;
  }.
  
  Definition balance (self : mut_ref Self) : M ImplE.Balance :=
    let* α0 := self.["get_property"] ink_engine.ext.Engine::["balance"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `balance` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_balance : Notation.Dot "balance" := {
    Notation.dot := balance;
  }.
  
  Definition block_number (self : mut_ref Self) : M ImplE.BlockNumber :=
    let* α0 := self.["get_property"] ink_engine.ext.Engine::["block_number"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `block_number` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_block_number : Notation.Dot "block_number" := {
    Notation.dot := block_number;
  }.
  
  Definition minimum_balance (self : mut_ref Self) : M ImplE.Balance :=
    let* α0 :=
      self.["get_property"] ink_engine.ext.Engine::["minimum_balance"] in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `minimum_balance` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_minimum_balance : Notation.Dot "minimum_balance" := {
    Notation.dot := minimum_balance;
  }.
  
  Definition emit_event (self : mut_ref Self) (event : Event) : M unit :=
    let* builder := TopicsBuilder::["default"] tt in
    let* enc_topics :=
      let* α0 := builder.["into"] in
      event.["topics"] α0 in
    let* enc_data :=
      let* α0 := scale.Encode.encode (addr_of event) in
      Pure (addr_of α0[RangeFull {|  |}]) in
    let* _ :=
      self.["engine"].["deposit_event"]
        (addr_of enc_topics[RangeFull {|  |}])
        enc_data in
    Pure tt.
  
  Global Instance Method_emit_event : Notation.Dot "emit_event" := {
    Notation.dot := emit_event;
  }.
  
  Definition invoke_contract
      (self : mut_ref Self)
      (params : ref (crate.call.CallParams E (crate.call.Call E) Args R))
      : M (crate.Result (ink_primitives.MessageResult R)) :=
    let* _gas_limit := params.["gas_limit"] in
    let* _callee := params.["callee"] in
    let* _call_flags :=
      let* α0 := params.["call_flags"] in
      α0.["into_u32"] in
    let* _transferred_value := params.["transferred_value"] in
    let* _input := params.["exec_input"] in
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support contract invocation"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_invoke_contract : Notation.Dot "invoke_contract" := {
    Notation.dot := invoke_contract;
  }.
  
  Definition invoke_contract_delegate
      (self : mut_ref Self)
      (params
        :
        ref (crate.call.CallParams E (crate.call.DelegateCall E) Args R))
      : M (crate.Result R) :=
    let* _code_hash := params.["code_hash"] in
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support delegated contract invocation"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_invoke_contract_delegate :
    Notation.Dot "invoke_contract_delegate" := {
    Notation.dot := invoke_contract_delegate;
  }.
  
  Definition instantiate_contract
      (self : mut_ref Self)
      (params : ref (crate.call.CreateParams E ContractRef Args Salt R))
      :
        M
          (crate.Result
            (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
    let* _code_hash := params.["code_hash"] in
    let* _gas_limit := params.["gas_limit"] in
    let* _endowment := params.["endowment"] in
    let* _input := params.["exec_input"] in
    let* _salt_bytes := params.["salt_bytes"] in
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support contract instantiation"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_instantiate_contract :
    Notation.Dot "instantiate_contract" := {
    Notation.dot := instantiate_contract;
  }.
  
  Definition terminate_contract
      (self : mut_ref Self)
      (beneficiary : ImplE.AccountId)
      : M Empty_set :=
    let* buffer := scale.Encode.encode (addr_of beneficiary) in
    self.["engine"].["terminate"] (addr_of buffer[RangeFull {|  |}]).
  
  Global Instance Method_terminate_contract :
    Notation.Dot "terminate_contract" := {
    Notation.dot := terminate_contract;
  }.
  
  Definition transfer
      (self : mut_ref Self)
      (destination : ImplE.AccountId)
      (value : ImplE.Balance)
      : M (crate.Result unit) :=
    let* enc_destination :=
      let* α0 := scale.Encode.encode (addr_of destination) in
      Pure (addr_of α0[RangeFull {|  |}]) in
    let* enc_value :=
      let* α0 := scale.Encode.encode (addr_of value) in
      Pure (addr_of α0[RangeFull {|  |}]) in
    let* α0 := self.["engine"].["transfer"] enc_destination enc_value in
    α0.["map_err"] Into.into.
  
  Global Instance Method_transfer : Notation.Dot "transfer" := {
    Notation.dot := transfer;
  }.
  
  Definition weight_to_fee
      (self : mut_ref Self)
      (gas : u64)
      : M ImplE.Balance :=
    let* output := repeat 0 in
    let* _ :=
      self.["engine"].["weight_to_fee"]
        gas
        (addr_of (addr_of output[RangeFull {|  |}])) in
    let* α0 :=
      scale.Decode.decode (addr_of (addr_of output[RangeFull {|  |}])) in
    α0.["unwrap_or_else"]
      (fun error =>
        let* α0 := format_argument::["new_debug"] (addr_of error) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "could not read `weight_to_fee` property: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1).
  
  Global Instance Method_weight_to_fee : Notation.Dot "weight_to_fee" := {
    Notation.dot := weight_to_fee;
  }.
  
  Definition is_contract
      (self : mut_ref Self)
      (account : ref ImplE.AccountId)
      : M bool :=
    let* α0 := scale.Encode.encode (addr_of account) in
    self.["engine"].["is_contract"] α0.
  
  Global Instance Method_is_contract : Notation.Dot "is_contract" := {
    Notation.dot := is_contract;
  }.
  
  Definition caller_is_origin (self : mut_ref Self) : M bool :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support cross-contract calls"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_caller_is_origin : Notation.Dot "caller_is_origin" := {
    Notation.dot := caller_is_origin;
  }.
  
  Definition code_hash
      (self : mut_ref Self)
      (_account : ref ImplE.AccountId)
      : M (crate.Result ImplE.Hash) :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support `code_hash`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_code_hash : Notation.Dot "code_hash" := {
    Notation.dot := code_hash;
  }.
  
  Definition own_code_hash
      (self : mut_ref Self)
      : M (crate.Result ImplE.Hash) :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support `own_code_hash`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_own_code_hash : Notation.Dot "own_code_hash" := {
    Notation.dot := own_code_hash;
  }.
  
  Definition call_runtime
      (self : mut_ref Self)
      (_call : ref crate.call.Call)
      : M (crate.Result unit) :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not support `call_runtime`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0.
  
  Global Instance Method_call_runtime : Notation.Dot "call_runtime" := {
    Notation.dot := call_runtime;
  }.
  
  Global Instance I : TypedEnvBackend.Trait Self := {
    TypedEnvBackend.caller := caller;
    TypedEnvBackend.transferred_value := transferred_value;
    TypedEnvBackend.weight_to_fee := weight_to_fee;
    TypedEnvBackend.gas_left := gas_left;
    TypedEnvBackend.block_timestamp := block_timestamp;
    TypedEnvBackend.account_id := account_id;
    TypedEnvBackend.balance := balance;
    TypedEnvBackend.block_number := block_number;
    TypedEnvBackend.minimum_balance := minimum_balance;
    TypedEnvBackend.emit_event := emit_event;
    TypedEnvBackend.invoke_contract := invoke_contract;
    TypedEnvBackend.invoke_contract_delegate := invoke_contract_delegate;
    TypedEnvBackend.instantiate_contract := instantiate_contract;
    TypedEnvBackend.terminate_contract := terminate_contract;
    TypedEnvBackend.transfer := transfer;
    TypedEnvBackend.is_contract := is_contract;
    TypedEnvBackend.caller_is_origin := caller_is_origin;
    TypedEnvBackend.code_hash := code_hash;
    TypedEnvBackend.own_code_hash := own_code_hash;
    TypedEnvBackend.call_runtime := call_runtime;
  }.
End Impl_TypedEnvBackend_for_super_EnvInstance.

Module test_api.
  Module EmittedEvent.
    Record t : Set := {
      topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
      data : ink_prelude.vec.Vec u8;
    }.
    
    Global Instance Get_topics : Notation.Dot "topics" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_data : Notation.Dot "data" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End EmittedEvent.
  Definition EmittedEvent : Set := EmittedEvent.t.
  
  Module Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.
    Definition Self := super.test_api.EmittedEvent.
    
    Definition clone (self : ref Self) : M super.test_api.EmittedEvent :=
      let* α0 := _crate.clone.Clone.clone (addr_of self.["topics"]) in
      let* α1 := _crate.clone.Clone.clone (addr_of self.["data"]) in
      Pure
        {|
          super.test_api.EmittedEvent.topics := α0;
          super.test_api.EmittedEvent.data := α1;
        |}.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.
  
  Definition set_account_balance
      {T : Set}
      `{Environment.Trait T}
      (account_id : ImplT.AccountId)
      (new_balance : ImplT.Balance)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of account_id) in
          instance.["engine"].["set_balance"] α0 new_balance in
        Pure tt).
  
  Definition get_account_balance
      {T : Set}
      `{Environment.Trait T}
      (account_id : ImplT.AccountId)
      : M (crate.Result ImplT.Balance) :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := scale.Encode.encode (addr_of account_id) in
        let* α1 := instance.["engine"].["get_balance"] α0 in
        α1.["map_err"] Into.into).
  
  Definition register_chain_extension
      {E : Set}
      `{ink_engine.ChainExtension.Trait E}
      (extension : E)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ :=
          let* α0 := Box::["new"] extension in
          instance.["engine"].["chain_extension_handler"].["register"] α0 in
        Pure tt).
  
  Definition recorded_debug_messages
      (_ : unit)
      : M ink_engine.test_api.RecordedDebugMessages :=
    OnInstance.on_instance
      (fun instance => instance.["engine"].["get_emitted_debug_messages"]).
  
  Definition set_clear_storage_disabled (_disable : bool) : M unit :=
    let* _ :=
      let* α0 :=
        format_arguments::["new_v1"]
          (addr_of
            [
              "not implemented: off-chain environment does not yet support `set_clear_storage_disabled`"
            ])
          (addr_of [ ]) in
      _crate.panicking.panic_fmt α0 in
    Pure tt.
  
  Definition advance_block
      {T : Set}
      `{Environment.Trait T}
      (_ : unit)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ := instance.["engine"].["advance_block"] in
        Pure tt).
  
  Definition set_caller
      {T : Set}
      `{Environment.Trait T}
      `{From.Trait list u8 Environment.AccountId}
      (caller : ImplT.AccountId)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of caller) in
          instance.["engine"].["set_caller"] α0 in
        Pure tt).
  
  Definition set_callee
      {T : Set}
      `{Environment.Trait T}
      `{From.Trait list u8 Environment.AccountId}
      (callee : ImplT.AccountId)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of callee) in
          instance.["engine"].["set_callee"] α0 in
        Pure tt).
  
  Definition set_contract
      {T : Set}
      `{Environment.Trait T}
      `{From.Trait list u8 Environment.AccountId}
      (contract : ImplT.AccountId)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of contract) in
          instance.["engine"].["set_contract"] α0 in
        Pure tt).
  
  Definition is_contract
      {T : Set}
      `{Environment.Trait T}
      `{From.Trait list u8 Environment.AccountId}
      (contract : ImplT.AccountId)
      : M bool :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := scale.Encode.encode (addr_of contract) in
        instance.["engine"].["is_contract"] α0).
  
  Definition callee
      {T : Set}
      `{Environment.Trait T}
      (_ : unit)
      : M ImplT.AccountId :=
    OnInstance.on_instance
      (fun instance =>
        let* callee := instance.["engine"].["get_callee"] in
        let* α0 :=
          scale.Decode.decode (addr_of (addr_of callee[RangeFull {|  |}])) in
        α0.["unwrap_or_else"]
          (fun err =>
            let* α0 := format_argument::["new_display"] (addr_of err) in
            let* α1 :=
              format_arguments::["new_v1"]
                (addr_of [ "encoding failed: " ])
                (addr_of [ α0 ]) in
            _crate.panicking.panic_fmt α1)).
  
  Definition get_contract_storage_rw
      {T : Set}
      `{Environment.Trait T}
      (account_id : ref ImplT.AccountId)
      : M (usize * usize) :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := scale.Encode.encode (addr_of account_id) in
        instance.["engine"].["get_contract_storage_rw"] α0).
  
  Definition set_value_transferred
      {T : Set}
      `{Environment.Trait T}
      (value : ImplT.Balance)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ := instance.["engine"].["set_value_transferred"] value in
        Pure tt).
  
  Definition transfer_in
      {T : Set}
      `{Environment.Trait T}
      (value : ImplT.Balance)
      : M unit :=
    let* _ :=
      OnInstance.on_instance
        (fun instance =>
          let* caller :=
            let* α0 :=
              instance.["engine"].["exec_context"].["caller"].["as_ref"] in
            let* α1 := α0.["expect"] "no caller has been set" in
            let* α2 := α1.["as_bytes"] in
            α2.["to_vec"] in
          let* caller_old_balance :=
            let* α0 := caller.["clone"] in
            let* α1 := instance.["engine"].["get_balance"] α0 in
            α1.["unwrap_or_default"] in
          let* callee := instance.["engine"].["get_callee"] in
          let* contract_old_balance :=
            let* α0 := callee.["clone"] in
            let* α1 := instance.["engine"].["get_balance"] α0 in
            α1.["unwrap_or_default"] in
          let* _ :=
            let* α0 := caller_old_balance.["sub"] value in
            instance.["engine"].["set_balance"] caller α0 in
          let* _ :=
            let* α0 := contract_old_balance.["add"] value in
            instance.["engine"].["set_balance"] callee α0 in
          let* _ := instance.["engine"].["set_value_transferred"] value in
          Pure tt) in
    Pure tt.
  
  Definition count_used_storage_cells
      {T : Set}
      `{Environment.Trait T}
      (account_id : ref ImplT.AccountId)
      : M (crate.Result usize) :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := scale.Encode.encode (addr_of account_id) in
        let* α1 :=
          instance.["engine"].["count_used_storage_cells"] (addr_of α0) in
        α1.["map_err"] Into.into).
  
  Definition set_block_timestamp
      {T : Set}
      `{Environment.Trait T}
      (value : ImplT.Timestamp)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ := instance.["engine"].["set_block_timestamp"] value in
        Pure tt).
  
  Definition set_block_number
      {T : Set}
      `{Environment.Trait T}
      (value : ImplT.BlockNumber)
      : M unit :=
    OnInstance.on_instance
      (fun instance =>
        let* _ := instance.["engine"].["set_block_number"] value in
        Pure tt).
  
  Definition run_test
      {T F : Set}
      `{Environment.Trait T}
      `{FnOnce.Trait ((DefaultAccounts T)) F}
      `{From.Trait list u8 Environment.AccountId}
      (f : F)
      : M (crate.Result unit) :=
    let* default_accounts := default_accounts tt in
    let* _ :=
      OnInstance.on_instance
        (fun instance =>
          let* _ := instance.["engine"].["initialize_or_reset"] in
          let* encoded_alice :=
            scale.Encode.encode (addr_of default_accounts.["alice"]) in
          let* _ :=
            let* α0 := encoded_alice.["clone"] in
            instance.["engine"].["set_caller"] α0 in
          let* _ :=
            let* α0 := encoded_alice.["clone"] in
            instance.["engine"].["set_callee"] α0 in
          let substantial := 1000000 in
          let some := 1000 in
          let* _ :=
            instance.["engine"].["set_balance"] encoded_alice substantial in
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of default_accounts.["bob"]) in
            instance.["engine"].["set_balance"] α0 some in
          let* _ :=
            let* α0 :=
              scale.Encode.encode (addr_of default_accounts.["charlie"]) in
            instance.["engine"].["set_balance"] α0 some in
          let* _ :=
            let* α0 :=
              scale.Encode.encode (addr_of default_accounts.["django"]) in
            instance.["engine"].["set_balance"] α0 0 in
          let* _ :=
            let* α0 := scale.Encode.encode (addr_of default_accounts.["eve"]) in
            instance.["engine"].["set_balance"] α0 0 in
          let* _ :=
            let* α0 :=
              scale.Encode.encode (addr_of default_accounts.["frank"]) in
            instance.["engine"].["set_balance"] α0 0 in
          Pure tt) in
    f default_accounts.
  
  Definition default_accounts
      {T : Set}
      `{Environment.Trait T}
      `{From.Trait list u8 Environment.AccountId}
      (_ : unit)
      : M (DefaultAccounts T) :=
    let* α0 := repeat 1 in
    let* α1 := ImplT.AccountId::["from"] α0 in
    let* α2 := repeat 2 in
    let* α3 := ImplT.AccountId::["from"] α2 in
    let* α4 := repeat 3 in
    let* α5 := ImplT.AccountId::["from"] α4 in
    let* α6 := repeat 4 in
    let* α7 := ImplT.AccountId::["from"] α6 in
    let* α8 := repeat 5 in
    let* α9 := ImplT.AccountId::["from"] α8 in
    let* α10 := repeat 6 in
    let* α11 := ImplT.AccountId::["from"] α10 in
    Pure
      {|
        DefaultAccounts.alice := α1;
        DefaultAccounts.bob := α3;
        DefaultAccounts.charlie := α5;
        DefaultAccounts.django := α7;
        DefaultAccounts.eve := α9;
        DefaultAccounts.frank := α11;
      |}.
  
  Module DefaultAccounts.
    Record t : Set := {
      alice : ImplT.AccountId;
      bob : ImplT.AccountId;
      charlie : ImplT.AccountId;
      django : ImplT.AccountId;
      eve : ImplT.AccountId;
      frank : ImplT.AccountId;
    }.
    
    Global Instance Get_alice : Notation.Dot "alice" := {
      Notation.dot '(Build_t x0 _ _ _ _ _) := x0;
    }.
    Global Instance Get_bob : Notation.Dot "bob" := {
      Notation.dot '(Build_t _ x1 _ _ _ _) := x1;
    }.
    Global Instance Get_charlie : Notation.Dot "charlie" := {
      Notation.dot '(Build_t _ _ x2 _ _ _) := x2;
    }.
    Global Instance Get_django : Notation.Dot "django" := {
      Notation.dot '(Build_t _ _ _ x3 _ _) := x3;
    }.
    Global Instance Get_eve : Notation.Dot "eve" := {
      Notation.dot '(Build_t _ _ _ _ x4 _) := x4;
    }.
    Global Instance Get_frank : Notation.Dot "frank" := {
      Notation.dot '(Build_t _ _ _ _ _ x5) := x5;
    }.
  End DefaultAccounts.
  Definition DefaultAccounts : Set := DefaultAccounts.t.
  
  Definition recorded_events (_ : unit) : M OpaqueDef :=
    OnInstance.on_instance
      (fun instance =>
        let* α0 := instance.["engine"].["get_emitted_events"] in
        α0.["map"] (fun evt => evt.["into"])).
  
  Definition assert_contract_termination
      {T F : Set}
      `{Environment.Trait T}
      `{FnMut.Trait unit F}
      `{UnwindSafe.Trait F}
      `{Debug.Trait Environment.AccountId}
      `{Debug.Trait Environment.Balance}
      (should_terminate : F)
      (expected_beneficiary : ImplT.AccountId)
      (expected_value_transferred_to_beneficiary : ImplT.Balance)
      : M unit :=
    let* value_any :=
      let* α0 := Root.std.panic.catch_unwind should_terminate in
      α0.["expect_err"] "contract did not terminate" in
    let* encoded_input :=
      let* α0 := value_any.["downcast_ref"] in
      α0.["expect"] "panic object can not be cast" in
    let* '(value_transferred, encoded_beneficiary) :=
      let* α0 :=
        scale.Decode.decode
          (addr_of (addr_of encoded_input[RangeFull {|  |}])) in
      α0.["unwrap_or_else"]
        (fun err =>
          let* α0 := format_argument::["new_display"] (addr_of err) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "input can not be decoded: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* beneficiary :=
      let* α0 :=
        scale.Decode.decode
          (addr_of (addr_of encoded_beneficiary[RangeFull {|  |}])) in
      α0.["unwrap_or_else"]
        (fun err =>
          let* α0 := format_argument::["new_display"] (addr_of err) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "input can not be decoded: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1) in
    let* _ :=
      match
        (addr_of value_transferred,
          addr_of expected_value_transferred_to_beneficiary)
      with
      | (left_val, right_val) =>
        let* α0 := left_val.["deref"] in
        let* α1 := right_val.["deref"] in
        let* α2 := α0.["eq"] α1 in
        let* α3 := α2.["not"] in
        if (α3 : bool) then
          let kind := _crate.panicking.AssertKind.Eq in
          let* _ :=
            let* α0 := left_val.["deref"] in
            let* α1 := right_val.["deref"] in
            _crate.panicking.assert_failed
              kind
              (addr_of α0)
              (addr_of α1)
              _crate.option.Option.None in
          Pure tt
        else
          Pure tt
      end in
    let* _ :=
      match (addr_of beneficiary, addr_of expected_beneficiary) with
      | (left_val, right_val) =>
        let* α0 := left_val.["deref"] in
        let* α1 := right_val.["deref"] in
        let* α2 := α0.["eq"] α1 in
        let* α3 := α2.["not"] in
        if (α3 : bool) then
          let kind := _crate.panicking.AssertKind.Eq in
          let* _ :=
            let* α0 := left_val.["deref"] in
            let* α1 := right_val.["deref"] in
            _crate.panicking.assert_failed
              kind
              (addr_of α0)
              (addr_of α1)
              _crate.option.Option.None in
          Pure tt
        else
          Pure tt
      end in
    Pure tt.
End test_api.

Module EmittedEvent.
  Record t : Set := {
    topics : ink_prelude.vec.Vec (ink_prelude.vec.Vec u8);
    data : ink_prelude.vec.Vec u8;
  }.
  
  Global Instance Get_topics : Notation.Dot "topics" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_data : Notation.Dot "data" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End EmittedEvent.
Definition EmittedEvent : Set := EmittedEvent.t.

Module Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.
  Definition Self := super.test_api.EmittedEvent.
  
  Definition clone (self : ref Self) : M super.test_api.EmittedEvent :=
    let* α0 := _crate.clone.Clone.clone (addr_of self.["topics"]) in
    let* α1 := _crate.clone.Clone.clone (addr_of self.["data"]) in
    Pure
      {|
        super.test_api.EmittedEvent.topics := α0;
        super.test_api.EmittedEvent.data := α1;
      |}.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_super_test_api_EmittedEvent.

Definition set_account_balance
    {T : Set}
    `{Environment.Trait T}
    (account_id : ImplT.AccountId)
    (new_balance : ImplT.Balance)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ :=
        let* α0 := scale.Encode.encode (addr_of account_id) in
        instance.["engine"].["set_balance"] α0 new_balance in
      Pure tt).

Definition get_account_balance
    {T : Set}
    `{Environment.Trait T}
    (account_id : ImplT.AccountId)
    : M (crate.Result ImplT.Balance) :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := scale.Encode.encode (addr_of account_id) in
      let* α1 := instance.["engine"].["get_balance"] α0 in
      α1.["map_err"] Into.into).

Definition register_chain_extension
    {E : Set}
    `{ink_engine.ChainExtension.Trait E}
    (extension : E)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ :=
        let* α0 := Box::["new"] extension in
        instance.["engine"].["chain_extension_handler"].["register"] α0 in
      Pure tt).

Definition recorded_debug_messages
    (_ : unit)
    : M ink_engine.test_api.RecordedDebugMessages :=
  OnInstance.on_instance
    (fun instance => instance.["engine"].["get_emitted_debug_messages"]).

Definition set_clear_storage_disabled (_disable : bool) : M unit :=
  let* _ :=
    let* α0 :=
      format_arguments::["new_v1"]
        (addr_of
          [
            "not implemented: off-chain environment does not yet support `set_clear_storage_disabled`"
          ])
        (addr_of [ ]) in
    _crate.panicking.panic_fmt α0 in
  Pure tt.

Definition advance_block {T : Set} `{Environment.Trait T} (_ : unit) : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ := instance.["engine"].["advance_block"] in
      Pure tt).

Definition set_caller
    {T : Set}
    `{Environment.Trait T}
    `{From.Trait list u8 Environment.AccountId}
    (caller : ImplT.AccountId)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ :=
        let* α0 := scale.Encode.encode (addr_of caller) in
        instance.["engine"].["set_caller"] α0 in
      Pure tt).

Definition set_callee
    {T : Set}
    `{Environment.Trait T}
    `{From.Trait list u8 Environment.AccountId}
    (callee : ImplT.AccountId)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ :=
        let* α0 := scale.Encode.encode (addr_of callee) in
        instance.["engine"].["set_callee"] α0 in
      Pure tt).

Definition set_contract
    {T : Set}
    `{Environment.Trait T}
    `{From.Trait list u8 Environment.AccountId}
    (contract : ImplT.AccountId)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ :=
        let* α0 := scale.Encode.encode (addr_of contract) in
        instance.["engine"].["set_contract"] α0 in
      Pure tt).

Definition is_contract
    {T : Set}
    `{Environment.Trait T}
    `{From.Trait list u8 Environment.AccountId}
    (contract : ImplT.AccountId)
    : M bool :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := scale.Encode.encode (addr_of contract) in
      instance.["engine"].["is_contract"] α0).

Definition callee
    {T : Set}
    `{Environment.Trait T}
    (_ : unit)
    : M ImplT.AccountId :=
  OnInstance.on_instance
    (fun instance =>
      let* callee := instance.["engine"].["get_callee"] in
      let* α0 :=
        scale.Decode.decode (addr_of (addr_of callee[RangeFull {|  |}])) in
      α0.["unwrap_or_else"]
        (fun err =>
          let* α0 := format_argument::["new_display"] (addr_of err) in
          let* α1 :=
            format_arguments::["new_v1"]
              (addr_of [ "encoding failed: " ])
              (addr_of [ α0 ]) in
          _crate.panicking.panic_fmt α1)).

Definition get_contract_storage_rw
    {T : Set}
    `{Environment.Trait T}
    (account_id : ref ImplT.AccountId)
    : M (usize * usize) :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := scale.Encode.encode (addr_of account_id) in
      instance.["engine"].["get_contract_storage_rw"] α0).

Definition set_value_transferred
    {T : Set}
    `{Environment.Trait T}
    (value : ImplT.Balance)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ := instance.["engine"].["set_value_transferred"] value in
      Pure tt).

Definition transfer_in
    {T : Set}
    `{Environment.Trait T}
    (value : ImplT.Balance)
    : M unit :=
  let* _ :=
    OnInstance.on_instance
      (fun instance =>
        let* caller :=
          let* α0 :=
            instance.["engine"].["exec_context"].["caller"].["as_ref"] in
          let* α1 := α0.["expect"] "no caller has been set" in
          let* α2 := α1.["as_bytes"] in
          α2.["to_vec"] in
        let* caller_old_balance :=
          let* α0 := caller.["clone"] in
          let* α1 := instance.["engine"].["get_balance"] α0 in
          α1.["unwrap_or_default"] in
        let* callee := instance.["engine"].["get_callee"] in
        let* contract_old_balance :=
          let* α0 := callee.["clone"] in
          let* α1 := instance.["engine"].["get_balance"] α0 in
          α1.["unwrap_or_default"] in
        let* _ :=
          let* α0 := caller_old_balance.["sub"] value in
          instance.["engine"].["set_balance"] caller α0 in
        let* _ :=
          let* α0 := contract_old_balance.["add"] value in
          instance.["engine"].["set_balance"] callee α0 in
        let* _ := instance.["engine"].["set_value_transferred"] value in
        Pure tt) in
  Pure tt.

Definition count_used_storage_cells
    {T : Set}
    `{Environment.Trait T}
    (account_id : ref ImplT.AccountId)
    : M (crate.Result usize) :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := scale.Encode.encode (addr_of account_id) in
      let* α1 :=
        instance.["engine"].["count_used_storage_cells"] (addr_of α0) in
      α1.["map_err"] Into.into).

Definition set_block_timestamp
    {T : Set}
    `{Environment.Trait T}
    (value : ImplT.Timestamp)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ := instance.["engine"].["set_block_timestamp"] value in
      Pure tt).

Definition set_block_number
    {T : Set}
    `{Environment.Trait T}
    (value : ImplT.BlockNumber)
    : M unit :=
  OnInstance.on_instance
    (fun instance =>
      let* _ := instance.["engine"].["set_block_number"] value in
      Pure tt).

Definition run_test
    {T F : Set}
    `{Environment.Trait T}
    `{FnOnce.Trait ((DefaultAccounts T)) F}
    `{From.Trait list u8 Environment.AccountId}
    (f : F)
    : M (crate.Result unit) :=
  let* default_accounts := default_accounts tt in
  let* _ :=
    OnInstance.on_instance
      (fun instance =>
        let* _ := instance.["engine"].["initialize_or_reset"] in
        let* encoded_alice :=
          scale.Encode.encode (addr_of default_accounts.["alice"]) in
        let* _ :=
          let* α0 := encoded_alice.["clone"] in
          instance.["engine"].["set_caller"] α0 in
        let* _ :=
          let* α0 := encoded_alice.["clone"] in
          instance.["engine"].["set_callee"] α0 in
        let substantial := 1000000 in
        let some := 1000 in
        let* _ :=
          instance.["engine"].["set_balance"] encoded_alice substantial in
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of default_accounts.["bob"]) in
          instance.["engine"].["set_balance"] α0 some in
        let* _ :=
          let* α0 :=
            scale.Encode.encode (addr_of default_accounts.["charlie"]) in
          instance.["engine"].["set_balance"] α0 some in
        let* _ :=
          let* α0 :=
            scale.Encode.encode (addr_of default_accounts.["django"]) in
          instance.["engine"].["set_balance"] α0 0 in
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of default_accounts.["eve"]) in
          instance.["engine"].["set_balance"] α0 0 in
        let* _ :=
          let* α0 := scale.Encode.encode (addr_of default_accounts.["frank"]) in
          instance.["engine"].["set_balance"] α0 0 in
        Pure tt) in
  f default_accounts.

Definition default_accounts
    {T : Set}
    `{Environment.Trait T}
    `{From.Trait list u8 Environment.AccountId}
    (_ : unit)
    : M (DefaultAccounts T) :=
  let* α0 := repeat 1 in
  let* α1 := ImplT.AccountId::["from"] α0 in
  let* α2 := repeat 2 in
  let* α3 := ImplT.AccountId::["from"] α2 in
  let* α4 := repeat 3 in
  let* α5 := ImplT.AccountId::["from"] α4 in
  let* α6 := repeat 4 in
  let* α7 := ImplT.AccountId::["from"] α6 in
  let* α8 := repeat 5 in
  let* α9 := ImplT.AccountId::["from"] α8 in
  let* α10 := repeat 6 in
  let* α11 := ImplT.AccountId::["from"] α10 in
  Pure
    {|
      DefaultAccounts.alice := α1;
      DefaultAccounts.bob := α3;
      DefaultAccounts.charlie := α5;
      DefaultAccounts.django := α7;
      DefaultAccounts.eve := α9;
      DefaultAccounts.frank := α11;
    |}.

Module DefaultAccounts.
  Record t : Set := {
    alice : ImplT.AccountId;
    bob : ImplT.AccountId;
    charlie : ImplT.AccountId;
    django : ImplT.AccountId;
    eve : ImplT.AccountId;
    frank : ImplT.AccountId;
  }.
  
  Global Instance Get_alice : Notation.Dot "alice" := {
    Notation.dot '(Build_t x0 _ _ _ _ _) := x0;
  }.
  Global Instance Get_bob : Notation.Dot "bob" := {
    Notation.dot '(Build_t _ x1 _ _ _ _) := x1;
  }.
  Global Instance Get_charlie : Notation.Dot "charlie" := {
    Notation.dot '(Build_t _ _ x2 _ _ _) := x2;
  }.
  Global Instance Get_django : Notation.Dot "django" := {
    Notation.dot '(Build_t _ _ _ x3 _ _) := x3;
  }.
  Global Instance Get_eve : Notation.Dot "eve" := {
    Notation.dot '(Build_t _ _ _ _ x4 _) := x4;
  }.
  Global Instance Get_frank : Notation.Dot "frank" := {
    Notation.dot '(Build_t _ _ _ _ _ x5) := x5;
  }.
End DefaultAccounts.
Definition DefaultAccounts : Set := DefaultAccounts.t.

Definition recorded_events (_ : unit) : M OpaqueDef :=
  OnInstance.on_instance
    (fun instance =>
      let* α0 := instance.["engine"].["get_emitted_events"] in
      α0.["map"] (fun evt => evt.["into"])).

Error OpaqueTy.

Definition assert_contract_termination
    {T F : Set}
    `{Environment.Trait T}
    `{FnMut.Trait unit F}
    `{UnwindSafe.Trait F}
    `{Debug.Trait Environment.AccountId}
    `{Debug.Trait Environment.Balance}
    (should_terminate : F)
    (expected_beneficiary : ImplT.AccountId)
    (expected_value_transferred_to_beneficiary : ImplT.Balance)
    : M unit :=
  let* value_any :=
    let* α0 := Root.std.panic.catch_unwind should_terminate in
    α0.["expect_err"] "contract did not terminate" in
  let* encoded_input :=
    let* α0 := value_any.["downcast_ref"] in
    α0.["expect"] "panic object can not be cast" in
  let* '(value_transferred, encoded_beneficiary) :=
    let* α0 :=
      scale.Decode.decode (addr_of (addr_of encoded_input[RangeFull {|  |}])) in
    α0.["unwrap_or_else"]
      (fun err =>
        let* α0 := format_argument::["new_display"] (addr_of err) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "input can not be decoded: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1) in
  let* beneficiary :=
    let* α0 :=
      scale.Decode.decode
        (addr_of (addr_of encoded_beneficiary[RangeFull {|  |}])) in
    α0.["unwrap_or_else"]
      (fun err =>
        let* α0 := format_argument::["new_display"] (addr_of err) in
        let* α1 :=
          format_arguments::["new_v1"]
            (addr_of [ "input can not be decoded: " ])
            (addr_of [ α0 ]) in
        _crate.panicking.panic_fmt α1) in
  let* _ :=
    match
      (addr_of value_transferred,
        addr_of expected_value_transferred_to_beneficiary)
    with
    | (left_val, right_val) =>
      let* α0 := left_val.["deref"] in
      let* α1 := right_val.["deref"] in
      let* α2 := α0.["eq"] α1 in
      let* α3 := α2.["not"] in
      if (α3 : bool) then
        let kind := _crate.panicking.AssertKind.Eq in
        let* _ :=
          let* α0 := left_val.["deref"] in
          let* α1 := right_val.["deref"] in
          _crate.panicking.assert_failed
            kind
            (addr_of α0)
            (addr_of α1)
            _crate.option.Option.None in
        Pure tt
      else
        Pure tt
    end in
  let* _ :=
    match (addr_of beneficiary, addr_of expected_beneficiary) with
    | (left_val, right_val) =>
      let* α0 := left_val.["deref"] in
      let* α1 := right_val.["deref"] in
      let* α2 := α0.["eq"] α1 in
      let* α3 := α2.["not"] in
      if (α3 : bool) then
        let kind := _crate.panicking.AssertKind.Eq in
        let* _ :=
          let* α0 := left_val.["deref"] in
          let* α1 := right_val.["deref"] in
          _crate.panicking.assert_failed
            kind
            (addr_of α0)
            (addr_of α1)
            _crate.option.Option.None in
        Pure tt
      else
        Pure tt
    end in
  Pure tt.

Module types.
  Module Impl_From_for_super_test_api_EmittedEvent.
    Definition Self := super.test_api.EmittedEvent.
    
    Definition from (evt : ink_engine.test_api.EmittedEvent) : M Self :=
      Pure
        {|
          super.test_api.EmittedEvent.topics := evt.["topics"];
          super.test_api.EmittedEvent.data := evt.["data"];
        |}.
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : From.Trait Self ink_engine.test_api.EmittedEvent := {
      From.from := from;
    }.
  End Impl_From_for_super_test_api_EmittedEvent.
  
  Module Impl_From_for_super_Error.
    Definition Self := super.Error.
    
    Definition from (err : ink_engine.Error) : M Self :=
      let* e :=
        match err with
        | ink_engine.Error.Account acc =>
          let* α0 := acc.["into"] in
          Pure (OffChainError.Account α0)
        | ink_engine.Error.UninitializedBlocks =>
          Pure OffChainError.UninitializedBlocks
        | ink_engine.Error.UninitializedExecutionContext =>
          Pure OffChainError.UninitializedExecutionContext
        | ink_engine.Error.UnregisteredChainExtension =>
          Pure OffChainError.UnregisteredChainExtension
        end in
      Pure (Error.OffChain e).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : From.Trait Self ink_engine.Error := {
      From.from := from;
    }.
  End Impl_From_for_super_Error.
  
  Module Impl_From_for_super_AccountError.
    Definition Self := super.AccountError.
    
    Definition from (err : ink_engine.AccountError) : M Self :=
      match err with
      | ink_engine.AccountError.Decoding e => Pure (AccountError.Decoding e)
      | ink_engine.AccountError.UnexpectedUserAccount =>
        Pure AccountError.UnexpectedUserAccount
      | ink_engine.AccountError.NoAccountForId acc =>
        Pure (AccountError.NoAccountForId acc)
      end.
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : From.Trait Self ink_engine.AccountError := {
      From.from := from;
    }.
  End Impl_From_for_super_AccountError.
  
  Module Impl_From_for_super_Error.
    Definition Self := super.Error.
    
    Definition from (account_error : ink_engine.AccountError) : M Self :=
      let* α0 := account_error.["into"] in
      Pure (Error.OffChain (OffChainError.Account α0)).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : From.Trait Self ink_engine.AccountError := {
      From.from := from;
    }.
  End Impl_From_for_super_Error.
End types.

Module Impl_From_for_super_test_api_EmittedEvent.
  Definition Self := super.test_api.EmittedEvent.
  
  Definition from (evt : ink_engine.test_api.EmittedEvent) : M Self :=
    Pure
      {|
        super.test_api.EmittedEvent.topics := evt.["topics"];
        super.test_api.EmittedEvent.data := evt.["data"];
      |}.
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : From.Trait Self ink_engine.test_api.EmittedEvent := {
    From.from := from;
  }.
End Impl_From_for_super_test_api_EmittedEvent.

Module Impl_From_for_super_Error.
  Definition Self := super.Error.
  
  Definition from (err : ink_engine.Error) : M Self :=
    let* e :=
      match err with
      | ink_engine.Error.Account acc =>
        let* α0 := acc.["into"] in
        Pure (OffChainError.Account α0)
      | ink_engine.Error.UninitializedBlocks =>
        Pure OffChainError.UninitializedBlocks
      | ink_engine.Error.UninitializedExecutionContext =>
        Pure OffChainError.UninitializedExecutionContext
      | ink_engine.Error.UnregisteredChainExtension =>
        Pure OffChainError.UnregisteredChainExtension
      end in
    Pure (Error.OffChain e).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : From.Trait Self ink_engine.Error := {
    From.from := from;
  }.
End Impl_From_for_super_Error.

Module Impl_From_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Definition from (err : ink_engine.AccountError) : M Self :=
    match err with
    | ink_engine.AccountError.Decoding e => Pure (AccountError.Decoding e)
    | ink_engine.AccountError.UnexpectedUserAccount =>
      Pure AccountError.UnexpectedUserAccount
    | ink_engine.AccountError.NoAccountForId acc =>
      Pure (AccountError.NoAccountForId acc)
    end.
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : From.Trait Self ink_engine.AccountError := {
    From.from := from;
  }.
End Impl_From_for_super_AccountError.

Module Impl_From_for_super_Error.
  Definition Self := super.Error.
  
  Definition from (account_error : ink_engine.AccountError) : M Self :=
    let* α0 := account_error.["into"] in
    Pure (Error.OffChain (OffChainError.Account α0)).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : From.Trait Self ink_engine.AccountError := {
    From.from := from;
  }.
End Impl_From_for_super_Error.

Module From := derive_more.From.

Module EnvInstance.
  Record t : Set := {
    engine : ink_engine.ext.Engine;
  }.
  
  Global Instance Get_engine : Notation.Dot "engine" := {
    Notation.dot '(Build_t x0) := x0;
  }.
End EnvInstance.
Definition EnvInstance : Set := EnvInstance.t.

Module Impl_OnInstance_for_super_EnvInstance.
  Definition Self := super.EnvInstance.
  
  Definition on_instance (f : F) : M R :=
    INSTANCE.["with"]
      (fun instance =>
        let* α0 := instance.["borrow_mut"] in
        f (addr_of α0)).
  
  Global Instance AssociatedFunction_on_instance :
    Notation.DoubleColon Self "on_instance" := {
    Notation.double_colon := on_instance;
  }.
  
  Global Instance I : OnInstance.Trait Self := {
    OnInstance.on_instance := on_instance;
  }.
End Impl_OnInstance_for_super_EnvInstance.

Definition
    INSTANCE :
    _crate.thread.LocalKey (core.cell.RefCell super.EnvInstance) :=
  run (_crate.thread.LocalKey::["new"] __getit).

Definition __init (_ : unit) : M (core.cell.RefCell super.EnvInstance) :=
  let* α0 := ink_engine.ext.Engine::["new"] tt in
  core.cell.RefCell::["new"] {| super.EnvInstance.engine := α0; |}.

Definition __getit
    (init
      :
      _crate.option.Option
        (mut_ref (_crate.option.Option (core.cell.RefCell super.EnvInstance))))
    : M (_crate.option.Option (ref (core.cell.RefCell super.EnvInstance))) :=
  __KEY.["get"]
    (fun  =>
      let* _ :=
        let* α0 := let_if _crate.option.Option.Some init := init in
        if (α0 : bool) then
          let* α0 := init.["take"] in
          let* α1 := let_if _crate.option.Option.Some value := α0 in
          if (α1 : bool) then
            let* _ := Return value in
            Pure tt
          else
            if (true : bool) then
              let* _ :=
                let* α0 :=
                  format_arguments::["new_v1"]
                    (addr_of
                      [
                        "internal error: entered unreachable code: missing default value"
                      ])
                    (addr_of [ ]) in
                _crate.panicking.panic_fmt α0 in
              Pure tt
            else
              Pure tt
        else
          Pure tt in
      __init tt).

Definition
    __KEY :
    _crate.thread.local_impl.Key (core.cell.RefCell super.EnvInstance) :=
  run
    ((_crate.thread.local_impl.Key
          (core.cell.RefCell super.EnvInstance))::["new"]
      tt).

Module OffChainError.
  Inductive t : Set :=
  | Account (_ : super.AccountError)
  | UninitializedBlocks
  | UninitializedExecutionContext
  | UnregisteredChainExtension.
End OffChainError.
Definition OffChainError := OffChainError.t.

Module Impl__crate_fmt_Debug_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    match self with
    | OffChainError.Account __self_0 =>
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "Account"
        (addr_of __self_0)
    | OffChainError.UninitializedBlocks =>
      _crate.fmt.Formatter::["write_str"] f "UninitializedBlocks"
    | OffChainError.UninitializedExecutionContext =>
      _crate.fmt.Formatter::["write_str"] f "UninitializedExecutionContext"
    | OffChainError.UnregisteredChainExtension =>
      _crate.fmt.Formatter::["write_str"] f "UnregisteredChainExtension"
    end.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_super_OffChainError.

Module Impl_Root_core_convert_From_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Definition from (original : super.AccountError) : M super.OffChainError :=
    Pure (OffChainError.Account original).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : Root.core.convert.From.Trait Self super.AccountError := {
    Root.core.convert.From.from := from;
  }.
End Impl_Root_core_convert_From_for_super_OffChainError.

Module Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_super_OffChainError.

Module Impl__crate_cmp_PartialEq_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Definition eq (self : ref Self) (other : ref super.OffChainError) : M bool :=
    let* __self_tag := _crate.intrinsics.discriminant_value self in
    let* __arg1_tag := _crate.intrinsics.discriminant_value other in
    let* α0 := __self_tag.["eq"] __arg1_tag in
    let* α1 :=
      match (self, other) with
      | (OffChainError.Account __self_0, OffChainError.Account __arg1_0) =>
        let* α0 := __self_0.["deref"] in
        let* α1 := __arg1_0.["deref"] in
        α0.["eq"] α1
      | _ => Pure true
      end in
    α0.["andb"] α1.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_super_OffChainError.

Module Impl__crate_marker_StructuralEq_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_super_OffChainError.

Module Impl__crate_cmp_Eq_for_super_OffChainError.
  Definition Self := super.OffChainError.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
    let _ := tt in
    Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_super_OffChainError.

Module AccountError.
  Inductive t : Set :=
  | Decoding (_ : scale.Error)
  | UnexpectedUserAccount
  | NoAccountForId (_ : ink_prelude.vec.Vec u8).
End AccountError.
Definition AccountError := AccountError.t.

Module Impl__crate_fmt_Debug_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    match self with
    | AccountError.Decoding __self_0 =>
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "Decoding"
        (addr_of __self_0)
    | AccountError.UnexpectedUserAccount =>
      _crate.fmt.Formatter::["write_str"] f "UnexpectedUserAccount"
    | AccountError.NoAccountForId __self_0 =>
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "NoAccountForId"
        (addr_of __self_0)
    end.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_super_AccountError.

Module Impl_Root_core_convert_From_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Definition from (original : scale.Error) : M super.AccountError :=
    Pure (AccountError.Decoding original).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : Root.core.convert.From.Trait Self scale.Error := {
    Root.core.convert.From.from := from;
  }.
End Impl_Root_core_convert_From_for_super_AccountError.

Module Impl__crate_marker_StructuralPartialEq_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_super_AccountError.

Module Impl__crate_cmp_PartialEq_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Definition eq (self : ref Self) (other : ref super.AccountError) : M bool :=
    let* __self_tag := _crate.intrinsics.discriminant_value self in
    let* __arg1_tag := _crate.intrinsics.discriminant_value other in
    let* α0 := __self_tag.["eq"] __arg1_tag in
    let* α1 :=
      match (self, other) with
      | (AccountError.Decoding __self_0, AccountError.Decoding __arg1_0) =>
        let* α0 := __self_0.["deref"] in
        let* α1 := __arg1_0.["deref"] in
        α0.["eq"] α1
      |
          (AccountError.NoAccountForId __self_0,
            AccountError.NoAccountForId __arg1_0)
          =>
        let* α0 := __self_0.["deref"] in
        let* α1 := __arg1_0.["deref"] in
        α0.["eq"] α1
      | _ => Pure true
      end in
    α0.["andb"] α1.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_super_AccountError.

Module Impl__crate_marker_StructuralEq_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_super_AccountError.

Module Impl__crate_cmp_Eq_for_super_AccountError.
  Definition Self := super.AccountError.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
    let _ := tt in
    let _ := tt in
    Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_super_AccountError.

(* #[allow(dead_code)] - function was ignored by the compiler *)
Definition decode_instantiate_result
    {I E ContractRef R : Set}
    `{scale.Input.Trait I}
    `{crate.Environment.Trait E}
    `{FromAccountId.Trait E ContractRef}
    `{ConstructorReturnType.Trait ContractRef R}
    (instantiate_result : crate.Result unit)
    (out_address : mut_ref I)
    (out_return_value : mut_ref I)
    :
      M
        (crate.Result
          (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
  match instantiate_result with
  | Ok () =>
    let* account_id :=
      let* α0 := scale.Decode.decode out_address in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    let* contract_ref := FromAccountId.from_account_id account_id in
    let* output := ConstructorReturnType.ok contract_ref in
    Pure (Ok (Ok output))
  | Err EnvError.CalleeReverted => decode_instantiate_err out_return_value
  | Err actual_error => Pure (Err actual_error)
  end.

(* #[allow(dead_code)] - function was ignored by the compiler *)
Definition decode_instantiate_err
    {I E ContractRef R : Set}
    `{scale.Input.Trait I}
    `{crate.Environment.Trait E}
    `{FromAccountId.Trait E ContractRef}
    `{ConstructorReturnType.Trait ContractRef R}
    (out_return_value : mut_ref I)
    :
      M
        (crate.Result
          (ink_primitives.ConstructorResult ConstructorReturnType.Output)) :=
  let* constructor_result_variant :=
    let* α0 := out_return_value.["read_byte"] in
    let* α1 := LangItem α0 in
    match α1 with
    | Break {| Break.0 := residual; |} =>
      let* α0 := LangItem residual in
      Return α0
    | Continue {| Continue.0 := val; |} => Pure val
    end in
  match constructor_result_variant with
  | 0 =>
    if (ConstructorReturnType.IS_RESULT : bool) then
      let* result_variant :=
        let* α0 := out_return_value.["read_byte"] in
        let* α1 := LangItem α0 in
        match α1 with
        | Break {| Break.0 := residual; |} =>
          let* α0 := LangItem residual in
          Return α0
        | Continue {| Continue.0 := val; |} => Pure val
        end in
      match result_variant with
      | 0 =>
        let* α0 :=
          format_arguments::["new_const"]
            (addr_of
              [
                "The callee reverted, but did not encode an error in the output buffer."
              ]) in
        _crate.panicking.panic_fmt α0
      | 1 =>
        let* contract_err :=
          let* α0 := scale.Decode.decode out_return_value in
          let* α1 := LangItem α0 in
          match α1 with
          | Break {| Break.0 := residual; |} =>
            let* α0 := LangItem residual in
            Return α0
          | Continue {| Continue.0 := val; |} => Pure val
          end in
        let* err :=
          let* α0 := ConstructorReturnType.err contract_err in
          α0.["unwrap_or_else"]
            (fun  =>
              let* α0 :=
                format_arguments::["new_const"]
                  (addr_of
                    [
                      "Expected an error instance for return type where IS_RESULT == true"
                    ]) in
              _crate.panicking.panic_fmt α0) in
        Pure (Ok (Ok err))
      | _ =>
        let* α0 :=
          "Invalid inner constructor Result encoding, expected 0 or 1 as the first byte".["into"] in
        Pure (Err (Error.Decode α0))
      end
    else
      let* α0 :=
        format_arguments::["new_const"]
          (addr_of
            [
              "The callee reverted, but did not encode an error in the output buffer."
            ]) in
      _crate.panicking.panic_fmt α0
  | 1 =>
    let* lang_err :=
      let* α0 := scale.Decode.decode out_return_value in
      let* α1 := LangItem α0 in
      match α1 with
      | Break {| Break.0 := residual; |} =>
        let* α0 := LangItem residual in
        Return α0
      | Continue {| Continue.0 := val; |} => Pure val
      end in
    Pure (Ok (Err lang_err))
  | _ =>
    let* α0 :=
      "Invalid outer constructor Result encoding, expected 0 or 1 as the first byte".["into"] in
    Pure (Err (Error.Decode α0))
  end.

Module error.
  Module From := derive_more.From.
  
  Module Error.
    Inductive t : Set :=
    | Decode (_ : scale.Error)
    | OffChain (_ : crate.engine.off_chain.OffChainError)
    | CalleeTrapped
    | CalleeReverted
    | KeyNotFound
    | _BelowSubsistenceThreshold
    | TransferFailed
    | _EndowmentTooLow
    | CodeNotFound
    | NotCallable
    | Unknown
    | LoggingDisabled
    | CallRuntimeFailed
    | EcdsaRecoveryFailed.
  End Error.
  Definition Error := Error.t.
  
  Module Impl__crate_fmt_Debug_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      match self with
      | Error.Decode __self_0 =>
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "Decode"
          (addr_of __self_0)
      | Error.OffChain __self_0 =>
        _crate.fmt.Formatter::["debug_tuple_field1_finish"]
          f
          "OffChain"
          (addr_of __self_0)
      | Error.CalleeTrapped =>
        _crate.fmt.Formatter::["write_str"] f "CalleeTrapped"
      | Error.CalleeReverted =>
        _crate.fmt.Formatter::["write_str"] f "CalleeReverted"
      | Error.KeyNotFound => _crate.fmt.Formatter::["write_str"] f "KeyNotFound"
      | Error._BelowSubsistenceThreshold =>
        _crate.fmt.Formatter::["write_str"] f "_BelowSubsistenceThreshold"
      | Error.TransferFailed =>
        _crate.fmt.Formatter::["write_str"] f "TransferFailed"
      | Error._EndowmentTooLow =>
        _crate.fmt.Formatter::["write_str"] f "_EndowmentTooLow"
      | Error.CodeNotFound =>
        _crate.fmt.Formatter::["write_str"] f "CodeNotFound"
      | Error.NotCallable => _crate.fmt.Formatter::["write_str"] f "NotCallable"
      | Error.Unknown => _crate.fmt.Formatter::["write_str"] f "Unknown"
      | Error.LoggingDisabled =>
        _crate.fmt.Formatter::["write_str"] f "LoggingDisabled"
      | Error.CallRuntimeFailed =>
        _crate.fmt.Formatter::["write_str"] f "CallRuntimeFailed"
      | Error.EcdsaRecoveryFailed =>
        _crate.fmt.Formatter::["write_str"] f "EcdsaRecoveryFailed"
      end.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_Error.
  
  Module Impl_Root_core_convert_From_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition from (original : scale.Error) : M crate.Error :=
      Pure (Error.Decode original).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I : Root.core.convert.From.Trait Self scale.Error := {
      Root.core.convert.From.from := from;
    }.
  End Impl_Root_core_convert_From_for_crate_Error.
  
  Module Impl_Root_core_convert_From_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition from
        (original : crate.engine.off_chain.OffChainError)
        : M crate.Error :=
      Pure (Error.OffChain original).
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I
        :
        Root.core.convert.From.Trait
        Self
        crate.engine.off_chain.OffChainError :=
      {
      Root.core.convert.From.from := from;
    }.
  End Impl_Root_core_convert_From_for_crate_Error.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_Error.
    Definition Self := crate.Error.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_Error.
  
  Module Impl__crate_cmp_PartialEq_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition eq (self : ref Self) (other : ref crate.Error) : M bool :=
      let* __self_tag := _crate.intrinsics.discriminant_value self in
      let* __arg1_tag := _crate.intrinsics.discriminant_value other in
      let* α0 := __self_tag.["eq"] __arg1_tag in
      let* α1 :=
        match (self, other) with
        | (Error.Decode __self_0, Error.Decode __arg1_0) =>
          let* α0 := __self_0.["deref"] in
          let* α1 := __arg1_0.["deref"] in
          α0.["eq"] α1
        | (Error.OffChain __self_0, Error.OffChain __arg1_0) =>
          let* α0 := __self_0.["deref"] in
          let* α1 := __arg1_0.["deref"] in
          α0.["eq"] α1
        | _ => Pure true
        end in
      α0.["andb"] α1.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_Error.
  
  Module Impl__crate_marker_StructuralEq_for_crate_Error.
    Definition Self := crate.Error.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_Error.
  
  Module Impl__crate_cmp_Eq_for_crate_Error.
    Definition Self := crate.Error.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      let _ := tt in
      let _ := tt in
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_Error.
  
  Definition Result : Set := core.result.Result T crate.Error.
End error.

Module From := derive_more.From.

Module Error.
  Inductive t : Set :=
  | Decode (_ : scale.Error)
  | OffChain (_ : crate.engine.off_chain.OffChainError)
  | CalleeTrapped
  | CalleeReverted
  | KeyNotFound
  | _BelowSubsistenceThreshold
  | TransferFailed
  | _EndowmentTooLow
  | CodeNotFound
  | NotCallable
  | Unknown
  | LoggingDisabled
  | CallRuntimeFailed
  | EcdsaRecoveryFailed.
End Error.
Definition Error := Error.t.

Module Impl__crate_fmt_Debug_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    match self with
    | Error.Decode __self_0 =>
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "Decode"
        (addr_of __self_0)
    | Error.OffChain __self_0 =>
      _crate.fmt.Formatter::["debug_tuple_field1_finish"]
        f
        "OffChain"
        (addr_of __self_0)
    | Error.CalleeTrapped =>
      _crate.fmt.Formatter::["write_str"] f "CalleeTrapped"
    | Error.CalleeReverted =>
      _crate.fmt.Formatter::["write_str"] f "CalleeReverted"
    | Error.KeyNotFound => _crate.fmt.Formatter::["write_str"] f "KeyNotFound"
    | Error._BelowSubsistenceThreshold =>
      _crate.fmt.Formatter::["write_str"] f "_BelowSubsistenceThreshold"
    | Error.TransferFailed =>
      _crate.fmt.Formatter::["write_str"] f "TransferFailed"
    | Error._EndowmentTooLow =>
      _crate.fmt.Formatter::["write_str"] f "_EndowmentTooLow"
    | Error.CodeNotFound => _crate.fmt.Formatter::["write_str"] f "CodeNotFound"
    | Error.NotCallable => _crate.fmt.Formatter::["write_str"] f "NotCallable"
    | Error.Unknown => _crate.fmt.Formatter::["write_str"] f "Unknown"
    | Error.LoggingDisabled =>
      _crate.fmt.Formatter::["write_str"] f "LoggingDisabled"
    | Error.CallRuntimeFailed =>
      _crate.fmt.Formatter::["write_str"] f "CallRuntimeFailed"
    | Error.EcdsaRecoveryFailed =>
      _crate.fmt.Formatter::["write_str"] f "EcdsaRecoveryFailed"
    end.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_Error.

Module Impl_Root_core_convert_From_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition from (original : scale.Error) : M crate.Error :=
    Pure (Error.Decode original).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I : Root.core.convert.From.Trait Self scale.Error := {
    Root.core.convert.From.from := from;
  }.
End Impl_Root_core_convert_From_for_crate_Error.

Module Impl_Root_core_convert_From_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition from
      (original : crate.engine.off_chain.OffChainError)
      : M crate.Error :=
    Pure (Error.OffChain original).
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I
      :
      Root.core.convert.From.Trait
      Self
      crate.engine.off_chain.OffChainError :=
    {
    Root.core.convert.From.from := from;
  }.
End Impl_Root_core_convert_From_for_crate_Error.

Module Impl__crate_marker_StructuralPartialEq_for_crate_Error.
  Definition Self := crate.Error.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_Error.

Module Impl__crate_cmp_PartialEq_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition eq (self : ref Self) (other : ref crate.Error) : M bool :=
    let* __self_tag := _crate.intrinsics.discriminant_value self in
    let* __arg1_tag := _crate.intrinsics.discriminant_value other in
    let* α0 := __self_tag.["eq"] __arg1_tag in
    let* α1 :=
      match (self, other) with
      | (Error.Decode __self_0, Error.Decode __arg1_0) =>
        let* α0 := __self_0.["deref"] in
        let* α1 := __arg1_0.["deref"] in
        α0.["eq"] α1
      | (Error.OffChain __self_0, Error.OffChain __arg1_0) =>
        let* α0 := __self_0.["deref"] in
        let* α1 := __arg1_0.["deref"] in
        α0.["eq"] α1
      | _ => Pure true
      end in
    α0.["andb"] α1.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_Error.

Module Impl__crate_marker_StructuralEq_for_crate_Error.
  Definition Self := crate.Error.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_Error.

Module Impl__crate_cmp_Eq_for_crate_Error.
  Definition Self := crate.Error.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
    let _ := tt in
    let _ := tt in
    Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_Error.

Definition Result : Set := core.result.Result T crate.Error.

Module hash.
  Module HashOutput.
    Class Trait (Self : Set) : Set := {
      Type : Set;
    }.
    
    Global Instance Method_Type `(Trait) : Notation.Dot "Type" := {
      Notation.dot := Type;
    }.
  End HashOutput.
  
  Module CryptoHash.
    Class Trait (Self : Set) : Set := {
      hash : (ref Slice) -> (mut_ref HashOutput.Type) -> (M unit);
    }.
    
    Global Instance Method_hash `(Trait) : Notation.Dot "hash" := {
      Notation.dot := hash;
    }.
  End CryptoHash.
  
  Module Sha2x256.
    Inductive t : Set :=
    .
  End Sha2x256.
  Definition Sha2x256 := Sha2x256.t.
  
  Module Impl__crate_fmt_Debug_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_hash_Sha2x256.
  
  Module Impl__crate_marker_Copy_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_hash_Sha2x256.
  
  Module Impl__crate_clone_Clone_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition clone (self : ref Self) : M crate.hash.Sha2x256 :=
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_hash_Sha2x256.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Sha2x256.
  
  Module Impl__crate_cmp_PartialEq_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition eq
        (self : ref Self)
        (other : ref crate.hash.Sha2x256)
        : M bool :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_hash_Sha2x256.
  
  Module Impl__crate_marker_StructuralEq_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_hash_Sha2x256.
  
  Module Impl__crate_cmp_Eq_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_hash_Sha2x256.
  
  Module Keccak256.
    Inductive t : Set :=
    .
  End Keccak256.
  Definition Keccak256 := Keccak256.t.
  
  Module Impl__crate_fmt_Debug_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_hash_Keccak256.
  
  Module Impl__crate_marker_Copy_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_hash_Keccak256.
  
  Module Impl__crate_clone_Clone_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition clone (self : ref Self) : M crate.hash.Keccak256 :=
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_hash_Keccak256.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Keccak256.
  
  Module Impl__crate_cmp_PartialEq_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition eq
        (self : ref Self)
        (other : ref crate.hash.Keccak256)
        : M bool :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_hash_Keccak256.
  
  Module Impl__crate_marker_StructuralEq_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_hash_Keccak256.
  
  Module Impl__crate_cmp_Eq_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_hash_Keccak256.
  
  Module Blake2x256.
    Inductive t : Set :=
    .
  End Blake2x256.
  Definition Blake2x256 := Blake2x256.t.
  
  Module Impl__crate_fmt_Debug_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_hash_Blake2x256.
  
  Module Impl__crate_marker_Copy_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_hash_Blake2x256.
  
  Module Impl__crate_clone_Clone_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition clone (self : ref Self) : M crate.hash.Blake2x256 :=
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_hash_Blake2x256.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x256.
  
  Module Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition eq
        (self : ref Self)
        (other : ref crate.hash.Blake2x256)
        : M bool :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x256.
  
  Module Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x256.
  
  Module Impl__crate_cmp_Eq_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_hash_Blake2x256.
  
  Module Blake2x128.
    Inductive t : Set :=
    .
  End Blake2x128.
  Definition Blake2x128 := Blake2x128.t.
  
  Module Impl__crate_fmt_Debug_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_crate_hash_Blake2x128.
  
  Module Impl__crate_marker_Copy_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Global Instance I : _crate.marker.Copy.Trait Self :=
      _crate.marker.Copy.Build_Class _.
  End Impl__crate_marker_Copy_for_crate_hash_Blake2x128.
  
  Module Impl__crate_clone_Clone_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition clone (self : ref Self) : M crate.hash.Blake2x128 :=
      self.["deref"].
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_crate_hash_Blake2x128.
  
  Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x128.
  
  Module Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition eq
        (self : ref Self)
        (other : ref crate.hash.Blake2x128)
        : M bool :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x128.
  
  Module Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x128.
  
  Module Impl__crate_cmp_Eq_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_crate_hash_Blake2x128.
  
  Module private.
    Module Sealed.
      Unset Primitive Projections.
      Class Trait (Self : Set) : Set := {
      }.
      Global Set Primitive Projections.
    End Sealed.
  End private.
  
  Module Impl_private_Sealed_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Global Instance I : private.Sealed.Trait Self :=
      private.Sealed.Build_Class _.
  End Impl_private_Sealed_for_crate_hash_Sha2x256.
  
  Module Impl_private_Sealed_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Global Instance I : private.Sealed.Trait Self :=
      private.Sealed.Build_Class _.
  End Impl_private_Sealed_for_crate_hash_Keccak256.
  
  Module Impl_private_Sealed_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Global Instance I : private.Sealed.Trait Self :=
      private.Sealed.Build_Class _.
  End Impl_private_Sealed_for_crate_hash_Blake2x256.
  
  Module Impl_private_Sealed_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Global Instance I : private.Sealed.Trait Self :=
      private.Sealed.Build_Class _.
  End Impl_private_Sealed_for_crate_hash_Blake2x128.
  
  Module Impl_HashOutput_for_crate_hash_Sha2x256.
    Definition Self := crate.hash.Sha2x256.
    
    Definition Type : Set := list u8.
    
    Global Instance I : HashOutput.Trait Self := {
    }.
  End Impl_HashOutput_for_crate_hash_Sha2x256.
  
  Module Impl_HashOutput_for_crate_hash_Keccak256.
    Definition Self := crate.hash.Keccak256.
    
    Definition Type : Set := list u8.
    
    Global Instance I : HashOutput.Trait Self := {
    }.
  End Impl_HashOutput_for_crate_hash_Keccak256.
  
  Module Impl_HashOutput_for_crate_hash_Blake2x256.
    Definition Self := crate.hash.Blake2x256.
    
    Definition Type : Set := list u8.
    
    Global Instance I : HashOutput.Trait Self := {
    }.
  End Impl_HashOutput_for_crate_hash_Blake2x256.
  
  Module Impl_HashOutput_for_crate_hash_Blake2x128.
    Definition Self := crate.hash.Blake2x128.
    
    Definition Type : Set := list u8.
    
    Global Instance I : HashOutput.Trait Self := {
    }.
  End Impl_HashOutput_for_crate_hash_Blake2x128.
End hash.

Module HashOutput.
  Class Trait (Self : Set) : Set := {
    Type : Set;
  }.
  
  Global Instance Method_Type `(Trait) : Notation.Dot "Type" := {
    Notation.dot := Type;
  }.
End HashOutput.

Module CryptoHash.
  Class Trait (Self : Set) : Set := {
    hash : (ref Slice) -> (mut_ref HashOutput.Type) -> (M unit);
  }.
  
  Global Instance Method_hash `(Trait) : Notation.Dot "hash" := {
    Notation.dot := hash;
  }.
End CryptoHash.

Module Sha2x256.
  Inductive t : Set :=
  .
End Sha2x256.
Definition Sha2x256 := Sha2x256.t.

Module Impl__crate_fmt_Debug_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_hash_Sha2x256.

Module Impl__crate_marker_Copy_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_hash_Sha2x256.

Module Impl__crate_clone_Clone_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition clone (self : ref Self) : M crate.hash.Sha2x256 := self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_hash_Sha2x256.

Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Sha2x256.

Module Impl__crate_cmp_PartialEq_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition eq (self : ref Self) (other : ref crate.hash.Sha2x256) : M bool :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_hash_Sha2x256.

Module Impl__crate_marker_StructuralEq_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_hash_Sha2x256.

Module Impl__crate_cmp_Eq_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit := Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_hash_Sha2x256.

Module Keccak256.
  Inductive t : Set :=
  .
End Keccak256.
Definition Keccak256 := Keccak256.t.

Module Impl__crate_fmt_Debug_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_hash_Keccak256.

Module Impl__crate_marker_Copy_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_hash_Keccak256.

Module Impl__crate_clone_Clone_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition clone (self : ref Self) : M crate.hash.Keccak256 := self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_hash_Keccak256.

Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Keccak256.

Module Impl__crate_cmp_PartialEq_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition eq (self : ref Self) (other : ref crate.hash.Keccak256) : M bool :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_hash_Keccak256.

Module Impl__crate_marker_StructuralEq_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_hash_Keccak256.

Module Impl__crate_cmp_Eq_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit := Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_hash_Keccak256.

Module Blake2x256.
  Inductive t : Set :=
  .
End Blake2x256.
Definition Blake2x256 := Blake2x256.t.

Module Impl__crate_fmt_Debug_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_hash_Blake2x256.

Module Impl__crate_marker_Copy_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_hash_Blake2x256.

Module Impl__crate_clone_Clone_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition clone (self : ref Self) : M crate.hash.Blake2x256 :=
    self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_hash_Blake2x256.

Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x256.

Module Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition eq
      (self : ref Self)
      (other : ref crate.hash.Blake2x256)
      : M bool :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x256.

Module Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x256.

Module Impl__crate_cmp_Eq_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit := Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_hash_Blake2x256.

Module Blake2x128.
  Inductive t : Set :=
  .
End Blake2x128.
Definition Blake2x128 := Blake2x128.t.

Module Impl__crate_fmt_Debug_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_crate_hash_Blake2x128.

Module Impl__crate_marker_Copy_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Global Instance I : _crate.marker.Copy.Trait Self :=
    _crate.marker.Copy.Build_Class _.
End Impl__crate_marker_Copy_for_crate_hash_Blake2x128.

Module Impl__crate_clone_Clone_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition clone (self : ref Self) : M crate.hash.Blake2x128 :=
    self.["deref"].
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_crate_hash_Blake2x128.

Module Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_crate_hash_Blake2x128.

Module Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition eq
      (self : ref Self)
      (other : ref crate.hash.Blake2x128)
      : M bool :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_crate_hash_Blake2x128.

Module Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_crate_hash_Blake2x128.

Module Impl__crate_cmp_Eq_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit := Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_crate_hash_Blake2x128.

Module private.
  Module Sealed.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End Sealed.
End private.

Module Sealed.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End Sealed.

Module Impl_private_Sealed_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Global Instance I : private.Sealed.Trait Self := private.Sealed.Build_Class _.
End Impl_private_Sealed_for_crate_hash_Sha2x256.

Module Impl_private_Sealed_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Global Instance I : private.Sealed.Trait Self := private.Sealed.Build_Class _.
End Impl_private_Sealed_for_crate_hash_Keccak256.

Module Impl_private_Sealed_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Global Instance I : private.Sealed.Trait Self := private.Sealed.Build_Class _.
End Impl_private_Sealed_for_crate_hash_Blake2x256.

Module Impl_private_Sealed_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Global Instance I : private.Sealed.Trait Self := private.Sealed.Build_Class _.
End Impl_private_Sealed_for_crate_hash_Blake2x128.

Module Impl_HashOutput_for_crate_hash_Sha2x256.
  Definition Self := crate.hash.Sha2x256.
  
  Definition Type : Set := list u8.
  
  Global Instance I : HashOutput.Trait Self := {
  }.
End Impl_HashOutput_for_crate_hash_Sha2x256.

Module Impl_HashOutput_for_crate_hash_Keccak256.
  Definition Self := crate.hash.Keccak256.
  
  Definition Type : Set := list u8.
  
  Global Instance I : HashOutput.Trait Self := {
  }.
End Impl_HashOutput_for_crate_hash_Keccak256.

Module Impl_HashOutput_for_crate_hash_Blake2x256.
  Definition Self := crate.hash.Blake2x256.
  
  Definition Type : Set := list u8.
  
  Global Instance I : HashOutput.Trait Self := {
  }.
End Impl_HashOutput_for_crate_hash_Blake2x256.

Module Impl_HashOutput_for_crate_hash_Blake2x128.
  Definition Self := crate.hash.Blake2x128.
  
  Definition Type : Set := list u8.
  
  Global Instance I : HashOutput.Trait Self := {
  }.
End Impl_HashOutput_for_crate_hash_Blake2x128.

Module topics.
  Module TopicsBuilderBackend.
    Class Trait (E Self : Set) : Set := {
      Output : Set;
      expect : (mut_ref Self) -> usize -> (M unit);
      push_topic : (mut_ref Self) -> (ref T) -> (M unit);
      output : Self -> (M ImplSelf.Output);
    }.
    
    Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
      Notation.dot := Output;
    }.
    Global Instance Method_expect `(Trait) : Notation.Dot "expect" := {
      Notation.dot := expect;
    }.
    Global Instance Method_push_topic `(Trait) : Notation.Dot "push_topic" := {
      Notation.dot := push_topic;
    }.
    Global Instance Method_output `(Trait) : Notation.Dot "output" := {
      Notation.dot := output;
    }.
  End TopicsBuilderBackend.
  
  Module TopicsBuilder.
    Record t : Set := {
      backend : B;
      state : core.marker.PhantomData ( -> (S * E));
    }.
    
    Global Instance Get_backend : Notation.Dot "backend" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_state : Notation.Dot "state" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End TopicsBuilder.
  Definition TopicsBuilder : Set := TopicsBuilder.t.
  
  Module Impl_From_for_TopicsBuilder_state_Uninit_E_B.
    Definition Self := TopicsBuilder state.Uninit E B.
    
    Definition from (backend : B) : M Self :=
      let* α0 := Default.default tt in
      Pure {| Self.backend := backend; Self.state := α0; |}.
    
    Global Instance AssociatedFunction_from :
      Notation.DoubleColon Self "from" := {
      Notation.double_colon := from;
    }.
    
    Global Instance I E B : From.Trait Self B := {
      From.from := from;
    }.
  End Impl_From_for_TopicsBuilder_state_Uninit_E_B.
  
  Module state.
    Module Uninit.
      Inductive t : Set :=
      .
    End Uninit.
    Definition Uninit := Uninit.t.
    
    Module HasRemainingTopics.
      Inductive t : Set :=
      .
    End HasRemainingTopics.
    Definition HasRemainingTopics := HasRemainingTopics.t.
    
    Module NoRemainingTopics.
      Inductive t : Set :=
      .
    End NoRemainingTopics.
    Definition NoRemainingTopics := NoRemainingTopics.t.
  End state.
  
  Module ImplTopicsBuilder state.Uninit E B.
    Definition Self := TopicsBuilder state.Uninit E B.
    
    Definition build
        (self : Self)
        : M (TopicsBuilder Topics.RemainingTopics E B) :=
      let* _ := self.["backend"].["expect"] EventTopicsAmount.AMOUNT in
      let* α0 := Default.default tt in
      Pure
        {| TopicsBuilder.backend := self.["backend"]; TopicsBuilder.state := α0;
        |}.
    
    Global Instance Method_build : Notation.Dot "build" := {
      Notation.dot := build;
    }.
  End ImplTopicsBuilder state.Uninit E B.
  
  Module ImplTopicsBuilder S E B.
    Definition Self := TopicsBuilder S E B.
    
    Definition push_topic
        (self : Self)
        (value : ref T)
        : M (TopicsBuilder SomeRemainingTopics.Next E B) :=
      let* _ := self.["backend"].["push_topic"] value in
      let* α0 := Default.default tt in
      Pure
        {| TopicsBuilder.backend := self.["backend"]; TopicsBuilder.state := α0;
        |}.
    
    Global Instance Method_push_topic : Notation.Dot "push_topic" := {
      Notation.dot := push_topic;
    }.
  End ImplTopicsBuilder S E B.
  
  Module ImplTopicsBuilder state.NoRemainingTopics E B.
    Definition Self := TopicsBuilder state.NoRemainingTopics E B.
    
    Definition finish (self : Self) : M TopicsBuilderBackend.Output :=
      self.["backend"].["output"].
    
    Global Instance Method_finish : Notation.Dot "finish" := {
      Notation.dot := finish;
    }.
  End ImplTopicsBuilder state.NoRemainingTopics E B.
  
  Module SomeRemainingTopics.
    Class Trait (Self : Set) : Set := {
      Next : Set;
    }.
    
    Global Instance Method_Next `(Trait) : Notation.Dot "Next" := {
      Notation.dot := Next;
    }.
  End SomeRemainingTopics.
  
  Module EventTopicsAmount.
    Class Trait (Self : Set) : Set := {
      AMOUNT : usize;
    }.
    
    Global Instance Method_AMOUNT `(Trait) : Notation.Dot "AMOUNT" := {
      Notation.dot := AMOUNT;
    }.
  End EventTopicsAmount.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 2.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 3.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 4.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 5.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 6.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 7.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 8.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 9.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 10.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 11.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 12.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 13.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 14.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 15.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 16.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 17.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 18.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 19.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 20.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 21.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 22.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 23.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 24.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 25.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 26.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 27.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 28.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 29.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 30.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 31.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := list state.HasRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 32.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition Next : Set := state.NoRemainingTopics.
    
    Global Instance I : SomeRemainingTopics.Trait Self := {
    }.
  End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
    Definition Self := list state.HasRemainingTopics.
    
    Definition AMOUNT := Pure 1.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  
  Module Impl_EventTopicsAmount_for_state_NoRemainingTopics.
    Definition Self := state.NoRemainingTopics.
    
    Definition AMOUNT := Pure 0.
    
    Global Instance AssociatedFunction_AMOUNT :
      Notation.DoubleColon Self "AMOUNT" := {
      Notation.double_colon := AMOUNT;
    }.
    
    Global Instance I : EventTopicsAmount.Trait Self := {
      EventTopicsAmount.AMOUNT := AMOUNT;
    }.
  End Impl_EventTopicsAmount_for_state_NoRemainingTopics.
  
  Module Topics.
    Class Trait (Self : Set) : Set := {
      RemainingTopics : Set;
      topics
        :
        (ref Self) ->
        (TopicsBuilder state.Uninit E B) ->
        (M TopicsBuilderBackend.Output);
    }.
    
    Global Instance Method_RemainingTopics `(Trait)
      : Notation.Dot "RemainingTopics" := {
      Notation.dot := RemainingTopics;
    }.
    Global Instance Method_topics `(Trait) : Notation.Dot "topics" := {
      Notation.dot := topics;
    }.
  End Topics.
  
  Module PrefixedValue.
    Record t : Set := {
      prefix : ref Slice;
      value : ref T;
    }.
    
    Global Instance Get_prefix : Notation.Dot "prefix" := {
      Notation.dot '(Build_t x0 _) := x0;
    }.
    Global Instance Get_value : Notation.Dot "value" := {
      Notation.dot '(Build_t _ x1) := x1;
    }.
  End PrefixedValue.
  Definition PrefixedValue : Set := PrefixedValue.t.
  
  Module Impl_scale_Encode_for_PrefixedValue_X.
    Definition Self := PrefixedValue X.
    
    Definition size_hint (self : ref Self) : M usize :=
      let* α0 := self.["prefix"].["size_hint"] in
      let* α1 := self.["value"].["size_hint"] in
      α0.["add"] α1.
    
    Global Instance Method_size_hint : Notation.Dot "size_hint" := {
      Notation.dot := size_hint;
    }.
    
    Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
      let* _ := self.["prefix"].["encode_to"] dest in
      let* _ := self.["value"].["encode_to"] dest in
      Pure tt.
    
    Global Instance Method_encode_to : Notation.Dot "encode_to" := {
      Notation.dot := encode_to;
    }.
    
    Global Instance I X : scale.Encode.Trait Self := {
    }.
  End Impl_scale_Encode_for_PrefixedValue_X.
End topics.

Module TopicsBuilderBackend.
  Class Trait (E Self : Set) : Set := {
    Output : Set;
    expect : (mut_ref Self) -> usize -> (M unit);
    push_topic : (mut_ref Self) -> (ref T) -> (M unit);
    output : Self -> (M ImplSelf.Output);
  }.
  
  Global Instance Method_Output `(Trait) : Notation.Dot "Output" := {
    Notation.dot := Output;
  }.
  Global Instance Method_expect `(Trait) : Notation.Dot "expect" := {
    Notation.dot := expect;
  }.
  Global Instance Method_push_topic `(Trait) : Notation.Dot "push_topic" := {
    Notation.dot := push_topic;
  }.
  Global Instance Method_output `(Trait) : Notation.Dot "output" := {
    Notation.dot := output;
  }.
End TopicsBuilderBackend.

Module TopicsBuilder.
  Record t : Set := {
    backend : B;
    state : core.marker.PhantomData ( -> (S * E));
  }.
  
  Global Instance Get_backend : Notation.Dot "backend" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_state : Notation.Dot "state" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End TopicsBuilder.
Definition TopicsBuilder : Set := TopicsBuilder.t.

Module Impl_From_for_TopicsBuilder_state_Uninit_E_B.
  Definition Self := TopicsBuilder state.Uninit E B.
  
  Definition from (backend : B) : M Self :=
    let* α0 := Default.default tt in
    Pure {| Self.backend := backend; Self.state := α0; |}.
  
  Global Instance AssociatedFunction_from :
    Notation.DoubleColon Self "from" := {
    Notation.double_colon := from;
  }.
  
  Global Instance I E B : From.Trait Self B := {
    From.from := from;
  }.
End Impl_From_for_TopicsBuilder_state_Uninit_E_B.

Module state.
  Module Uninit.
    Inductive t : Set :=
    .
  End Uninit.
  Definition Uninit := Uninit.t.
  
  Module HasRemainingTopics.
    Inductive t : Set :=
    .
  End HasRemainingTopics.
  Definition HasRemainingTopics := HasRemainingTopics.t.
  
  Module NoRemainingTopics.
    Inductive t : Set :=
    .
  End NoRemainingTopics.
  Definition NoRemainingTopics := NoRemainingTopics.t.
End state.

Module Uninit.
  Inductive t : Set :=
  .
End Uninit.
Definition Uninit := Uninit.t.

Module HasRemainingTopics.
  Inductive t : Set :=
  .
End HasRemainingTopics.
Definition HasRemainingTopics := HasRemainingTopics.t.

Module NoRemainingTopics.
  Inductive t : Set :=
  .
End NoRemainingTopics.
Definition NoRemainingTopics := NoRemainingTopics.t.

Module ImplTopicsBuilder state.Uninit E B_2.
  Definition Self := TopicsBuilder state.Uninit E B.
  
  Definition build
      (self : Self)
      : M (TopicsBuilder Topics.RemainingTopics E B) :=
    let* _ := self.["backend"].["expect"] EventTopicsAmount.AMOUNT in
    let* α0 := Default.default tt in
    Pure
      {| TopicsBuilder.backend := self.["backend"]; TopicsBuilder.state := α0;
      |}.
  
  Global Instance Method_build : Notation.Dot "build" := {
    Notation.dot := build;
  }.
End ImplTopicsBuilder state.Uninit E B_2.

Module ImplTopicsBuilder S E B_2.
  Definition Self := TopicsBuilder S E B.
  
  Definition push_topic
      (self : Self)
      (value : ref T)
      : M (TopicsBuilder SomeRemainingTopics.Next E B) :=
    let* _ := self.["backend"].["push_topic"] value in
    let* α0 := Default.default tt in
    Pure
      {| TopicsBuilder.backend := self.["backend"]; TopicsBuilder.state := α0;
      |}.
  
  Global Instance Method_push_topic : Notation.Dot "push_topic" := {
    Notation.dot := push_topic;
  }.
End ImplTopicsBuilder S E B_2.

Module ImplTopicsBuilder state.NoRemainingTopics E B_2.
  Definition Self := TopicsBuilder state.NoRemainingTopics E B.
  
  Definition finish (self : Self) : M TopicsBuilderBackend.Output :=
    self.["backend"].["output"].
  
  Global Instance Method_finish : Notation.Dot "finish" := {
    Notation.dot := finish;
  }.
End ImplTopicsBuilder state.NoRemainingTopics E B_2.

Module SomeRemainingTopics.
  Class Trait (Self : Set) : Set := {
    Next : Set;
  }.
  
  Global Instance Method_Next `(Trait) : Notation.Dot "Next" := {
    Notation.dot := Next;
  }.
End SomeRemainingTopics.

Module EventTopicsAmount.
  Class Trait (Self : Set) : Set := {
    AMOUNT : usize;
  }.
  
  Global Instance Method_AMOUNT `(Trait) : Notation.Dot "AMOUNT" := {
    Notation.dot := AMOUNT;
  }.
End EventTopicsAmount.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 2.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 3.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 4.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 5.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 6.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 7.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 8.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 9.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 10.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 11.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 12.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 13.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 14.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 15.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 16.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 17.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 18.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 19.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 20.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 21.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 22.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 23.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 24.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 25.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 26.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 27.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 28.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 29.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 30.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 31.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := list state.HasRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 32.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition Next : Set := state.NoRemainingTopics.
  
  Global Instance I : SomeRemainingTopics.Trait Self := {
  }.
End Impl_SomeRemainingTopics_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.
  Definition Self := list state.HasRemainingTopics.
  
  Definition AMOUNT := Pure 1.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_Array_state_HasRemainingTopics.

Module Impl_EventTopicsAmount_for_state_NoRemainingTopics.
  Definition Self := state.NoRemainingTopics.
  
  Definition AMOUNT := Pure 0.
  
  Global Instance AssociatedFunction_AMOUNT :
    Notation.DoubleColon Self "AMOUNT" := {
    Notation.double_colon := AMOUNT;
  }.
  
  Global Instance I : EventTopicsAmount.Trait Self := {
    EventTopicsAmount.AMOUNT := AMOUNT;
  }.
End Impl_EventTopicsAmount_for_state_NoRemainingTopics.

Module Topics.
  Class Trait (Self : Set) : Set := {
    RemainingTopics : Set;
    topics
      :
      (ref Self) ->
      (TopicsBuilder state.Uninit E B) ->
      (M TopicsBuilderBackend.Output);
  }.
  
  Global Instance Method_RemainingTopics `(Trait)
    : Notation.Dot "RemainingTopics" := {
    Notation.dot := RemainingTopics;
  }.
  Global Instance Method_topics `(Trait) : Notation.Dot "topics" := {
    Notation.dot := topics;
  }.
End Topics.

Module PrefixedValue.
  Record t : Set := {
    prefix : ref Slice;
    value : ref T;
  }.
  
  Global Instance Get_prefix : Notation.Dot "prefix" := {
    Notation.dot '(Build_t x0 _) := x0;
  }.
  Global Instance Get_value : Notation.Dot "value" := {
    Notation.dot '(Build_t _ x1) := x1;
  }.
End PrefixedValue.
Definition PrefixedValue : Set := PrefixedValue.t.

Module Impl_scale_Encode_for_PrefixedValue_X.
  Definition Self := PrefixedValue X.
  
  Definition size_hint (self : ref Self) : M usize :=
    let* α0 := self.["prefix"].["size_hint"] in
    let* α1 := self.["value"].["size_hint"] in
    α0.["add"] α1.
  
  Global Instance Method_size_hint : Notation.Dot "size_hint" := {
    Notation.dot := size_hint;
  }.
  
  Definition encode_to (self : ref Self) (dest : mut_ref T) : M unit :=
    let* _ := self.["prefix"].["encode_to"] dest in
    let* _ := self.["value"].["encode_to"] dest in
    Pure tt.
  
  Global Instance Method_encode_to : Notation.Dot "encode_to" := {
    Notation.dot := encode_to;
  }.
  
  Global Instance I X : scale.Encode.Trait Self := {
  }.
End Impl_scale_Encode_for_PrefixedValue_X.

Module types.
  Module FromLittleEndian.
    Class Trait (Self : Set) : Set := {
      Bytes : Set;
      from_le_bytes : ImplSelf.Bytes -> (M Self);
    }.
    
    Global Instance Method_Bytes `(Trait) : Notation.Dot "Bytes" := {
      Notation.dot := Bytes;
    }.
    Global Instance Method_from_le_bytes `(Trait)
      : Notation.Dot "from_le_bytes" := {
      Notation.dot := from_le_bytes;
    }.
  End FromLittleEndian.
  
  Module Impl_FromLittleEndian_for_u8.
    Definition Self := u8.
    
    Definition Bytes : Set := list u8.
    
    Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
      u8::["from_le_bytes"] bytes.
    
    Global Instance AssociatedFunction_from_le_bytes :
      Notation.DoubleColon Self "from_le_bytes" := {
      Notation.double_colon := from_le_bytes;
    }.
    
    Global Instance I : FromLittleEndian.Trait Self := {
      FromLittleEndian.from_le_bytes := from_le_bytes;
    }.
  End Impl_FromLittleEndian_for_u8.
  
  Module Impl_FromLittleEndian_for_u16.
    Definition Self := u16.
    
    Definition Bytes : Set := list u8.
    
    Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
      u16::["from_le_bytes"] bytes.
    
    Global Instance AssociatedFunction_from_le_bytes :
      Notation.DoubleColon Self "from_le_bytes" := {
      Notation.double_colon := from_le_bytes;
    }.
    
    Global Instance I : FromLittleEndian.Trait Self := {
      FromLittleEndian.from_le_bytes := from_le_bytes;
    }.
  End Impl_FromLittleEndian_for_u16.
  
  Module Impl_FromLittleEndian_for_u32.
    Definition Self := u32.
    
    Definition Bytes : Set := list u8.
    
    Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
      u32::["from_le_bytes"] bytes.
    
    Global Instance AssociatedFunction_from_le_bytes :
      Notation.DoubleColon Self "from_le_bytes" := {
      Notation.double_colon := from_le_bytes;
    }.
    
    Global Instance I : FromLittleEndian.Trait Self := {
      FromLittleEndian.from_le_bytes := from_le_bytes;
    }.
  End Impl_FromLittleEndian_for_u32.
  
  Module Impl_FromLittleEndian_for_u64.
    Definition Self := u64.
    
    Definition Bytes : Set := list u8.
    
    Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
      u64::["from_le_bytes"] bytes.
    
    Global Instance AssociatedFunction_from_le_bytes :
      Notation.DoubleColon Self "from_le_bytes" := {
      Notation.double_colon := from_le_bytes;
    }.
    
    Global Instance I : FromLittleEndian.Trait Self := {
      FromLittleEndian.from_le_bytes := from_le_bytes;
    }.
  End Impl_FromLittleEndian_for_u64.
  
  Module Impl_FromLittleEndian_for_u128.
    Definition Self := u128.
    
    Definition Bytes : Set := list u8.
    
    Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
      u128::["from_le_bytes"] bytes.
    
    Global Instance AssociatedFunction_from_le_bytes :
      Notation.DoubleColon Self "from_le_bytes" := {
      Notation.double_colon := from_le_bytes;
    }.
    
    Global Instance I : FromLittleEndian.Trait Self := {
      FromLittleEndian.from_le_bytes := from_le_bytes;
    }.
  End Impl_FromLittleEndian_for_u128.
  
  Module AccountIdGuard.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End AccountIdGuard.
  
  Module Impl_AccountIdGuard_for_ink_primitives_AccountId.
    Definition Self := ink_primitives.AccountId.
    
    Global Instance I : AccountIdGuard.Trait Self :=
      AccountIdGuard.Build_Class _.
  End Impl_AccountIdGuard_for_ink_primitives_AccountId.
  
  Module CodecAsType.
    Unset Primitive Projections.
    Class Trait (Self : Set) : Set := {
    }.
    Global Set Primitive Projections.
  End CodecAsType.
  
  Module Impl_CodecAsType_for_T.
    Definition Self := T.
    
    Global Instance I T : CodecAsType.Trait Self := CodecAsType.Build_Class _.
  End Impl_CodecAsType_for_T.
  
  Module Environment.
    Class Trait (Self : Set) : Set := {
      MAX_EVENT_TOPICS : usize;
      AccountId : Set;
      Balance : Set;
      Hash : Set;
      Timestamp : Set;
      BlockNumber : Set;
      ChainExtension : Set;
    }.
    
    Global Instance Method_MAX_EVENT_TOPICS `(Trait)
      : Notation.Dot "MAX_EVENT_TOPICS" := {
      Notation.dot := MAX_EVENT_TOPICS;
    }.
    Global Instance Method_AccountId `(Trait) : Notation.Dot "AccountId" := {
      Notation.dot := AccountId;
    }.
    Global Instance Method_Balance `(Trait) : Notation.Dot "Balance" := {
      Notation.dot := Balance;
    }.
    Global Instance Method_Hash `(Trait) : Notation.Dot "Hash" := {
      Notation.dot := Hash;
    }.
    Global Instance Method_Timestamp `(Trait) : Notation.Dot "Timestamp" := {
      Notation.dot := Timestamp;
    }.
    Global Instance Method_BlockNumber `(Trait)
      : Notation.Dot "BlockNumber" := {
      Notation.dot := BlockNumber;
    }.
    Global Instance Method_ChainExtension `(Trait)
      : Notation.Dot "ChainExtension" := {
      Notation.dot := ChainExtension;
    }.
  End Environment.
  
  Module NoChainExtension.
    Inductive t : Set :=
    .
  End NoChainExtension.
  Definition NoChainExtension := NoChainExtension.t.
  
  Definition _ : unit := run (Pure tt).
  
  Module DefaultEnvironment.
    Inductive t : Set :=
    .
  End DefaultEnvironment.
  Definition DefaultEnvironment := DefaultEnvironment.t.
  
  Definition _ : unit := run (Pure tt).
  
  Module Impl__crate_fmt_Debug_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Definition fmt
        (self : ref Self)
        (f : mut_ref _crate.fmt.Formatter)
        : M _crate.fmt.Result :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_fmt : Notation.Dot "fmt" := {
      Notation.dot := fmt;
    }.
    
    Global Instance I : _crate.fmt.Debug.Trait Self := {
      _crate.fmt.Debug.fmt := fmt;
    }.
  End Impl__crate_fmt_Debug_for_DefaultEnvironment.
  
  Module Impl__crate_clone_Clone_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Definition clone (self : ref Self) : M DefaultEnvironment :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_clone : Notation.Dot "clone" := {
      Notation.dot := clone;
    }.
    
    Global Instance I : _crate.clone.Clone.Trait Self := {
      _crate.clone.Clone.clone := clone;
    }.
  End Impl__crate_clone_Clone_for_DefaultEnvironment.
  
  Module Impl__crate_marker_StructuralPartialEq_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
      _crate.marker.StructuralPartialEq.Build_Class _.
  End Impl__crate_marker_StructuralPartialEq_for_DefaultEnvironment.
  
  Module Impl__crate_cmp_PartialEq_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Definition eq (self : ref Self) (other : ref DefaultEnvironment) : M bool :=
      _crate.intrinsics.unreachable tt.
    
    Global Instance Method_eq : Notation.Dot "eq" := {
      Notation.dot := eq;
    }.
    
    Global Instance I : _crate.cmp.PartialEq.Trait Self := {
      _crate.cmp.PartialEq.eq := eq;
    }.
  End Impl__crate_cmp_PartialEq_for_DefaultEnvironment.
  
  Module Impl__crate_marker_StructuralEq_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Global Instance I : _crate.marker.StructuralEq.Trait Self :=
      _crate.marker.StructuralEq.Build_Class _.
  End Impl__crate_marker_StructuralEq_for_DefaultEnvironment.
  
  Module Impl__crate_cmp_Eq_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Definition assert_receiver_is_total_eq (self : ref Self) : M unit :=
      Pure tt.
    
    Global Instance Method_assert_receiver_is_total_eq :
      Notation.Dot "assert_receiver_is_total_eq" := {
      Notation.dot := assert_receiver_is_total_eq;
    }.
    
    Global Instance I : _crate.cmp.Eq.Trait Self := {
    }.
  End Impl__crate_cmp_Eq_for_DefaultEnvironment.
  
  Module Impl_Environment_for_DefaultEnvironment.
    Definition Self := DefaultEnvironment.
    
    Definition MAX_EVENT_TOPICS := Pure 4.
    
    Global Instance AssociatedFunction_MAX_EVENT_TOPICS :
      Notation.DoubleColon Self "MAX_EVENT_TOPICS" := {
      Notation.double_colon := MAX_EVENT_TOPICS;
    }.
    
    Definition AccountId : Set := ink_primitives.AccountId.
    
    Definition Balance : Set := Balance.
    
    Definition Hash : Set := ink_primitives.Hash.
    
    Definition Timestamp : Set := Timestamp.
    
    Definition BlockNumber : Set := BlockNumber.
    
    Definition ChainExtension : Set := NoChainExtension.
    
    Global Instance I : Environment.Trait Self := {
      Environment.MAX_EVENT_TOPICS := MAX_EVENT_TOPICS;
    }.
  End Impl_Environment_for_DefaultEnvironment.
  
  Definition Balance : Set := u128.
  
  Definition Timestamp : Set := u64.
  
  Definition Gas : Set := u64.
  
  Definition BlockNumber : Set := u32.
End types.

Module FromLittleEndian.
  Class Trait (Self : Set) : Set := {
    Bytes : Set;
    from_le_bytes : ImplSelf.Bytes -> (M Self);
  }.
  
  Global Instance Method_Bytes `(Trait) : Notation.Dot "Bytes" := {
    Notation.dot := Bytes;
  }.
  Global Instance Method_from_le_bytes `(Trait)
    : Notation.Dot "from_le_bytes" := {
    Notation.dot := from_le_bytes;
  }.
End FromLittleEndian.

Module Impl_FromLittleEndian_for_u8.
  Definition Self := u8.
  
  Definition Bytes : Set := list u8.
  
  Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
    u8::["from_le_bytes"] bytes.
  
  Global Instance AssociatedFunction_from_le_bytes :
    Notation.DoubleColon Self "from_le_bytes" := {
    Notation.double_colon := from_le_bytes;
  }.
  
  Global Instance I : FromLittleEndian.Trait Self := {
    FromLittleEndian.from_le_bytes := from_le_bytes;
  }.
End Impl_FromLittleEndian_for_u8.

Module Impl_FromLittleEndian_for_u16.
  Definition Self := u16.
  
  Definition Bytes : Set := list u8.
  
  Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
    u16::["from_le_bytes"] bytes.
  
  Global Instance AssociatedFunction_from_le_bytes :
    Notation.DoubleColon Self "from_le_bytes" := {
    Notation.double_colon := from_le_bytes;
  }.
  
  Global Instance I : FromLittleEndian.Trait Self := {
    FromLittleEndian.from_le_bytes := from_le_bytes;
  }.
End Impl_FromLittleEndian_for_u16.

Module Impl_FromLittleEndian_for_u32.
  Definition Self := u32.
  
  Definition Bytes : Set := list u8.
  
  Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
    u32::["from_le_bytes"] bytes.
  
  Global Instance AssociatedFunction_from_le_bytes :
    Notation.DoubleColon Self "from_le_bytes" := {
    Notation.double_colon := from_le_bytes;
  }.
  
  Global Instance I : FromLittleEndian.Trait Self := {
    FromLittleEndian.from_le_bytes := from_le_bytes;
  }.
End Impl_FromLittleEndian_for_u32.

Module Impl_FromLittleEndian_for_u64.
  Definition Self := u64.
  
  Definition Bytes : Set := list u8.
  
  Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
    u64::["from_le_bytes"] bytes.
  
  Global Instance AssociatedFunction_from_le_bytes :
    Notation.DoubleColon Self "from_le_bytes" := {
    Notation.double_colon := from_le_bytes;
  }.
  
  Global Instance I : FromLittleEndian.Trait Self := {
    FromLittleEndian.from_le_bytes := from_le_bytes;
  }.
End Impl_FromLittleEndian_for_u64.

Module Impl_FromLittleEndian_for_u128.
  Definition Self := u128.
  
  Definition Bytes : Set := list u8.
  
  Definition from_le_bytes (bytes : ImplSelf.Bytes) : M Self :=
    u128::["from_le_bytes"] bytes.
  
  Global Instance AssociatedFunction_from_le_bytes :
    Notation.DoubleColon Self "from_le_bytes" := {
    Notation.double_colon := from_le_bytes;
  }.
  
  Global Instance I : FromLittleEndian.Trait Self := {
    FromLittleEndian.from_le_bytes := from_le_bytes;
  }.
End Impl_FromLittleEndian_for_u128.

Module AccountIdGuard.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End AccountIdGuard.

Module Impl_AccountIdGuard_for_ink_primitives_AccountId.
  Definition Self := ink_primitives.AccountId.
  
  Global Instance I : AccountIdGuard.Trait Self := AccountIdGuard.Build_Class _.
End Impl_AccountIdGuard_for_ink_primitives_AccountId.

Module CodecAsType.
  Unset Primitive Projections.
  Class Trait (Self : Set) : Set := {
  }.
  Global Set Primitive Projections.
End CodecAsType.

Module Impl_CodecAsType_for_T.
  Definition Self := T.
  
  Global Instance I T : CodecAsType.Trait Self := CodecAsType.Build_Class _.
End Impl_CodecAsType_for_T.

Module Environment.
  Class Trait (Self : Set) : Set := {
    MAX_EVENT_TOPICS : usize;
    AccountId : Set;
    Balance : Set;
    Hash : Set;
    Timestamp : Set;
    BlockNumber : Set;
    ChainExtension : Set;
  }.
  
  Global Instance Method_MAX_EVENT_TOPICS `(Trait)
    : Notation.Dot "MAX_EVENT_TOPICS" := {
    Notation.dot := MAX_EVENT_TOPICS;
  }.
  Global Instance Method_AccountId `(Trait) : Notation.Dot "AccountId" := {
    Notation.dot := AccountId;
  }.
  Global Instance Method_Balance `(Trait) : Notation.Dot "Balance" := {
    Notation.dot := Balance;
  }.
  Global Instance Method_Hash `(Trait) : Notation.Dot "Hash" := {
    Notation.dot := Hash;
  }.
  Global Instance Method_Timestamp `(Trait) : Notation.Dot "Timestamp" := {
    Notation.dot := Timestamp;
  }.
  Global Instance Method_BlockNumber `(Trait) : Notation.Dot "BlockNumber" := {
    Notation.dot := BlockNumber;
  }.
  Global Instance Method_ChainExtension `(Trait)
    : Notation.Dot "ChainExtension" := {
    Notation.dot := ChainExtension;
  }.
End Environment.

Module NoChainExtension.
  Inductive t : Set :=
  .
End NoChainExtension.
Definition NoChainExtension := NoChainExtension.t.

Definition _ : unit := run (Pure tt).

Module Impl_Root_scale_info_TypeInfo_for_NoChainExtension.
  Definition Self := NoChainExtension.
  
  Definition Identity : Set := Self.
  
  Definition type_info (_ : unit) : M Root.scale_info.Type :=
    let* α0 := Root.scale_info.Type::["builder"] tt in
    let* α1 :=
      Root.scale_info.Path::["new"] "NoChainExtension" "ink_env::types" in
    let* α2 := α0.["path"] α1 in
    let* α3 := _crate.vec.Vec::["new"] tt in
    let* α4 := α2.["type_params"] α3 in
    let* α5 :=
      α4.["docs"]
        (addr_of
          [ "Placeholder for chains that have no defined chain extension." ]) in
    let* α6 := Root.scale_info.build.Variants::["new"] tt in
    α5.["variant"] α6.
  
  Global Instance AssociatedFunction_type_info :
    Notation.DoubleColon Self "type_info" := {
    Notation.double_colon := type_info;
  }.
  
  Global Instance I : Root.scale_info.TypeInfo.Trait Self := {
    Root.scale_info.TypeInfo.type_info := type_info;
  }.
End Impl_Root_scale_info_TypeInfo_for_NoChainExtension.

Module DefaultEnvironment.
  Inductive t : Set :=
  .
End DefaultEnvironment.
Definition DefaultEnvironment := DefaultEnvironment.t.

Definition _ : unit := run (Pure tt).

Module Impl_Root_scale_info_TypeInfo_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition Identity : Set := Self.
  
  Definition type_info (_ : unit) : M Root.scale_info.Type :=
    let* α0 := Root.scale_info.Type::["builder"] tt in
    let* α1 :=
      Root.scale_info.Path::["new"] "DefaultEnvironment" "ink_env::types" in
    let* α2 := α0.["path"] α1 in
    let* α3 := _crate.vec.Vec::["new"] tt in
    let* α4 := α2.["type_params"] α3 in
    let* α5 :=
      α4.["docs"]
        (addr_of [ "The fundamental types of the default configuration." ]) in
    let* α6 := Root.scale_info.build.Variants::["new"] tt in
    α5.["variant"] α6.
  
  Global Instance AssociatedFunction_type_info :
    Notation.DoubleColon Self "type_info" := {
    Notation.double_colon := type_info;
  }.
  
  Global Instance I : Root.scale_info.TypeInfo.Trait Self := {
    Root.scale_info.TypeInfo.type_info := type_info;
  }.
End Impl_Root_scale_info_TypeInfo_for_DefaultEnvironment.

Module Impl__crate_fmt_Debug_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition fmt
      (self : ref Self)
      (f : mut_ref _crate.fmt.Formatter)
      : M _crate.fmt.Result :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_fmt : Notation.Dot "fmt" := {
    Notation.dot := fmt;
  }.
  
  Global Instance I : _crate.fmt.Debug.Trait Self := {
    _crate.fmt.Debug.fmt := fmt;
  }.
End Impl__crate_fmt_Debug_for_DefaultEnvironment.

Module Impl__crate_clone_Clone_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition clone (self : ref Self) : M DefaultEnvironment :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_clone : Notation.Dot "clone" := {
    Notation.dot := clone;
  }.
  
  Global Instance I : _crate.clone.Clone.Trait Self := {
    _crate.clone.Clone.clone := clone;
  }.
End Impl__crate_clone_Clone_for_DefaultEnvironment.

Module Impl__crate_marker_StructuralPartialEq_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Global Instance I : _crate.marker.StructuralPartialEq.Trait Self :=
    _crate.marker.StructuralPartialEq.Build_Class _.
End Impl__crate_marker_StructuralPartialEq_for_DefaultEnvironment.

Module Impl__crate_cmp_PartialEq_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition eq (self : ref Self) (other : ref DefaultEnvironment) : M bool :=
    _crate.intrinsics.unreachable tt.
  
  Global Instance Method_eq : Notation.Dot "eq" := {
    Notation.dot := eq;
  }.
  
  Global Instance I : _crate.cmp.PartialEq.Trait Self := {
    _crate.cmp.PartialEq.eq := eq;
  }.
End Impl__crate_cmp_PartialEq_for_DefaultEnvironment.

Module Impl__crate_marker_StructuralEq_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Global Instance I : _crate.marker.StructuralEq.Trait Self :=
    _crate.marker.StructuralEq.Build_Class _.
End Impl__crate_marker_StructuralEq_for_DefaultEnvironment.

Module Impl__crate_cmp_Eq_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition assert_receiver_is_total_eq (self : ref Self) : M unit := Pure tt.
  
  Global Instance Method_assert_receiver_is_total_eq :
    Notation.Dot "assert_receiver_is_total_eq" := {
    Notation.dot := assert_receiver_is_total_eq;
  }.
  
  Global Instance I : _crate.cmp.Eq.Trait Self := {
  }.
End Impl__crate_cmp_Eq_for_DefaultEnvironment.

Module Impl_Environment_for_DefaultEnvironment.
  Definition Self := DefaultEnvironment.
  
  Definition MAX_EVENT_TOPICS := Pure 4.
  
  Global Instance AssociatedFunction_MAX_EVENT_TOPICS :
    Notation.DoubleColon Self "MAX_EVENT_TOPICS" := {
    Notation.double_colon := MAX_EVENT_TOPICS;
  }.
  
  Definition AccountId : Set := ink_primitives.AccountId.
  
  Definition Balance : Set := Balance.
  
  Definition Hash : Set := ink_primitives.Hash.
  
  Definition Timestamp : Set := Timestamp.
  
  Definition BlockNumber : Set := BlockNumber.
  
  Definition ChainExtension : Set := NoChainExtension.
  
  Global Instance I : Environment.Trait Self := {
    Environment.MAX_EVENT_TOPICS := MAX_EVENT_TOPICS;
  }.
End Impl_Environment_for_DefaultEnvironment.

Definition Balance : Set := u128.

Definition Timestamp : Set := u64.

Definition Gas : Set := u64.

Definition BlockNumber : Set := u32.

Module test := self.engine.off_chain.test_api.

Import self.api.

Module format := ink_prelude.format.
